<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="white" />
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="black" />
    <link rel="canonical" href="/800-63-4-2ndPD/sp800-63cja.html" />

    <!-- Google Analytics -->
    <!--<script type="text/javascript" id="_fed_an_js_tag" src="http://www.nist.gov/js/federated-analytics.all.min.js?agency=NIST&subagency=mml&pua=UA-66610693-1&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c"></script> -->
    <!-- DAP Analytics -->
    <script type="text/javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=DOC&subagency=NIST&pua=UA-66610693-1&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c"></script>

	<link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css" />
	<script src="https://code.jquery.com/jquery-3.6.2.min.js" type="text/javascript"></script>
	<script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>
	<script src="https://unpkg.com/simple-jekyll-search/dest/simple-jekyll-search.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/800-63-4-2ndPD/static/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/800-63-4-2ndPD/static/css/NISTStyle.css" />
    <link rel="stylesheet" href="/800-63-4-2ndPD/static/css/NISTPages.css" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    
    <title>NIST特別刊行物800-63C</title>
    <meta property="og:title" content="NIST Special Publication 800-63C" />
    

    
    <meta name="description" content="NIST Special Publication 800-63C" />
    <meta property="og:description" content="NIST Special Publication 800-63C" />
    
</head>


<body>

<nav class="navbar navbar-default navbar-fixed-left" role="navigation">
	<ul class="nav navbar-nav">
      <li id="search-box">
        <input type="text" id="search-input" placeholder="Search..." onfocus="loadSearch()" />
        <ul id="results-container"></ul>
      </li>
      
        
        
        
        <li class="">
          
             <a href="/800-63-4-2ndPD/">ホーム</a>       </li>
      
        
        
        
        <li class="">
          
             <a href="/800-63-4-2ndPD/sp800-63ja.html">SP 800-63</a>     </li>
      
        
        
        
        <li class="">
          
             <a href="/800-63-4-2ndPD/sp800-63aja.html">SP 800-63A</a>      </li>
      
        
        
        
        <li class="">
          
             <a href="/800-63-4-2ndPD/sp800-63bja.html">SP 800-63B</a>      </li>
      
        
        
        
        <li class="active">
          
              <a href="/800-63-4-2ndPD/sp800-63cja.html">SP 800-63C</a>
          
          
          
        
            
            
            
            <ul class="subnav">
            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#abstract">要旨</a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#reviewers">レビュアー</a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#preface">序文</a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#introduction"><span class="section">1はじめに</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#fal"><span class="section">2FAL</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#common"><span class="section">3連邦</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#GenIdP"><span class="section">4汎用</span>IdP</a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#wallet"><span class="section">5財布</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#security"><span class="section">6セキュリティ</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#privacy"><span class="section">7プライバシー</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#usability"><span class="section">8ユーザビリティ</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#equity"><span class="section">9エクイティ</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#examples"><span class="section">10例</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#references">参考文献</a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#abbr"><span class="section">略語</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#def-and-acr"><span class="section">BGlossary（用語集</span></a></li>
                
              
              

            
              
              
              
                
                
                
                
                
                    <li class=""><a href="/800-63-4-2ndPD/sp800-63cja.html#changelog"><span class="section">CChangelog</span></a></li>
                
              
              

            
          
            </ul>
          
          
          
        </li>
      
      
      
  </ul>

</nav>


<div class="page-switch">

このドキュメントを次のように表示する：<b>単一ページ</b>｜<a href="/800-63-4-2ndPD/sp800-63c/introduction/">複数ページ</a>。</div>

<div class="container">
  <div class="row">





<p>2024年8月28日（水）20:39:12 -0500</p>

<h1 id="abstract">
  
  
    ABSTRACT <a href="#abstract" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p>このガイドラインは、ID フェデレーションを実装するために、フェデレーションされた ID の使用とアサーションの使用に重点を置いている。フェデレーションにより、あるクレデンシャル・サービス・プロバイダは、認証属性および（オプ ションで）サブスクライバ属性を、別々に管理される多数の依拠当事者に提供できる。同様に、依拠当事者は複数のクレデンシャル・サービス・プロバイダを使用できる。このガイドラインは、この目的以外の標準の開発または使用を制限することを意図していない。本書は、NIST 特別刊行物（SP）800-63C に取って代わるものである。</p>
<h1 id="keywords">
  
  
    キーワード <a href="#keywords" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p>アサーション；認証；クレデンシャル・サービス・プロバイダ；デジタル認証；電子認証；電子クレデンシャル；フェデレーション。</p>

<h1 id="reviewers" class="no_toc">
  
  
    レビュアーの皆様へ <a href="#reviewers" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p>2022 年 12 月、NIST は SP 800-63 改訂 4 版の初期公開草案（IPD）を公表した。119 日間のパブリックコメント期間中、著者は幅広い関係団体や個人から非常に優れた フィードバックを受けた。約 4,000 件の具体的なコメントからのインプットは、安全で、プライベートで、公平で、アクセ ス可能な ID システムの実装を可能にする基礎的なリスク管理プロセスと要件を提供するという NIST の重要な目標を支援する形で、デジタル ID ガイドラインの改善を進めるのに役立った。この最初のフィードバックの波に基づいて、すべてのボリュームにわたっていくつかの実質的な 変更が加えられた。これらの変更には以下が含まれるが、これらに限定されない：</p>

<ol>
  <li>リスク管理のための本文およびコンテキスト設定の更新。具体的には、著者は IPD で定義されたプロセスを修正し、組織が提供し、ID システムで保護する 可能性があるオンライン・サービスを定義し、理解するコンテキスト設定ステップを含めるようにし た。</li>
  <li>推奨される継続的評価基準の追加IPD によって導入された継続的改善のセクションが拡張され、ID ソリューションのパフォーマンスを全体 的に評価するための推奨メトリクス一式が追加された。これらは、データ・ストリームの複雑さとソリューション展開のばらつきのために推奨されている。</li>
  <li>拡張された不正要件および推奨。クレデンシャル・サービス・プロバイダおよび依拠当事者に対するプログラム上の不正 管理要件が、不正チェックの実施から生じる可能性のある問題および課題に対応するようになった。</li>
  <li>ID プルーフィング管理を再構築した。証明を提供する手段に基づいて、各保証レベルの要件に新しい分類法と構造がある：リモート無人、リモート出席（ビデオ・セッションなど）、オンサイト無人（キオスクな ど）、オンサイト出席（対面など）。</li>
  <li>統合された同期可能な認証子。2024 年 4 月、NIST は、同期可能な認証子に関する暫定ガイダンスを公表した。このガイダンスは、規範となるテキストとして SP 800-63B に統合され、改訂 4 版のボリュームセットの一部として、一般からのフィードバックのために提供されている。</li>
  <li>フェデレーション・モデルにユーザ管理ウォレットを追加。デジタル・ウォレットとクレデンシャル（SP 800-63C では「属性バンドル」と呼ばれる）は、注目と採用 が高まっている。その核心は、フェデレーショ ンされた IdP のように機能し、対象者に関する署名されたアサーションを生成することである。このプレゼンテー ションおよび新たなコンテキストに関する具体的な要件は、SP 800-63C-4 に示されている。</li>
</ol>

<p>過去数年間のオンライン・サービスの急速な普及により、信頼性が高く、公平で、安全で、プライ バシを保護するデジタル ID ソリューションの必要性が高まっている。 NIST 特別刊行物 SP 800-63「<em>デジタル ID ガイドライン</em>」の改訂 4 は、オンライン・リスクの現実世界での影響を含め、このスイートの最後の大改訂が 2017 年に発行されて以降に現れた変化するデジタル状況に対応することを意図している。このガイドラインは、セキュリティとプライバシーの要件だけでなく、衡平性とデジタル ID ソリューションおよび技術の使いやすさを促進するための考慮事項など、ID 証明、認証、およびフェデレーションのデジタル ID 管理保証レベルを満たすためのプロセスと技術要件を提示している。</p>

<p>この草案は、2020年6月のプレドラフト意見募集に寄せられたフィードバック、ガイドラインの実際の実施例に関する調査、市場のイノベーション、および現在の脅威環境に基づいて、以下を目指すものである：</p>

<ul>
  <li>SP 800-63 の改訂 4 の IPD に対して寄せられたコメントへの対応</li>
  <li>パブリックコメントで提起された疑問や問題に対応するため、文章を明確にする。</li>
  <li>SP 800-63 の全 4 巻を、現在の技術および市場の発展、変化するデジタル ID 脅威の状況、お よびオンライン・セキュリティ、プライバシー、ユーザビリティ、および公平性に対応する デジタル ID ソリューションに対する組織のニーズに基づいて更新する。</li>
</ul>

<p>NISTは、特に以下のトピックに関するコメントや提言に関心を寄せている：</p>

<ol>
  <li>
    <p>連盟とアサーション</p>

    <ul>
      <li>ユーザが管理するウォレットと属性バンドルの概念は、実際の実装をサポートするために十分かつ明確に記述されていますか？これらの技術のセキュリティ、ユーザビリティ、プライバシーを向上させるために追加すべき要件や考慮事項はありますか？</li>
    </ul>
  </li>
  <li>
    <p>一般</p>

    <ul>
      <li>デジタル ID ガイドラインおよび今後の反復をより迅速に採用し実施するために、具体的な実 施ガイダンス、参照アーキテクチャ、測定基準、またはその他の支援リソースは何か。</li>
      <li>どのような応用研究と測定の取り組みが、ID 市場とこれらのガイドラインの進展に最も大きな影響 をもたらすだろうか？</li>
    </ul>
  </li>
</ol>

<p>レビュワーは、SP 800-63-4 一式の全 4 巻の草案の本文に対してコメントし、変更を提案することが推奨される。NISTは、すべてのコメントを2024年10月7日午後11時59分（米国東部時間）までに提出するよう求めています。ご意見は<a href="mailto:dig-comments@nist.gov">dig-comments@nist.gov</a> までお寄せください<a href="mailto:dig-comments@nist.gov">。</a>NIST はすべてのコメントを検討し、<a href="https://www.nist.gov/identity-access-management">NIST Identity and Access Management ウェブサイトで</a>公開する。コメント提出者は、NIST コンピュータセキュリティリソースセンターのウェブサイトに掲載されているコメントテンプレートを使用して、これらのレビュアーへの注意事項に対する回答や、4巻からなる一連の文書に対する具体的なコメントを提出することが推奨される。</p>

<h1 id="preface">
  
  
    序文 <a href="#preface" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p>本書およびその付属書である<a href="/800-63-4-2ndPD/sp800-63/introduction/#introduction" latex-href="#ref-SP800-63">[SP800-63]</a>、<a href="/800-63-4-2ndPD/sp800-63a/introduction/#introduction" latex-href="#ref-SP800-63A">[SP800-63A]</a>、および<a href="/800-63-4-2ndPD/sp800-63b/introduction/#introduction" latex-href="#ref-SP800-63B">[SP800-63B]</a> は、デジタル ID サービスを実装するための技術ガイドラインを組織に提供する。</p>

<p>この文書、SP 800-63C は、フェデレーションされた ID システムの ID プロバイダ（IdP）およ び依拠当事者（RP）に対する要件を規定している。フェデレーションにより、所定の IdP は、フェデレーション・プロトコルおよびアサーションを使用 して、認証属性および（オプションで）加入者属性を個別に管理される多数の RP に提供できる。同様に、RP は ID のソースとして複数の IdP を使用できる。</p>

<h1 id="introduction" data-section="1">
  
  
    はじめに <a href="#introduction" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは参考になる。</em></p>

<p>フェデレーションは、<a href="/800-63-4-2ndPD/sp800-63a/introduction/#introduction" latex-href="#ref-SP800-63A">[SP800-63A]</a>で定義されたサブスクライバアカウントを、サブスクライバア カウントにバインドされた認証子の 1 つを検証しない RP で使用できるようにするプロセスである。代わりに、ID プロバイダ（IdP）として知られるサービスが、フェデレーションプロトコルを 通じてサブスクライバアカウントを依拠当事者（RP）に利用可能にする。IdP は、サブスクライバの認証イベントをトリガとして、サブスクライバ・アカウントに 関するアサーションと呼ばれる検証可能なステートメントを RP に送信する。RP は、IdP が提供するアサーションを検証し、サブスクライバとの認証セッションを作成して、サブスクライバに RP の機能へのアクセスを許可する。</p>

<p>IdPは2つのモードのいずれかで動作する：</p>

<ul>
  <li><a href="/800-63-4-2ndPD/sp800-63b/introduction/#introduction" latex-href="#ref-SP800-63B">SP800-63B]</a>に記載されているように、サブスクライバアカウントにバインドされている認証機 関のベリファイアとして（詳細は<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#GenIdP">第 4 節を</a>参照）。</li>
  <li>CSPが搭載する加入者制御デバイスとして、しばしばデジタルウォレットとして知られる（詳細は<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#wallet">第5項を</a>参照）。</li>
</ul>

<p>フェデレーション・プロセスにより、サブスクライバは、各 RP で個別の認証子を保持または維持する必要なく、複数の RP からサービスを取得できる。また、フェデレーションプロセスは、RPとサブスクライバアカウントが共通のセキュリ ティドメインの下で一緒に管理されていない場合、RPがサブスクライバアカウントの認証子 を検証する必要がないため、一般的に認証に好ましいアプローチである。それでも、フェデレーションを単一のセキュリティ・ドメイン内で適用することで、アカウント管理の一元化や技術統合など、さまざまなメリットを得ることができる。</p>

<p>フェデレーション・プロセスは、トラスト・アグリーメントの締結を促進するフェデレーション・オーソリティや、プロトコルの接続を促進するフェデレーション・プロキシなど、他の役割を担う追加パーティによって促進することができる。</p>
<h2 id="notations" data-section="1">
  
  
    表記 <a href="#notations" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>本ガイドラインでは、本文中において以下のような表記規則を用いている：</p>

<ul>
  <li><strong>大文字で</strong>示された特定の用語は、規範となる要求事項を表す。同じ用語が<strong>大文字で</strong>表されていない場合，その用語は規範的要求事項を表していない。    <ul>
      <li><strong>SHALL</strong>"及び "<strong>SHALL NOT</strong>"という用語は，その出版物に適合するために厳密に従うべき要求事項を示し，そこからの逸脱は許されない。</li>
      <li><strong>SHOULD</strong>"及び "<strong>SHOULD NOT</strong>"という用語は，いくつかの可能性の中で，他の可能性に言及したり除外したりすることなく，特に適切なものとして推奨されること，ある行動方針が望ましいが必ずしも必要ではないこと，又は（否定形では）ある可能性や行動方針が推奨されないが禁止されないことを示す。</li>
      <li><strong>MAY</strong>"と "<strong>NEED NOT</strong>"という用語は、出版物の範囲内で許容される行動方針を示す。</li>
      <li><strong>CAN</strong>"と "<strong>CANNOT</strong>"という用語は、物質的であれ、物理的であれ、因果的であれ、可能性や能力を示すか、否定形では、その可能性や能力がないことを示す。</li>
    </ul>
  </li>
</ul>
<h2 id="document-structure" data-section="1">
  
  
    文書の構造 <a href="#document-structure" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>本文書の構成は以下の通りである。各セクションは、規範的（すなわち、準拠のために必須）または参考的（すなわち、必須ではない）のいずれかのラベルが付けられている。</p>

<ul>
  <li>セクション1では、この文書の紹介をする。このセクションは<em>有益で</em>ある。</li>
  <li>セクション 2 では、フェデレーション保証レベルの要件について記述する。本節は<em>規範的な</em>ものである。</li>
  <li>セクション 3 では、フェデレーション・システムの一般的な要件について記述する。このセクションは<em>規範で</em>ある。</li>
  <li>第 4 節では、汎用 IdP の要件について記述する。本節は<em>規範的な</em>ものである。</li>
  <li>セクション 5 では、サブスクライバが管理するウォレットの要件について説明する。このセクションは<em>規範的な</em>ものである。</li>
  <li>セクション6では、セキュリティに関する考察を行う。このセクションは<em>参考で</em>ある。</li>
  <li>セクション7は、プライバシーに関する考察を提供する。このセクションは<em>参考で</em>ある。</li>
  <li>セクション8では、ユーザビリティに関する考察を行う。このセクションは<em>参考になる</em>。</li>
  <li>セクション9は、衡平性への配慮について述べている。このセクションは<em>参考になる</em>。</li>
  <li>セクション10では、シナリオ例を追加している。このセクションは<em>参考となる</em>。</li>
  <li>参考文献 本書から引用した出版物のリスト。このセクションは<em>参考情報</em>である。</li>
  <li>付録Aは、本書で使用される略語の一覧である。この付録は<em>参考資料</em>である。</li>
  <li>付録Bは、本文書で使用される用語の一部をまとめたものである。この付録は<em>参考資料</em>である。</li>
  <li>付録Cには、この文書の歴史における変更点の要約リストが含まれている。この付録は<em>参考資料</em>である。</li>
</ul>

<h1 id="fal" data-section="2">
  
  
    フェデレーション保証レベル（FAL） <a href="#fal" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは規範的なものである。</em></p>

<p>本セクションでは、<em>フェデレーション保証レベル</em>（<em>FAL</em>）と、各 FAL におけるフェデレーション・トランザクショ ンのセキュリティ確保のための要件を定義する。指定された FAL の要件を満たすために、フェデレーション・トランザクションは<strong>、</strong>その FAL について列挙されたすべての要件を満たすか、それ以上で<strong>なければならない（SHALL）</strong>。</p>

<p>各FALは、FALが大きくなるにつれてセキュリティと複雑さを増す一連の要件によって特徴付けられる。これらの要件はここに列挙され、本文書の他のセクションで拡大されている：</p>

<dl>
  <dt>観客数制限</dt>
  <dd>フェデレーション・プロトコルで提示されるアサーションは、特定の RP を対象としており、 RP は、その RP がアサーションの意図された対象者であることを確認できる。</dd>
  <dt>インジェクション・プロテクション</dt>
  <dd>RPは、攻撃者が現在のフェデレーション・トランザクション・リクエスト以外の状況でアサーションを提 示することから強く保護される。(インジェクション保護の詳細については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#injection-protection">第 3.10.1 節を</a>参照のこと)。</dd>
  <dt>信託契約の成立</dt>
  <dd>RPでサブスクライバーの認証セッションを作成する目的で、フェデレーショントランザクショ ンに参加する合意。(トラスト契約の詳細については<a href="/800-63-4-2ndPD/sp800-63c/Federation/#trust-agreement">セクション3.4を</a>参照のこと)。</dd>
  <dt>識別子と鍵の確立</dt>
  <dd>IdP と RP は、将来のフェデレーション・トランザクション中にアサーションおよび他の成果物の検 証を可能にするために、識別子と鍵資料を交換した。(鍵の確立の詳細については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#identifiers-keys">第 3.5 節を</a>参照されたい。）</dd>
  <dt>プレゼンテーション</dt>
  <dd>アサーションは、単独で（ベアラ・アサーションとして）、またはサブスクライバが提示する 認証子と協調して、RPに提示することができる。</dd>
</dl>

<p><a href="/800-63-4-2ndPD/sp800-63c/fal/#table-1">表 1</a>は、各 FAL の側面の非規範的な要約を提供する。連続する各レベルは、下位レベルのすべての要件を包含し、満たす（例えば、FAL3 のフェデレーション・プロセスは、FAL3 がこれら下位レベルのすべての要件を満たすため、FAL2 または FAL1 で受け入れられる）。<a href="/800-63-4-2ndPD/sp800-63c/fal/#table-1">表 1</a>にない組み合わせも可能であり、機関は、所与の FAL において、要件の 1 つまたは複数の分野でより強力な保護を実施することを選択できる。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/fal/#table-1" name="table-1">表 1.連盟のアサーション・レベル</a></p>

<table latex-table="1" latex-caption="Federation Assurance Levels">
  <thead>
    <tr>
      <th style="text-align: center">必要条件</th>
      <th>ファル1</th>
      <th>ファルツー</th>
      <th>ファルスリー</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">観客数制限</td>
      <td>アサーションごとに複数の RP を使用可能、アサーションごとに単一の RP を推奨</td>
      <td>アサーションごとのシングルRP</td>
      <td>アサーションごとのシングルRP</td>
    </tr>
    <tr>
      <td style="text-align: center">インジェクション・プロテクション</td>
      <td>すべての取引に推奨</td>
      <td>トランザクションは RP から開始される。</td>
      <td>トランザクションは RP から開始される。</td>
    </tr>
    <tr>
      <td style="text-align: center">信託契約の成立</td>
      <td>加入者主導かアプリオリか</td>
      <td>アプリオリ</td>
      <td>アプリオリ</td>
    </tr>
    <tr>
      <td style="text-align: center">識別子と鍵の確立</td>
      <td>動的または静的</td>
      <td>動的または静的</td>
      <td>静的</td>
    </tr>
    <tr>
      <td style="text-align: center">プレゼンテーション</td>
      <td>ベアラのアサーション</td>
      <td>ベアラのアサーション</td>
      <td>キーの所有者アサーションまたはバウンド認証子</td>
    </tr>
  </tbody>
</table>

<p>多くの異なるフェデレーション実装オプションが可能であるが、FALは、ますます安全な展開オプションを表す明確なガイダンスを提供することを意図している。最適なFALの選択方法の詳細については、<a href="/800-63-4-2ndPD/sp800-63/introduction/#introduction" latex-href="#ref-SP800-63">[SP800-63]</a>を参照のこと。</p>

<blockquote>
  <p>注：本ガイドラインでは、アサーション、属性バンドル、およびフェデレーション・プロトコルのその他の要素は、非対称デジタル署名または対称 MAC によって保護される。非対称暗号または対称暗号のいずれかが特に要求される場合、"sign "および "signature "という用語は、要求を示すために適宜修飾される。どちらの選択肢も可能な場合、"署名 "および "署名 "という用語は修飾子なしで使用される。</p>
</blockquote>
<h2 id="falcommon" data-section="2">
  
  
    一般的なFALの要件 <a href="#falcommon" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>すべての FAL において、すべてのフェデレーション・トランザクションは、RP にアサーションを配信し、RP で認証されたセッションを作成するために、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#common">第 3 条の</a>要件に準拠<strong>しなければならない（SHALL）</strong>。フェデレーション・プロトコルで使用されるアサーションの例としては、OpenID Connect<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">[OIDC]</a>の ID トークンや、Security Assertion Markup Language<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML">[SAML]の</a>アサーション・フォーマットがある。</p>

<p>すべての FAL において、RP は、加入者の認証イベントを表す有効なアサーションを提供する IdP を信頼する必要があり、アサーションを検証<strong>しなければならない（SHALL）</strong>。</p>

<p>IdP 及び RP は，本ガイドラインが保護に使用される情報システム，アプリケーション及びオンラインサ ービスに対して，組織が決定した<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-53">[SP800-53]</a>又は同等の連邦標準（例えば，<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FEDRAMP">[FEDRAMP]</a>）若しくは業 界標準に定義された中程度の基本セキュリティ管理から，適切に調整されたセキュリティ管理を採用<strong>しなけ ればならない</strong>。IdP および RP は、適切なシステムまたは同等のシステムの最低保証関連管理が満たされていることを 保証<strong>しなければならない（SHALL）</strong>。追加のセキュリティ管理については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#security-controls">第 3.10 節で</a>説明する。</p>

<p>信託契約または連盟取引によってFALが指定されていない場合でも、本項の要件が適用される。</p>

<p>IdP または RP は、ユースケースとニーズに応じて、複数の FAL で同時に運用できる。たとえば、IdP は、高リスクの RP に FAL3 のフェデレーション・トランザクションを提供する一方で、低リスク・プロ ファイルを持つ RP に FAL2 を提供することができる。同様に、RP は、通常のアクションには FAL2 を要求するが、影響度の高い、または機密性の高いアクションには FAL3 での再認証を加入者に要求することができる。IdP は、同時に、任意の IAL でプルーフされた加入者アカウントにアクセスでき、任意の AAL での認証を許可できるため、この能力は他の次元にも及ぶ。しかし、その IdP と会話する RP は、アクセスに受け入れる最低の IAL および AAL に制限を持つ可能性がある。結果として、さまざまなユースケースで許可され、要求される xAL をトラスト合意で確立することが必須である。</p>
<h2 id="fal1" data-section="2">
  
  
    フェデレーション・アシュアランス・レベル1（FAL1） <a href="#fal1" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>FAL1 は、フェデレーション・トランザクションの基本的な保護レベルを提供し、幅広いユースケースと配備の決定を可能にする。</p>

<p>FAL1 において、IdP は<strong>、</strong>承認された暗号を使用してアサーションに署名<strong>しなければならない （SHALL）</strong>。RP は<strong>、</strong>期待される IdP に関連する鍵を使用して署名を検証<strong>しなければならない（SHALL）</strong>。署名は、アサーション内容の完全性を保護し、IdP がアサーションの出所として検証されることを可能にする。</p>

<p>FAL1 でのすべてのアサーションは、特定の RP または RP のセットに視聴者を限定<strong>しなければならず</strong>、 RP は、指定されたアサーションについて、対象となる RP の 1 つであることを検証<strong>しなければならない（SHALL）</strong>。</p>

<p>FAL1 では、フェデレーショントランザクション中に加入者によって信頼合意が確立<strong>されてもよい （MAY）</strong>。FAL1 では、RP と IdP が事前にトラスト合意を確立することも可能であることに注意。</p>

<p>FAL1において、フェデレーションプロトコルは、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#injection-protection">セクション3.10.</a>1で議論されているように、 インジェクション保護を適用<strong>すべきである[SHOULD]</strong>。フェデレーショントランザクションはRPによって開始さ<strong>れるべきである(SHOULD)</strong>。</p>
<h2 id="fal2" data-section="2">
  
  
    フェデレーション・アシュアランス・レベル2（FAL2） <a href="#fal2" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>FAL2 は、フェデレーション・トランザクションに対して高レベルの保護を提供し、フェデレーション・シス テムに対するさまざまな攻撃に対する保護を提供する。FAL1 の要件はすべて FAL2 に適用されるが、ここでの要件がより具体的または厳格な要件に よって上書きされる場合はこの限りではない。</p>

<p>FAL2 では、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#injection-protection">第 3.10.1 節で</a>説明するように、アサーションはインジェクション攻撃から強力に保護 さ<strong>れなければならない（SHALL）</strong>。フェデレーション・トランザクションは RP が開始<strong>しなければならない（SHALL）</strong>。</p>

<p>FAL2 では、アサーションは単一の RP に制限される<strong>ものとする</strong>。</p>

<p>FAL2 では、フェデレーショントランザクションが行われる前に、アプリオリ信頼合意が確立 さ<strong>れなければならない[SHALL]</strong>。</p>

<p>FAL2 以上のアサーションを提示する連邦機関により、または連邦機関のために運営される IdP は<strong>、</strong> <a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FIPS140">[FIPS140]</a>レベル 1 以上で検証されたメカニズムにより、当該アサーションの署名または暗号化に使用される鍵を保護<strong>しなければならない</strong>。</p>
<h2 id="fal3" data-section="2">
  
  
    フェデレーション・アシュアランス・レベル3（FAL3） <a href="#fal3" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>FAL3 は、フェデレーション・トランザクションに対して非常に高いレベルの保護を提供し、IdP によってアサートされたサブスクライバが認証されたセッションに存在するサブスクライバであるという非常に高い信頼性を確立する。FAL1 および FAL2 のすべての要件は、ここのより具体的または厳格な要件によって上書きされる場 合を除き、FAL3 に適用される。</p>

<p>FAL3 において、RP は、サブスクライバがアサーションに加えて認証子を管理していることを検証<strong>しなければならない（SHALL）</strong>。この認証子は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#idp-managed-bound-authn">第 3.14 節に</a>記載されているように、Holder-of-Key アサーションで識別されるか、または<a href="/800-63-4-2ndPD/sp800-63c/Federation/#bound-authn">第 3.15 節に</a>記載されているように、バインドされた 認証子である。</p>

<p>FAL3 では、フェデレーション・トランザクションが行われる前に、IdP が RP を識別し、 信頼契約のすべての側面を遵守するように信頼契約を確立<strong>しなければならない（SHALL）</strong>。これを容易にするために、RP と IdP を相互に認証するために使用される鍵資料は、信頼されたメカニズムを使用して、静的な方法で RP と IdP の識別子に関連付けられる。例えば、RPを表す公開鍵ファイルは、静的な登録プロセス中にIdPにアップロードされ、RPは、信頼協定に示されたURLからIdPの公開鍵をダウンロードする。あるいは、信頼協定は、RP と IdP がそれぞれの公開鍵をフェデレーション・オーソリティにアップ ロードし、その後、同じ信頼されたオーソリティから互いの鍵をダウンロードすることを規定するこ とができる。</p>

<p>FAL3 でアサーションを提示する連邦機関により、または連邦機関のために運営される IdP は<strong>、</strong> <a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FIPS140">[FIPS140]</a>レベル 1 以上で検証されたメカニズムにより、当該アサーションの署名または暗号化に使用される鍵を保護<strong>しなければならない</strong>。</p>
<h2 id="request-xals" data-section="2">
  
  
    xALのリクエストと処理 <a href="#request-xals" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>IdP は、多様なフェデレーション・パラメータを使用して、多様な認証子による多様な加入者の ID をアサートできるため、IAL、AAL、および FAL は、同一の RP に対してであっても、異なるフェデレーション・トランザクション間で異なる可能性がある。</p>

<p>IdP は、RP が信頼契約の一部として許容可能な最低 xAL セットを指定するメカニズムをサポート<strong>しなければならず（SHALL）</strong>、RP がフェデレーション・トランザクションの一部として実行時に より厳格な最低セットを指定することをサポート<strong>すべきである（SHOULD）</strong>。RP が特定の xAL を要求した場合、IdP は可能であればその要求を<strong>満たすべきであり（SHOULD）</strong>、その結果 生じる xAL をアサーションで<strong>示さなければならない（SHALL）</strong>。たとえば、サブスクライバが AAL1 で認証されたアクティブなセッションを持っているが、RP が AAL2 を要求している場合、IdP は、可能であれば、サブスクライバが IdP で対話中に、IdP でのセッションのセキュリティを強化するために、サブスクライバに AAL2 認証を促す必要がある。IdP は、AAL1（ステップアップ認証が満たされなかった）または AAL2（ス テップアップ認証が正常に満たされた）のいずれであっても、返されたアサーションの 一部として、結果の AAL を送信する。</p>

<p>IdP は<strong>，</strong>各フェデレーション・トランザクションについて，以下の情報を RP に通知<strong>しなければならない</strong>：</p>

<ul>
  <li>RP に提示される加入者口座の IAL、または IAL の請求が行われていないことを示す表示。</li>
  <li>IdP におけるサブスクライバの現在アクティブなセッションの AAL、または AAL 要求が行われていないことを示す表示。</li>
  <li>連盟取引のFAL</li>
</ul>

<p>RP は、この xAL 情報を、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#trust-agreement">第 3.4 節に</a>記載される信頼契約の条件と、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#assertions">第 4.9 節</a>および<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#assertion-contents">第 5.8 節に</a>記載されるアサーションに 含まれる情報との組み合わせから取得する。xAL が IdP と RP 間のすべてのメッセージについて不変である場合、xAL 情報は<strong>、</strong>IdP と RP 間の信頼契約の条件に含ま<strong>れなければならない（SHALL）</strong>。xAL が信頼契約で指定された可能な値の範囲内にある可能性がある場合、xAL 情報はアサーション内容の 一部として<strong>含めなければならない（SHALL）</strong>。</p>

<p>IdP は、指定されたフェデレーション・トランザクションの IAL または AAL に対してクレームがない<strong>ことを示してもよい（MAY）</strong>。そのような場合、RP は、結果として生じる xAL にデフォルト値を割り当てない。すなわち、信託契約またはアサーションのいずれかに IAL 宣言がないフェデレーション・トランザクショ ンは、機能的に「IAL がない」とみなされ、RP はアカウントが本スイートで記述される最低番号の IAL である「IAL1」を満たすと仮定することはできない。</p>

<p>RP は、提供される機能へのアクセスについて、受け入れ可能な最低限の IAL、AAL、および FAL を決定<strong>しなければならない（SHALL）</strong>。RP は、特定のフェデレーション認証の IAL、AAL、および FAL に基づいて、その機能を変えて<strong>もよい（MAY）</strong>。たとえば、RP は、一般的な機能（ダム・システムのステータスの表示など）については AAL2 でのフェデレーション・トランザクションを許可できるが、よりリスクの高い機能（ダム・システムの流量の変更など）については AAL3 の使用を要求できる。同様に、RP は、IAL2 で身元証明された特定の加入者アカウントのみに管理機能を制限できるが、 IAL に関係なくすべての加入者アカウントからのフェデレーショントランザクションを許可できる。</p>

<p>フェデレーション・プロセスでは、適用される IAL を決定する加入者アカウントの詳細、および適用される AAL を決定する IdP での認証イベントに直接アクセスできるのは IdP のみである。その結果、IdP は、各フェデレーション・トランザクションの IAL、AAL、および意図する FAL を宣言する。</p>

<p>RP は、アサーションで宣言された FAL について、フェデレーション・トランザクションにおける義務を 満たすことを保証<strong>しなければならない（SHALL）</strong>。例えば、RP は、FAL2 以上で提示方法がインジェクション保護要件を満たしていること、FAL3 で適切なバインド認証子が提示されていることを確認する必要がある。</p>

<h1 id="common" data-section="3">
  
  
    連盟の共通要件 <a href="#common" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは規範的なものである。</em></p>

<p>フェデレーショントランザクションは、サブスクライバが、IdP に既知のサブスクライバ アカウントに基づいて RP との認証済みセッションを確立できるようにする役割を果たす。フェデレーション・トランザクションはまた、認証されたセッション内の ID 属性のセットを RP に提供することができる。認証されたセッションは、次に RP によって使用される：</p>

<ul>
  <li>加入者が RP の機能にアクセスするためにログインすること、</li>
  <li>提示された属性に基づいて加入者を特定するステップと</li>
  <li>フェデレーション・トランザクションに提示された加入者属性を処理する。</li>
</ul>

<p>フェデレーション・トランザクションは、微妙なセキュリティとプライバシーの要件を持つ、比較的複雑なマルチパーティープロトコルを必要とする。特定のフェデレーション・プロトコル、プロファイル、または展開構造を評価するとき、それを構成要素関係に分解し、それぞれの必要性を評価することは、しばしば有益である：</p>

<ul>
  <li>サブスクライバから CSP へ、</li>
  <li>CSP から IdP へ、</li>
  <li>サブスクライバを IdP に渡す、</li>
  <li>IdP から RP、および</li>
  <li>加入者からRPへ。</li>
</ul>

<p>さらに、加入者は多くの場合、Web ブラウザのようなユーザエージェントを通じて CSP、IdP、および RP とやり取りする。したがって、ユーザエージェントはフェデレーションプロセスに関与することが多いが、すべての種類のアプリケーションおよび相互作用に必要なわけではない。そのため、本ガイドライン全体を通して説明されるサブスクライバのアクションは、オプションとしてユーザエージェントを介して実行することができる。必要な場合、ユーザーエージェントの要件は直接呼び出される。</p>

<p>フェデレーション・プロトコルの各当事者は、フェデレーション・システムが意図したとおりに機能するために果たさなければならない、特定の責任と期待を負っている。</p>

<p>加入者アカウントは、IdP によって、以下を含むがこれに限定されないフェデレーション固有項目で補強される：</p>

<ul>
  <li>フェデレーション・プロトコルで使用するための、1 つ以上の外部サブジェクト識別子</li>
  <li>どのRPがサブスクライバーアカウントのどの属性（許可リストや保存されたサブスクライバーによる実行時の決定など）にアクセスできるかを詳述したアクセス権のセット。</li>
  <li>アカウント利用情報</li>
  <li>IdPが収集した、あるいはIdPがアカウントに割り当てた追加属性</li>
</ul>

<p>これらの属性のサブセットは、アサーションまたは ID API（<a href="/800-63-4-2ndPD/sp800-63c/Federation/#s-identity-api">第 3.11.3 節</a>参照）を通じて、フェデレーショ ン・プロセスを通じて RP が利用できるようになる。これらの属性は、多くの場合、属性ベースのアクセス制御（ABAC）のためのアクセス権限の決定、 またはトランザクションの促進（配送先住所の提供など）に使用される。認可とアクセス制御の詳細は、本ガイドラインの範囲外である。</p>

<p>これらの属性を保持・管理するために、RPは加入者の<em>RP加入者アカウントを</em>保持 することが多い。RP加入者アカウントには、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#rp-account">セクション3.7で</a>説明するように、RP自体にローカルな 情報も含まれる。</p>

<p>フェデレーションの取引は、3つの次元にわたって行われる：</p>

<dl>
  <dt>信託契約：</dt>
  <dd>フェデレーションを目的として、CSP、IdP、および RP の接続を許可するポリシー決定の確立。このポリシーは、接続の許可を確立する信頼契約によって管理される。</dd>
  <dt>キーと識別子の関連付け：</dt>
  <dd>フェデレーション・トランザクションに参加する CSP、IdP、および RP の鍵と識別子の関連付け。このプロセスにより、当事者は将来の交換のために互いを安全に識別できるようになる。</dd>
  <dt>フェデレーション・プロトコル</dt>
  <dd>IdP によるサブスクライバの ID 検証と、それに続く RP へのアサーションの発行。この結果、加入者属性が RP に渡され、RP で加入者の認証セッションが確立される。</dd>
</dl>

<p>フェデレーション・プロセスが完了するためには、これらの次元がすべて満たされる必要がある。その正確な順序や、どの当事者がどのステップに関与するかは、展開モデルやその他の要因によって異なる可能性がある。</p>

<p>本節のIdPに対する要件は、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#GenIdP">第4節で</a>議論する汎用IdPと、<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#wallet">第5節で</a>議論する加入者管理ウォレットの両方に適用される。</p>
<h2 id="roles" data-section="3">
  
  
    役割 <a href="#roles" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<h3 id="credential-service-provider-csp" data-section="3">
  
  
    クレデンシャル・サービス・プロバイダ（CSP） <a href="#credential-service-provider-csp" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>CSP はサブスクライバから属性を収集および検証し、サブスクライバ・アカウントに格納する。CSP はまた、1 つ以上の認証子をサブスクライバ・アカウントにバインドし、サブスクライバが認証子を検証可能なシステムに直接認証できるようにする。</p>
<h3 id="identity-provider-idp" data-section="3">
  
  
    アイデンティティ・プロバイダ（IdP） <a href="#identity-provider-idp" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>IdP は、（CSP によって確立された）加入者アカウントと、加入者がアクセスしている RP との間のブリッジを提供する。IdP は、複数の加入者アカウントのサービスとして、または単一の加入者が制御するコンポー ネントとして展開できる。</p>

<p>IdP は、認証子の検証（汎用 IdP の場合）または活性化因子の提示（サブスクライバが管理するウォ レットの場合）のいずれかによって、サブスクライバとの認証イベントを確立する。IdP は、認証イベントを表すアサーションを作成する。</p>

<p>IdP は、アサーション内または ID<a href="/800-63-4-2ndPD/sp800-63c/Federation/#s-identity-api">API（3.11.3 節</a>参照）を通じてサブスクライバの ID 属性を利用可能にする。</p>

<p><em>システムによっては、オファー・パーティー（OP）とも呼ばれる。</em></p>
<h3 id="relying-party-rp" data-section="3">
  
  
    依拠当事者（RP） <a href="#relying-party-rp" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>RP は、IdP からのアサーションを処理し、加入者がアクセスしようとするサービスを提供する。直接認証モデルとは異なり、RP は、サブスクライバのアカウントに結び付けられた認証機 関にベリファイア機能を提供しない。</p>

<p><em>システムによっては、サービス・プロバイダー（SP）とも呼ばれる。</em></p>
<h2 id="functions" data-section="3">
  
  
    機能 <a href="#functions" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<h3 id="trust-agreement-management" data-section="3">
  
  
    信託契約管理 <a href="#trust-agreement-management" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>信託契約（<a href="/800-63-4-2ndPD/sp800-63c/Federation/#trust-agreement">第 3.4 項を</a>参照）は、<em>フェデレーション・オーソリティと</em>呼ばれる専用の当事者を通じて管 理することができる。フェデレーション・オーソリティは、信託契約内で異なる役割と機能を果たす当事者のオンボーディングと管理を容易にする。この管理により、契約内の他の当事者への推移的信頼が提供される。</p>

<p>たとえば、RP は、フェデレーション機関と信頼契約を締結し、そのフェデレーション機関が 承認した IdP はその目的に適していると判断することができる。この信頼は、RP が加入した時点でその IdP が信頼協定の対象であったか否かにかかわらず、成立する。フェデレーション機関は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#authorities">3.4.2 節で</a>説明するように、多国間信託契約で使用される。</p>
<h3 id="authorized-party" data-section="3">
  
  
    公認当事者 <a href="#authorized-party" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>トラスト契約における<em>認可された当事者とは</em>、サブスクライバ属性のリリースを含め、トラスト契約によってカバーされる特定のリリースの決定に責任を負う組織、個人、または実体である。信頼協定は、期待される認可当事者が誰であるか、また、要求が自動的に許可されるか、自動的に拒否されるか、または個人の実行時決定を必要とするパラメータを規定する。公衆向けシナリオの場合、認可される側はサブスクライバーであることが期待 される。企業向けシナリオでは、認可される当事者は機関であると想定される。</p>

<p>被認証者が IdP の運用者である場合、属性の公開に対する同意はすべての加入者に対して決定され、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-allowlist">第 4.6.1.1 節で</a>説明するように許可リストによって確立され、加入者による直接的な決定や関与なしに ID 属性の公開が可能になる。信頼協定は、代わりに、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-runtime-decision">第 4.6.1.3 節で</a>説明するように、RP に特定の属性を開示することに同意 するよう、サブスクライバなどの個人に実行時に求めることを規定することができる。信頼契約によって指定される場合、加入者以外の個人が認可された当事者として 行動することも可能である。例えば、プロビジョニング API の一部として、加入者に代わって属性情報を公開するよう促されるシス テムの管理者などである。</p>

<p>様々な認定当事者の例は、<a href="/800-63-4-2ndPD/sp800-63c/examples/#authorized-party-example">第10.10</a>項に記載されている。</p>
<h3 id="proxied" data-section="3">
  
  
    代理連盟 <a href="#proxied" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p><em>フェデレーションプロキシは</em>、フェデレーションプロトコルにおけるすべての通信において、IdPとRPの仲介役として機能する。プロキシは、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-1">図1に</a>示すように、上流側ではRPとして、下流側ではIdPとして機能する。プロキシを介して通信する場合、上流側の IdP と下流側の RP は、標準的なフェデレーションプロトコルを使用してプロキシと通信し、加入者は 2 つの別個のフェデレーショントランザクションに参加する。結果として、IdP と RP に適用されるすべての規範的要件は、それぞれの側のそれぞれの役割において、プロキシに適用さ<strong>れなけれ ばならない[SHALL]</strong>。さらに、プロキシが、下流の別のプロキシに対して上流の IdP として動作することが可能であり、そのように連鎖する。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-3" name="fig-1">図1.フェデレーション・プロキシ</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/proxy.png" alt="Diagram of a federation proxy accepting assertions from an upstream IdP and providing assertions to a downstream RP." title="Federation Proxy" latex-src="proxy.pdf" latex-fig="1" latex-place="h" /></p>

<p>プロキシの役割は、フェデレーションプロトコルに限定され、上流の IdP と下流の RP との間のトラストアグリーメントの確立や円滑化には関与しない。同じパーティが、フェデレーション トランザクションを促進するために、プロキシと同様にフェデレーションオーソ リティを運用することができるが、この機能は、信頼契約を管理する役割とは別である。フェデレーションシステムの他のメンバと同様に、プロキシは、上流および下流の各コンポーネントとの個別の信頼契約に関与することもできるし、多国間契約のように単一の信頼契約をすべてのパーティに適用することもできる。</p>

<p>プロキシからのアサーションの連携識別子（<a href="/800-63-4-2ndPD/sp800-63c/Federation/#federated-identifier">第 3.3 節を</a>参照）は、プロキシがアサーションの発行 者であることを<strong>示さなければならない（SHALL）</strong>。下流の RP は、他のどの IdP からのアサーションと同様に、プロキシが生成したアサーションを受 け取り、検証する。このアサーションは、プロキシが上流の IdP から受信したアサーションに基づく。上流の IdP からのアサーションの内容は、使用するプロキシの方法に応じて、いくつかの方法で処 理することができる：</p>

<ul>
  <li>プロキシは、上流の IdP からのアサーションからの情報を持たない、まったく新しいアサーションを 作成できる。このパターンは、サブスクライバが元々どのアップストリーム IdP から来たかを RP が知らないように、ダウンストリーム RP の目くらましに有用である。</li>
  <li>プロキシは、上流の IdP からのアサーションから、プロキシからのアサーションに属性をコ ピーできる。このパターンは、アサーション内の ID 属性をダウンストリーム RP に伝送するために有用である。</li>
  <li>プロキシは、プロキシからのアサーションに、アップストリーム IdP からのアサーション全体を含めることができる。このパターンにより、RP は、プロキシからのアサーションだけでなく、アップストリーム IdP からのアサーションも独立して検証することができる。</li>
</ul>

<p>プロキシされたフェデレーション・モデルは、いくつかの利点を提供できる。フェデレーションプロキシは、統合のための共通インタフェースを提供することで、 RP と IdP 間の技術的な統合を単純化することができる。さらに、プロキシが効果的に RP と IdP を互いに見えないようにする範囲において、加入者リ ストを互いに保護したい組織に、ある程度のビジネス上の機密性を提供できる。プロキシはまた、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#privacy-reqs">第3.9節で述べられて</a>いるプライバシーリスクのいくつかを 軽減することができるが、加入者情報の取り扱いに新たな当事者が関与するた め、その使用によって他のリスクも生じる。たとえば、攻撃者がプロキシを危殆化することができた場合、攻撃者は、加入者 の属性または活動にアクセスするためにIdPまたはRPを直接標的にする必要はない。さらに、プロキシは、当事者間のフェデレーショントランザクションを仲介し、加入者ア カウントを接続のどちらか一方にバインドするので、IdP および RP ができることを超えて、加入 者の追加的なプロファイリングを実行することができる。</p>

<p>盲検化技術、その使用法、限界についての詳細は、<a href="/800-63-4-2ndPD/sp800-63c/privacy/#blinding">7.5節を</a>参照のこと。</p>

<p>プロキシとダウンストリームRPとの間の接続のFALは、パス全体にわたっ て最も低いFALとみなされ、プロキシはダウンストリームRPにこれを正確に表<strong>示しなければならない[SHALL]</strong>。例えば、アップストリームのIdPとプロキシとの間の 接続がFAL1であり、プロキシとダウンストリームのRPとの間の接続 がFAL2の要件を満たしている場合、プロキシとダウンストリームの RPとの間の接続は依然としてFAL1とみなされる。同様に、アップストリーム IdP とプロキシとの間の接続が FAL2 であり、プロキシとダウンストリーム RP との間の接続が FAL1 のみである場合、プロキシを介した全体的な接続は FAL1 とみなされる。</p>
<h3 id="fulfilling-roles-and-functions-of-a-federation-model" data-section="3">
  
  
    フェデレーション・モデルの役割と機能を果たす <a href="#fulfilling-roles-and-functions-of-a-federation-model" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>フェデレーション・トランザクションのロールは、さまざまな方法で接続することができるが、本ガイドラインではいくつかの共通パターンを想定している。期待される信頼協定構造とコンポーネント間の接続は、どのパターンが使用されるかによって異なる。</p>

<p>異なる役割と機能は、互いに統合する別々の当事者が果たすことができる。例えば、CSP は、加入者アカウントの属性を、CSP と同じ当事者または機関によって運営されていない IdP に提供することができる。</p>

<p>単一の当事者が、所定のフェデレーション契約内で複数の役割を果たすことも可能である。たとえば、CSP が ID サービスの一環として IdP を提供する場合、CSP は加入者アカウ ント確立プロセスの一環として IdP で加入者アカウントをプロビジョニングできる。同様に、RP も IdP と同じセキュリ ティおよび管理ドメインにありながら、技術的、展開的、およびアカウント管理上の利点のためにフェデレーショ ン技術を使用して接続することができる。</p>

<p>フェデレーション・オーソリティやプロキシなど、フェデレーション・システム全体における他の機能についても同様である。フェデレーション・オーソリティは、当事者間のトラスト・アグリーメントの確立を促進し、プロキシは、上流のIdPに対してはRPとして、下流のRPに対してはIdPとして機能することにより、フェデレーション・プロトコルの接続を促進する。同じエンティティが、システムにおいて、フェデレーションオーソリティとプロキシの両方の機能を果たすことができ、信頼協定を確立する手段と、IdP と RP 間の技術的接続を確立する手段の両方を提供することができる。</p>
<h2 id="federated-identifier" data-section="3">
  
  
    統合識別子 <a href="#federated-identifier" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>サブスクライバは、そのサブスクライバに固有の連携識別子を使用して、連携トランザクションで識別 さ<strong>れなければならない（SHALL）</strong>。連携識別子は、サブスクライバのアカウントを表すサブジェクト識別子と、IdP を表す発行者 識別子の論理的な組み合わせである。サブジェクト識別子は IdP によって割り当てられ、発行者識別子は通常設定によって IdP に割り当てられる。</p>

<p>異なる IdP が独立して主体識別子を管理するため、異なる主体に対する主体識別子の選択で 衝突する可能性があるため、マルチパートの連携識別子パターンが必要である。従って、RP は、どの IdP がその主体識別子を発行したかを考慮せずに、主体識別子を処理しない ことが必須である。ほとんどのユースケースにおいて、連携識別子は、複数のセッションにわたってサブスク ライバに対して安定しており、使用される認証子とは独立しているため、RP は、複数の 認証セッションおよびアカウント変更にわたってサブスクライバを確実に識別できる。ただし、連携識別子とそれに関連する RP での使用は、エフェメラルであることも可能であり、プライバシーの強化を提供する。連携識別子とその構成部分は、ユーザー名や他の人間向けの識別子とは異なり、機械が読み取り可能で、サブスクライバーによって管理されたり、サブスクライバーに公開されたりしないことを意図している。</p>

<p>フェデレーション識別子は、ユーザー名、電子メールアドレス、従業員番号など、プレーンテキストの個人を特定できる情報（PII）を含まない<strong>ものとする</strong>。</p>
<h3 id="ppi" data-section="3">
  
  
    ペアワイズ偽名識別子（PPI） <a href="#ppi" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>状況によっては、共通のサブジェクト識別子を使用することで、加入者アカウントが複 数の RP で容易にリンクされないようにすることが望ましい。ペアワイズ仮名識別子（PPI）を使用することで、IdP は、単一の加入者ア カウントについて、複数の異なる連携識別子を異なる RP に提供することができる。PPI を使用することで、異なる RP が、連携識別子を使用して加入者を追跡するために結託することを防ぐことができる。</p>
<h4 id="general-requirements" data-section="3">
  
  
    一般要件 <a href="#general-requirements" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>IdP が RP に対して生成するアサーション内で対になる仮名識別子を使用する場合、IdP は<strong>、</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#ppi-gen">第 3.3.1.2 節に</a>記載する各 RP または<a href="/800-63-4-2ndPD/sp800-63c/Federation/#ppi-shared">第 3.3.1.3 節に</a>記載する RP の集合に対して、異なる連携識別子を生成<strong>しなければならない（SHALL）</strong>。</p>

<p>名前、物理的住所、電話番号、電子メールアドレスなど、一部の ID 属性は、フェデレーショントランザ クション外で加入者を特定するために使用できる。PPI がこの種の識別属性とともに使用される場合、複数の共謀する RP がシステム間の相関によって加入者を再識別することは可能である。例えば、2 つの独立した RP がそれぞれ異なる PPI で識別された同じ加入者を見た場合でも、RP は、それぞれのアサーションで PPI と共に提示された名前、電子メール・アドレス、物理的住所、またはその他の識別属性を比較することで、加入者が同一人物であると判断することができる。PPI が識別属性と共に使用される場合、プライバシーポリシーは、適用される法的要件及び規制要件 と矛盾しないように、加入者データの相関を防止するために確立さ<strong>れなければならない（SHALL）</strong>。</p>

<p>プロキシされたフェデレーションモデル(<a href="/800-63-4-2ndPD/sp800-63c/Federation/#proxied">3.2.3 節</a>参照)では、プロキシが、加入者がどの RP に アクセスしているかを IdP に知らせない可能性があるため、上流の IdP は下流の RP の PPI を生成 できない可能性があることに注意すること。このような状況では、通常、IdP とフェデレーションプロキシ間で PPI が確立される。IdP として動作するプロキシは、ダウンストリーム RP に PPI を提供できる。プロトコルによっては、フェデレーション・プロキシは、ID プロトコルを機能させるために、 PPI を上流の IdP からの関連識別子にマップバックする必要がある。このような場合、プロキシは、異なるRPでどのPPIが同じ加入者を表すか を追跡し、決定することができる。プロキシは、PPIと他の識別子との間のマッピングをサードパーティに<strong>開示しては ならない[SHALL NOT]</strong>。また、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#transmit-subscriber-info">第3.9.1節で</a>定義される加入者情報の送信で許可される目的 以外に、その情報を使用しては<strong>ならない[SHALL NOT</strong>]。</p>
<h4 id="ppi-gen" data-section="3">
  
  
    ペアワイズ偽名識別子の生成 <a href="#ppi-gen" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>PPI は、サブスクライバの識別情報(例えば、ユーザ名、電子メールアドレス、従業員番号など)を 含まない<strong>ものとする</strong>。PPI は、<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-131A">[SP800-131A]</a>に記載されているように、少なくとも 112 ビットのエントロピーを有し、加入者 に関する情報にアクセスできる当事者による推測が困難で<strong>なければならない（SHALL）</strong>。PPI は、ランダムに生成され、IdP によって加入者に割り当てられるか、または、不可逆的で推測不可能な方法（例えば、<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-131A">[SP800-131A]</a>で議論されているように、秘密鍵による鍵付きハッシュ関数を使用する）で導出が行われる場合、他の加入者情報から導出され得る。</p>

<p>信託契約により PPI が共有と指定されない限り、PPI は単一の RP にのみ開示さ<strong>れなければならない</strong>。</p>
<h4 id="ppi-shared" data-section="3">
  
  
    共有ペアワイズ仮名識別子 <a href="#ppi-shared" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>同じ共有PPIを特定のRPセットに使用<strong>しなければならない(SHALL)：</strong></p>

<ul>
  <li>信託契約では、特定のRPの共有PPIが規定されている；</li>
  <li>権限を付与された当事者は、共有PPIの使用に同意し、通知される；</li>
  <li>これらのRPは、セキュリティドメインの共有や法的所有権の共有など、相関の運用上の必 要性を正当化する実証可能な関係を有する。</li>
  <li>共有 PPI のセットに含まれるすべての RP は、このような方法で相関されることに同意する(すなわち、ある RP は、他の RP の PPI を、その他の RP の認識と同意なしに要求することはできない)。</li>
</ul>

<p>RP は<strong>、</strong>共有 PPI を要求することに関連するプライバシーリスクを検討するために、プライバシ ーリスク評価を実施<strong>しなければならない（SHALL）</strong>。プライバシーに関するさらなる考慮事項については、<a href="/800-63-4-2ndPD/sp800-63c/privacy/#notice">第 7.2 節を</a>参照のこと。</p>

<p><strong>さもなければ</strong>、不正な RP は、そのセットの一部を不正に装って RP のセットの共有 PPI を知ることができる。</p>

<p><a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">OIDC]</a>のセクタ識別子機能は、RP のグループに対して共有 PPI を計算するメカニズムを提供する。このプロトコルでは、RP の識別子はすべて、認可された保護されたチャネルを介して IdP が取得できる URL にリストされている。共有 PPI は、セクタ識別子 URL のコンテンツにリストされているすべての RP が同じ共有 PPI を受け取るように、アルゴリズムへの他の入力とともにセクタ識別子 URL を考慮に入れて計算される。</p>
<h2 id="trust-agreement" data-section="3">
  
  
    信託契約 <a href="#trust-agreement" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>すべてのフェデレーション・トランザクションは、該当する当事者間の一つ以上の信頼協定によって定義さ<strong>れなけれ ばならない（SHALL）</strong>。</p>

<p>信託契約は<strong>、</strong>RPとの間に信頼関係を確立<strong>しなければならない（SHALL）</strong>：</p>

<ul>
  <li>加入者アカウントのプロビジョニングおよび管理を担当する CSP、</li>
  <li>アサーションと属性を提供する責任を負う IdP、または</li>
  <li>CSP と IdP の両方。</li>
</ul>

<p>トラスト合意は、フェデレーション・トランザクションで交換される ID 属性の許可された xAL や意図された目的など、影響を及ぼす当事者間のフェデレーション・トランザクショ ンの条件を確立する。信頼協定は、フェデレーション・トランザクションのユーザビリティ要件および衡平性要件を確立<strong>しなければならない（SHALL）</strong>。信頼契約は、補償制御および例外処理プロセスを含め、CSP で使用される証明プロセスの詳細を開示<strong>しなければならない（SHALL）</strong>。</p>

<p>すべての信託契約は、契約が適用される加入者アカウントの特定の集団を定義<strong>しなければならな い（SHALL）</strong>。この集団を定義する正確な手段は、本文書の範囲外である。多くの場合、母集団は、CSP が管理し、IdP を通じて利用可能にするサブスクライバ・アカウントの全セットとして定義される。他のケースでは、母集団は、IdP を通じて利用可能なアカウントの区分されたサブセットである。RP が、加入者主導の信頼契約など、単一の加入者アカウントのために IdP と別個の信頼契約を確立することも可能である。</p>

<p>一つのフェデレーション・トランザクションの間、すべての関係者のポリシーと期待が曖昧でないことが重要である。したがって、所定のトランザクションで有効な信頼アグリーメントのセットは 1 つだけである<strong>べきである（SHOULD）</strong>。これは通常、トランザクショ ンに参加する CSP、IdP、および RP の固有の組み合わせによって決定される。しかし、これらのアグリーメントは、加入者の異なる集団が異なる信頼アグリーメントに支配されるなど、他の方法で異なる可能性がある。</p>

<p>当事者間に信頼協定が存在することは、当該協定における各当事者が他の当事者と有する他の協定の存在を排除するものではない。例えば、IdP は複数の RP と同時に独立した契約を締結することができ、RP も同様に複数の IdP と同時に独立した契約を締結することができる。IdP及びRPは、当該契約の対象外又は対象外の当事者に対して、信託契約の存在又は条件を開示する必要はない。</p>

<p>信託契約は、連携関係に関連して予想され、許容される IALs および AALs に関する条件を<strong>定めなければならない（SHALL）</strong>。</p>

<p>信頼協定は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#redress">第3.4.3節で</a>議論されるように、フェデレーション内の異なる参加者間で救済と問題を調整するために必要な仕組みと資料を定義<strong>しなければならない（SHALL）</strong>。</p>

<p>すべてのフェデレーション・トランザクションでは、役割とアプリケーションが単一のセキュリティ・ドメインまたは共有法的所有権内に存在する場合でも、信頼契約の確立が必要である。このような場合、信頼協定の確立は内部プロセスとすることができ、正式な合意を伴う必要はない。このような場合であっても、IdP は、要求に応じて、信頼合意を文書化し、加入者に開示することが要求される。</p>

<p>一般的に加入者は信託契約の条項に直接関与する当事者ではないにもかかわらず、加入者は信託契約の条項とその結果生じる連盟取引の影響を受ける。そのため、信託契約の条項は、明確で理解しやすい言葉で加入者が利用できるようにする必要がある。加入者がこれらの条件にアクセスできる手段、および加入者に通知する責任を負う当事者は、信託契約の確立手段および信託契約自体の条件によって異なる。さらに、加入者のユーザーエージェントは、フェデレーショントランザ クションの役割の 1 つで動作しない限り、通常、信頼契約の当事者ではない。</p>
<h3 id="bilateral" data-section="3">
  
  
    二国間信託契約 <a href="#bilateral" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>二者間トラスト契約では、トラスト契約の確立は連携当事者間で直接行われ、トラスト契約は別個 の当事者によって管理または促進されない。二者間トラスト合意は、サービスへの連携 ID アクセスを提供したい組織間でポイント・ツー・ ポイント接続を確立することを可能にする。二者間接続は、静的契約による大規模なエンタープライズ・アプリケーションや、未知の RP への加入者主導の動的接続など、さまざまな形態を取ることができる。いずれの場合も、CSP、IdP、および RP は、連携接続に関するポリシーを直接管理する。</p>

<p>二国間信託契約では、信託契約そのものを成立させるために必要な要件以上の追加要件は課されない。</p>

<div latex-literal="true" class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\クリアページ</code></pre></div></div>
<h3 id="authorities" data-section="3">
  
  
    多国間信託契約 <a href="#authorities" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>多国間トラスト契約では、連携当事者は、当事者間のトラスト契約の確立を支援するために、連携<em>機 関に</em>期待する。このモデルでは、フェデレーション機関は、CSP、IdP、および RP を信頼契約に含めることを促進する。</p>

<p>どのような役割であれ、当事者をオンボーディングする際、フェデレーション機関は、その当事者がトラスト 契約の原則に準拠していることを検証するために、その当事者について審査を実施する。審査のレベルは、フェデレーション内で採用されるユースケースとモデルに固有であり、詳細は本文書の範囲外である。この審査は<a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-2">図 2</a> に示されている。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-2" name="fig-2">図 2.連盟の権限</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/authority.png" alt="Diagram of a federation authority facilitating trust agreement terms for a variety of parties under the federation authority." title="Federation Authority" latex-src="authority.pdf" latex-fig="2" latex-place="h" /></p>

<p>信託契約は，すべての当事者を審査するために要求される実務を列挙し，審査プロセスを実行する責任を負う当事者または当事者を<strong>示さなければ</strong> <strong>ならない（SHALL）</strong>。</p>

<p>CSP、IdP、および RP の審査は、最低限、以下を確立<strong>しなければならない（SHALL）</strong>：</p>

<ul>
  <li>CSP は、<a href="/800-63-4-2ndPD/sp800-63a/introduction/#introduction" latex-href="#ref-SP800-63A">[SP800-63A]</a>に従って、加入者アカウントの身元証明を行っている。</li>
  <li>CSP は、該当する場合は<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-account-provisioning">第 4.1 節</a>または<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#scidp-provisioning">第 5.4 節の</a>要件に従い、安全な方法で加入者アカウントを IdP にオンボードする<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#scidp-provisioning">。</a></li>
  <li>IdP でのサブスクライバの認証またはサブスクライバが管理するウォレットのオンボーディングに使用される認証子 は、<a href="/800-63-4-2ndPD/sp800-63b/introduction/#introduction" latex-href="#ref-SP800-63B">[SP800-63B]</a>に従って使用される。</li>
  <li>IdP が生成するアサーションは、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#assertions">第 4.9 項</a>または<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#assertion-contents">第 5.8 項の</a>要件に従う。</li>
  <li>RP は、保持、集計、第三者への開示など、加入者の属性データの取り扱いに関する要件 を順守する。</li>
  <li>RP と IdP システムは、フェデレーション・プロトコルの承認されたプロファイルを使用する。</li>
</ul>

<p>フェデレーション機関は、信頼契約に基づく当事者が、信頼契約に基づく他の当事者のメンバーシップ を検証するためのプログラム手段を<strong>提供してもよい（MAY）</strong>。たとえば、フェデレーション機関は、システム内の RP に ID を提供するための IdP の検証された能力を提供する発見 API を提供することもできるし、登録ステップ中に RP が IdP に提示するための署名された証明書を提供することもできる。</p>

<p>連盟当局は<strong>、</strong>信託契約に開示されている条件で、会員が遵守しているかどうかを定期的に再評価<strong>しな ければならない</strong>。</p>

<p>加入者アカウントの不正行為が疑われる場合など、CSP 間で情報を共有する必要がある場合、フェデレーション当局はこの情報の転送に適用されるポリシーを定義できる。この方法で情報を共有することは、不正行為を軽減するために使用できる一方で、プライバシーの重大な懸念もある。フェデレーション機関は、ID 目的以外の当事者間のすべての情報共有をプライバシー・リスク評 価に<strong>含めなければならない（SHALL）</strong>。</p>

<p>フェデレーション機関は、他のフェデレーション機関が管理する他の多国間トラスト合意をトラスト合意 に組み込み、インターフェデレーション合意を<strong>作成してもよい（MAY）</strong>。例えば、IdP1 は FA1 との多国間契約に基づき審査されており、RP2 は FA2 との多国間契約に基づき審査されている。IdP1とRP2との接続を容易にするために、新たなフェデレーション機関FA3は、FA1からIdPを受け入れ、FA2からRPを受け入れる多国間合意を提供することができる。IdP1とRP2がFA3の権限を受け入れれば、このインターフェデレーション協定の下でフェデレーション接続を継続することができる。</p>
<h3 id="redress" data-section="3">
  
  
    救済要件 <a href="#redress" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>フェデレーション・トランザクションは、多くの場合、複数のエンティティによって管理されている複数の当事者間で発生し、フェデレーション・トランザクションの異なる段階は、加入者が異なる当事者に救済を求める必要がある異なる状況につながる可能性がある。</p>

<p>加入者の ID 属性の受信者として、RP は、連携システムに対する加入者の主な視界であり、 場合によっては加入者は、RP の使用に IdP が関与していることに気付かないことがある。したがって、RP は、RP に救済を要求するための明確かつアクセス可能な連絡方法を加入者に提供する義務がある。RP 加入者アカウント（アカウントに格納された属性を含む）、RP 機能、バインドされた認証機 能、RP 許可リスト、および RP の管理下にあるその他の項目に関係する問題については、 RP は、加入者に明確かつアクセス可能な救済手段を提供<strong>しなければならない（SHALL）</strong>。IdP または CSP が関与する問題については、RP は<strong>、</strong>適切な場合、IdP または CSP との救済プロ セスを開始する手段を加入者に提供<strong>しなければならない（SHALL）</strong>。</p>

<p>フェデレーション・トランザクションにおいて利用可能な属性値および派生属性値、IdP 機能、鍵保 持者認証子、IdP 許諾リスト、および IdP が管理するその他の項目を含む、フェデレーション・トランザクショ ンにおける加入者アカウントの利用に関わる事項について、IdP は、加入者に対して明確かつアクセス可能な救済手 段を提供<strong>しなければならない</strong>。特定の RP も関与する問題については、IdP は、RP との救済プロセスを開始する手段を加入者 に提供<strong>しなければならない（SHALL）</strong>。IdP が利用可能にしたサブスクライバのアカウントが関係する問題については、IdP は<strong>、</strong>サブスクライバに対し、CSP との間で救済プロセスを開始する手段を提供<strong>しなければならない（SHALL）</strong>。</p>

<p>サブスクライバ・アカウントの ID 属性および認証子を含む、サブスクライバ・アカウントに関わる問題 について、CSP は、明確かつアクセス可能な救済手段をサブスクライバに提供する<strong>ものとする</strong>。</p>

<p>救済の提供に関するより詳細な要件については、<a href="/800-63-4-2ndPD/sp800-63/dirm/#redress" latex-href="#ref-SP800-63">[SP800-63]のSec.3.6を</a>参照のこと。</p>
<h2 id="identifiers-keys" data-section="3">
  
  
    CSP、IdP、およびRPの識別子と暗号鍵管理 <a href="#identifiers-keys" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>信頼協定はフェデレーションの許可を確立するが、フェデレーション内の当事者の安全な接続を促進しない。 フェデレーション・プロトコル上で通信するために、CSP、IdP、および RP は、識別子を暗号鍵および関連するセキュリ ティ成果物に関連付ける能力を備え、安全な方法で互いを識別できる必要がある。 このようにして、RP は、アサーションが意図された IdP から発信されていること、または属性バンドルが意図された CSP から発信されていることを確認できる。同様に、IdP は、意図された RP にアサーションを送信していることを確認できる。</p>

<p>RPがIdPまたはCSPに対して暗号鍵と識別子を確立するプロセスを<em>発見と</em>呼ぶ。IdP が RP のために暗号鍵と識別子を確立するプロセスは、<em>登録として</em>知られている。発見と登録のプロセスはどちらも、フェデレーション・トランザクションが発生する前に発生することも、トランザクション自体の一部としてインラインで発生することもある。ディスカバリと登録の両プロセスは、当事者間で直接行われることもあれば、サードパーティのサービスを利用して促進されることもある。フェデレーション・プロトコルやプロセスによって、これらの暗号キーや識別子を確立するプロセスは異なりますが、最終的には、各パーティがプロトコル内で必要に応じて他者を適切に識別できるようになります。</p>

<p>ディスカバリおよび登録のプロセスは、トランザクションを管理するトラスト・アグリーメントに 定義されるとおり、安全な方法で確立さ<strong>れなければならない（SHALL）</strong>。暗号鍵情報の転送を必要とするプロトコルは<strong>、</strong>共有秘密鍵または公開鍵を含め、フェデレーション関 係の運用に必要な暗号鍵情報を交換するために、認証された保護されたチャネルを使用<strong>しなければ ならない（SHALL）</strong>。この関係で使用される共通鍵は、フェデレーション参加者のペアに固有で<strong>なければならない</strong>。</p>

<p>CSP、IdP（サブスクライバが管理するウォレットを含む）、および RP は、信頼アグリーメント 内で異なる目的に対応するため、または異なる信頼アグリーメントに対応するために、複数の暗号 鍵および<strong>識別子を有してもよい（MAY）</strong>。たとえば、IdP は、すべての FAL1 および FAL2 トランザクションに 1 セットのアサーション署名鍵を使用できるが、FAL3 トランザクションには、より高いセキュリティ・コンテナに格納された、別個に管理される暗号鍵セットを使用できる。</p>

<p>ドメイン名、URI、または他の構造化された識別子を使用して当事者を識別する場合、 ワイルドカードを<strong>使用してはならない[SHALL NOT]</strong>。例えば、RPが「www.example.com」、「service.example.com」、 「gateway.example.com」に配置されている場合、これらの各識別子をRPに登録 する必要がある。ワイルドカード「*.example.com」は使用できない。同じRP識別子で「user.example.com」と「unknown.example.com」へのアクセスを意図せず許可してしまうからである。</p>
<h3 id="cryptographic-key-rotation" data-section="3">
  
  
    暗号鍵のローテーション <a href="#cryptographic-key-rotation" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>時間の経過とともに、CSP、IdP、または RP に関連付けられた暗号鍵を更新することが望ましいか、必要になることがある。暗号鍵と識別子の許容される更新プロセスは、信頼協定によって定義される<strong>ものとし</strong>、最初の暗号 鍵の確立と同様に、認証された保護されたチャネルを使用して実行される<strong>ものとする</strong>。</p>

<p>例えば、IdPがURLで識別される場合、IdPはそのURLの下の場所に現在の公開鍵セットを公開することができる。そしてRPは、必要に応じて既知の場所から公開鍵をフェッチし、公開鍵が利用可能になったときに更新された公開鍵を取得することができる。</p>
<h3 id="key-storage" data-section="3">
  
  
    暗号鍵の保管 <a href="#key-storage" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>CSP、IdP（サブスクライバが管理するウォレットを含む）、および RP は<strong>、</strong>署名、暗号化、およびそ の他のあらゆる暗号操作に使用されるすべてのプライベート鍵および共有鍵を、安全な方法で保管するも<strong>のとする。</strong>鍵の保管は、鍵が使用される FAL の適用される<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FIPS140">[FIPS140]</a>要件（適用される耐タンパー性要件を含む）に従う。</p>

<p>サブスクライバが管理するウォレットでFAL3に到達するような状況によっては、暗号鍵を エクスポート不可能な方法で保管する必要がある。非エクスポート型とみなされるためには、鍵保管は、別個のハードウェア、または組み込みプ ロセッサもしくは実行環境、例えば、セキュア・エレメント、Trusted Execution Environment (TEE)、Trusted Platform Module (TPM)のいずれかで<strong>なければならない（SHALL）</strong>。これらのハードウェアモジュールまたは組み込みプロセッサは、ラップトップやモバイルデバイスの CPU のようなホストプロセッサとは別個のものである。エクスポート不可能な鍵ストレージは、ホスト・プロセッサへの秘密鍵のエクスポートを 禁止するように設計さ<strong>れなければならず(SHALL)</strong>、また、ホスト・プロセッサが 秘密鍵を抽出できるように再プログラム可能で<strong>あってはならない(SHALL NOT</strong>)。</p>
<h3 id="attestations" data-section="3">
  
  
    ソフトウェア認証 <a href="#attestations" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>ソフトウェアおよびデバイスの認証は、特に動的で分散したシステムにおいて、 暗号鍵および識別子の確立を補強するために使用できる。この用法における証明とは、特定のソフトウェア、デバイス、またはランタイム・システムが、 合意された一連のパラメータを満たしているという、暗号的に拘束されたステートメントである。この認証は、ソフトウェアがそのIDを確立するコンテキストで提示され、受 信者が他の場合よりも高い確実性で要求を検証することを可能にする。</p>

<p>たとえば、サブスクライバが管理するウォレットソフトウェアの特定のディストリビューションは、 そのディストリビュータによって署名され、RP がそのソフトウェアの個々のインスタンスを認 識できるようにすることができる。あるいは、RP はフェデレーション権威から証明書を発行され、IdP が RP をフェデレーショ ンの一部として認識できるようにすることもできる。</p>

<p>認証が信頼協定によって要求されるか、またはフェデレーション・プロトコルの一部として要求される場合、受信した認証は受信者によって検証さ<strong>れなければならない（SHALL）</strong>。</p>

<p><em>ソフトウェアステートメントの</em>詳細については、<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-RFC7591">[RFC7591]</a>セクション2.3を参照してください。これは、OAuthとOpenID ConnectのRPが、クライアントの動的登録時にソフトウェア属性の署名されたセットを通信するための手段です。</p>
<h2 id="authentication-and-attribute-disclosure" data-section="3">
  
  
    認証と属性開示 <a href="#authentication-and-attribute-disclosure" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>IdP と RP が信頼契約を締結し、登録が完了すると、フェデレーション・プロトコルを使用して、IdP から RP に加入者属性を渡すことができる。</p>

<p>加入者の属性は、フェデレーショントランザクションのため、または<a href="/800-63-4-2ndPD/sp800-63c/Federation/#privacy-reqs">第 3.9 節で</a>議論される危殆化した加入者アカウントの識別のようなサポート機能のためにのみ、IdP と RP の間で伝送さ<strong>れなければならない（SHALL）</strong>。加入者の属性は、当事者が許可リストに掲載されている場合であっても、他の目的で<strong>伝送してはなら ない（SHALL NOT）</strong>。</p>

<p>加入者の属性は、RPが信託契約に規定された目的以外に<strong>使用してはならない（SHALL NOT</strong>）。加入者の属性は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#store-subscriber-info">第 3.10.3 節に従って</a>保存および管理さ<strong>れなければならない（SHALL）</strong>。</p>

<p>加入者は、RPへの属性の送信について通知を<strong>受けなければならない（SHALL）</strong>。認可された当事者が組織である場合、組織は、認可された RP のリストと、それらの RP に送信された属性の関連セットをサブスクライバが利用できるように<strong>しなければならない[SHALL]</strong>。認可された当事者が加入者である場合、加入者は、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-runtime-decision">4.6.1.3 節に</a>記述されるように、IdP における実行時決定を使用して、属性のリリース前にプロンプトさ<strong>れなければならない（SHALL）</strong>。</p>
<h2 id="rp-account" data-section="3">
  
  
    RP加入者アカウント <a href="#rp-account" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>RPは、RP<em>サブスクライバアカウントと</em>呼ばれる、RP自身にローカルなサブスクライバを表す 記録を保持するのが一般的である。RP 加入者アカウントには、RP でのアクセス権や加入者の ID 属性のキャッシュなどを含めることができる。アクティブな RP 加入者アカウントは、RP の信頼できる IdP からの 1 つまたは複数の連携 ID にバインドされる。フェデレーション・プロトコルを介したこれらの連携識別子の 1 つ の認証に成功すると、サブスクライバは RP サブスクライバ・アカウントによって保護される情報と機 能にアクセスできるようになる。</p>

<p>RP 加入者アカウントは、RP が加入者に関する一連の属性を、RP の加入者アカウントを表すデー タレコードに関連付けたときに<em>プロビジョニングさ</em>れる。RP 加入者アカウントは、少なくとも1つの連携識別子にバインドさ<strong>れなければならず（SHALL）</strong>、 所与の連携識別子は、所与の RP において1つの RP 加入者アカウントにのみバインドされる。プロビジョニングは、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#provisioning">第 4.6.3 節で</a>説明する展開パターンに応じて、認証の前に行われることも、 連携認証プロセスの結果として行われることもある。プロビジョニングされる前は、RP加入者アカウントは存在せず、RPに関連するデータレコードもない。</p>

<p>RP サブスクライバ・アカウントは、RP が RP のアカウントへのすべてのアクセスを削除したときに<em>終了</em>する。終了には、RP 加入者アカウントからのすべての連携識別子およびバインドされた認証子 の削除（今後の連携トランザクションを防止するため）、ならびに<a href="/800-63-4-2ndPD/sp800-63c/Federation/#store-subscriber-info">第 3.10.3 節に従って</a>アカウントに 関連する属性および情報の削除を<strong>含めなければならない（SHALL）</strong>。RP は、RP 加入者アカウントの現在の有効性に関係なく、さまざまな理由で IdP から独立して RP 加入者アカウントを<strong>終了してもよい（MAY）</strong>。</p>

<p>RP加入者アカウントは、認証セッションなしでRPにプロビジョニングできるが、認証 セッションはプロビジョニングされたアカウントにのみ作成できる。詳細については<a href="/800-63-4-2ndPD/sp800-63c/Federation/#rp-session">、セクション3.8を</a>参照のこと。</p>
<h3 id="account-linking" data-section="3">
  
  
    アカウント・リンク <a href="#account-linking" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>単一の RP 加入者アカウントは、複数の連携<strong>識別子に関連付けてもよい（MAY）</strong>。この慣行は、<em>アカウントリンクと</em>呼ばれることもある。RP がこの方法で加入者に複数のアカウントを管理させる場合、RP は、すべての管理およびリン ク機能のために、加入者アカウントとの認証セッションを必要と<strong>しなければならない（SHALL）</strong>。この認証セッションは、新しい連携識別子をRP加入者アカウントにリンクする前に、 既存の連携識別子を1つ要求<strong>すべきである（SHOULD）</strong>。RP は、現在アクセス手段のない RP 加入者アカウントの回復手段を<strong>提供してもよい（MAY）</strong>。</p>

<p>RP 加入者アカウントから連携識別子が削除された場合、RP は、削除された連携識別子から RP 加入者アカウントへのアクセスを禁止<strong>しなければならない（SHALL）</strong>。</p>

<p>RP は<strong>、</strong>RP 加入者アカウントが、関連する連携識別子がゼロであり、アクセス手段がなく、回復手 段がない状態になったときに実施する実務と方針を文書化<strong>しなければならない（SHALL）</strong>。そのような場合、RP加入者アカウントは終了させ、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#store-subscriber-info">第 3.10.3 節に従って</a>アカウントに関連する情 報を削除<strong>すべきである（SHOULD）</strong>。</p>

<p>RP は<strong>、</strong>以下の場合に加入者に通知<strong>しなければならない</strong>：</p>

<ul>
  <li>既存のRP加入者アカウントに新しい連携識別子が追加される。</li>
  <li>RP 加入者アカウントから連携識別子が削除されたが、アカウントは終了していない。</li>
</ul>

<p>アカウント管理イベントに関するサブスクライバーへの通知に関する追加の考慮事項については、<a href="/800-63-4-2ndPD/sp800-63b/events/#notification" latex-href="#ref-SP800-63B">[SP800-63B]のセクション4.6を</a>参照のこと。</p>

<p>RPは、RPにアクセスするためにどの連携アカウントを使用するかによって、同じア カウントに異なるアクセス<strong>権を関連付けてもよい（MAY）</strong>。RPが認可とアクセスを決定する手段は、本ガイドラインの範囲外である。</p>
<h3 id="account-resolution" data-section="3">
  
  
    口座解決 <a href="#account-resolution" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>RPが加入者セットに関する既存の情報にアクセスでき、この情報が連携識別子と関連付け られていない場合、RPは<em>アカウント解決と</em>呼ばれるプロセスを実行し、新しいRP加入者 アカウントにどの加入者情報を関連付けるかを決定する。</p>

<p>アカウント解決を行う RP は<strong>、</strong>連携識別子を RP 加入者アカウントと連携させ、アクセスを許可する 前に、IdP から要求された属性が、RP のシステム内で加入者を一意に解決するのに十分であるこ とを確認<strong>しなければならない（SHALL）</strong>。RP による各属性の使用目的は、その属性がこの方法でアカウント解決に使用されるかどうか を含め、信頼契約に詳述される。</p>

<p>アカウント解決を実行する RP は、解決プロセスが RP 加入者アカウントの情報を加入者のものではない連携 識別子に関連付けないことを保証するために、リスク評価を実行<strong>しなければならない（SHALL）</strong>。</p>

<p>同様のアカウント解決プロセスは、RP が、Holder-of-Key アサーションで使用される認証子を初めて検証する場合にも使用される。この場合、RP は、認証子とともに伝送される属性がサブスクライバを一意に解決することを保証<strong>しなけれ ばならない（SHALL）</strong>。</p>
<h3 id="alternative-authentication-processes" data-section="3">
  
  
    代替認証プロセス <a href="#alternative-authentication-processes" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>RPは、サブスクライバがRPサブスクライバアカウントの認証子を追加および削除できるようにす ることで、サブスクライバが直接認証プロセスを使用してRPサブスクライバアカウントにアク セス<strong>できるようにしてもよい[MAY]</strong>。RPは、すべての代替認証子の管理について、<a href="/800-63-4-2ndPD/sp800-63b/introduction/#introduction" latex-href="#ref-SP800-63B">[SP800-63B]</a>の要件に従う<strong>ものとする</strong>。</p>

<p>RPは<a href="/800-63-4-2ndPD/sp800-63/introduction/#introduction" latex-href="#ref-SP800-63">[SP800-63]</a>で議論されている直接認証モデルを使用しているため、フェデレーション トランザクションは存在せず、したがってFALも割り当てられない。</p>

<div latex-literal="true" class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\クリアページ</code></pre></div></div>

<p>RPがこの種のアクセスを許可する場合、RPは信託契約の中で開示<strong>しなければならない（SHALL）</strong>：</p>

<ul>
  <li>RP 加入者アカウントの代替認証子を追加および削除するプロセス</li>
  <li>サブスクライバが RP にアクセスするために使用できる認証子に関する制限。</li>
  <li>フェデレーション・トランザクションなしで加入者アカウントにアクセスするために必要な AAL</li>
  <li>最後の連携トランザクションからの期間など、RP が加入者に IdP との認証を要求する状況。</li>
</ul>

<p>認証子管理イベントに関するサブスクライバへの通知に関する追加の考慮事項については、<a href="/800-63-4-2ndPD/sp800-63b/events/#notification" latex-href="#ref-SP800-63B">[SP800-63B]のセクション4.6を</a>参照のこと。</p>

<p>バインドされた認証子が、RPへの直接アクセスの代替認証子として使用されることは可能で あるが、これらの用途は互いに異なるため、RPは、ある認証子の使用が、一方または両方の シナリオで使用可能であることを判断する必要がある。</p>
<h2 id="rp-session" data-section="3">
  
  
    RPでの認証セッション <a href="#rp-session" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>フェデレーション・トランザクションの最終目標は、IdP からの検証済みアサーションに支えられた、サブスクライバと RP との間の認証済みセッションを作成することである。この認証セッションは、サブスクライバが RP の機能にアクセスすること（すなわち、ログイン）、サブスクライバを RP に識別すること、またはフェデレーション・トランザクションで搬送されたサブスクライバに関する属性を処理することを可能にするために使用できる。 認証セッションは、以下の条件が真である場合にのみ、RP によって生成さ<strong>れなければならない（SHALL）</strong>：</p>

<ul>
  <li>RP は有効なアサーションを処理し、検証した。</li>
  <li>アサーションは、トランザクションに期待される IdP からのものである。</li>
  <li>アサーションを発行した IdP は、アサーションの連携識別子で識別される IdP である。</li>
  <li>アサーションは、RP サブスクライバのアカウントに関連付けられている（エフェメラルである可能性がある）。</li>
  <li>RP 加入者口座は、信託契約に明記された方法によって RP に提供されている。</li>
</ul>

<p>アサーションが FAL3 での鍵所有者アサーションである場合、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#idp-managed-bound-authn">第 3.14 節で</a>説明するように、RP 加入者アカウントが認証セッションに関連付けられる前に、アサーションで示される認証子が検証さ<strong>れなければならない（SHALL）</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#idp-managed-bound-authn">。</a> アサーションが FAL3 でのバインド認証子による認証も必要とする場合、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#bound-authn">第 3.15 節で</a>説明するように、RP 加入者アカウントが 認証セッションに関連付けられる前に、バインド認証子が検証さ<strong>れなければならない（SHALL）</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#idp-managed-bound-authn">。</a></p>

<p>認証セッションはRPによっていつでも<strong>終了してもよい[MAY</strong>]。</p>

<p>IdPとRPの両方に対するセッション管理要件の詳細については、<a href="/800-63-4-2ndPD/sp800-63b/session/#sec7" latex-href="#ref-SP800-63B">[SP800-63B]Sec.5を</a>参照のこと。汎用の IdP における追加のセッション要件については、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#federation-session">4.7 節を</a>参照のこと。</p>
<h2 id="privacy-reqs" data-section="3">
  
  
    プライバシー要件 <a href="#privacy-reqs" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>加入者の最終目標は、RP と対話し、RP を使用することである。フェデレーションは、トランザクションに関与しない第三者（IdP）からの個人属性の移転を伴う。フェデレーションはまた、IdP に加入者の活動および状態を広く可視化する可能性がある。したがって、フェデレーションには、直接認証にはない特定のプライバシー要件がある。</p>

<p>RP が IdP にフェデレーション・トランザクションを要求すると、この要求とその後のフェデレーショ ン・トランザクションの処理によって、加入者がどこにログインしているかが IdP に明らかになる。時間の経過とともに、IdP は、所定の加入者がどの RP を使用しているかというこの知識に基づいて、加入者トランザク ションのプロファイルを構築することができる。この集約により、加入者のプライバシー上の関心に沿わない加入者追跡およびプロファイル情報の使用の新たな機会が可能になる可能性がある。</p>

<p>同じサブスクライバ・アカウントが複数の RP にアサートされ、それらの RP が相互に通信する場合、共謀する RP は、複数のアプリケーションおよびセキュリティ・ドメインにわたってサブスクライバのアクティビティを追跡できる。IdP は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#ppi">第 3.3.1 節に</a>記載される対の仮名識別子またはプライバシーを強化する暗号プロトコルの 使用などの技術的手段を採用して、RP 間の関連付けを解除し、加入者活動の追跡およびプロファイリングを阻止<strong>す べきである（SHOULD）</strong>。</p>

<p>以下の要件は、IdP、RP、またはその両方として行動する連邦機関に特に適用される：</p>

<ol>
  <li>
    <p>当該機関は、SAOP（Senior Agency Official for Privacy）と協議して、プライバシー法の要件が、IdP として活動する機関、RP として活動する機関、またはその両方によって引き起こされるかを決定する分析を実施<strong>しなければならない</strong>（<a href="/800-63-4-2ndPD/sp800-63c/privacy/#agency-privacy">第 7.4 項</a>参照）。</p>
  </li>
  <li>
    <p>当該機関は、該当する場合、記録システム通知（SORN）を発行するか、またはその対象範囲を特定<strong>しな ければならない（SHALL）</strong>。</p>
  </li>
  <li>
    <p>機関は、その SAOP と協議して、電子政府法の要件が、IdP として行動している機関、RP として行動している機関、 またはその両方によって引き起こされるかを決定する分析を実施<strong>しなければならない（SHALL）</strong>。</p>
  </li>
  <li>
    <p>当該機関は、該当する場合、プライバシー影響評価（PIA）の対象範囲を公表または特定<strong>しなけれ ばならない（SHALL）</strong>。</p>
  </li>
  <li>
    <p>機関は<strong>、</strong>IdP と RP 間の加入者 ID 情報の共有に関して、プライバシーリスク評価を実施<strong>しなけれ ばならない（SHALL）</strong>。</p>
  </li>
</ol>

<p><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#provisioning">第 4.6.3 節で</a>説明するように、RP 加入者アカウントのライフサイクルプロセスがプロビジョ ニング API を通じて RP に属性へのアクセスを与える場合、RP 加入者アカウントのライフ サイクルの違いを考慮した追加のプライバシー対策を実装<strong>しなければならない（SHALL）</strong>。IdP は<strong>、</strong>プロビジョニング API を通じて RP が利用できる属性を最小化<strong>しなければならない（SHALL）</strong>。IdP は、プロビジョニング API を通じて利用可能な加入者アカウントの母集団を、信頼契約 によって RP を使用することを許可された加入者の母集団に制限<strong>しなければならない（SHALL）</strong>。IdP で終了したアカウントの ID 属性を RP が保持しないように、IdP はプロビジョニング API を使用して、終了した加入者アカウントの RP 加入者アカウントのプロビジョニングを解除<strong>しなければならない（SHALL）</strong>。</p>

<p>トラストアグリーメントは、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-runtime-decision">第 4.6.1.3 節で</a>説明する実行時決定を使用して、サブスクライバがオ プトインした場合にのみ ID 属性を共有することを要求<strong>すべきである（SHOULD）</strong> <a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-runtime-decision">。</a></p>
<h3 id="transmit-subscriber-info" data-section="3">
  
  
    加入者情報の送信 <a href="#transmit-subscriber-info" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>IdP は、加入者情報の送信を、システムの機能に必要なもののみに制限<strong>しなければならない（SHALL）</strong>。 これらの機能には、以下が含まれる：</p>

<ul>
  <li>ID 証明、認証、または属性アサーション（総称して「ID サービス」）。</li>
  <li>特定の加入者が情報の送信を要求した場合</li>
</ul>

<p>IdP は、信託契約により規定され開示されている場合、以下の場合にも加入者情報を<strong>送信しても よい（MAY）</strong>：</p>

<ul>
  <li>ID サービスに関連する詐欺行為の軽減、</li>
  <li>ID サービスに関連するセキュリティ・インシデントに対応するため。</li>
  <li>法律または法的手続きに従うため。</li>
</ul>

<p>IdP が、RP での加入者の活動に関する情報をいかなる当事者にも開示する場合、またはこれらの 場合以外の目的で加入者の属性を処理する場合、IdP は、追加的な処理から生じるプライバシーリスクに見 合った予測可能性と管理可能性を維持するための手段を実施<strong>しなければならない（SHALL）</strong>。対策には、明確な通知の提供、加入者の同意の取得、または属性の選択的な使用または開示の可 能<strong>化を含めてもよい</strong>。IdP がこの目的のために同意手段を使用する場合、IdP は追加処理に対する同意を ID サービスの<strong>条件にしてはならない（SHALL NOT）</strong>。</p>

<p>RP は、信頼契約により規定され開示されている場合、以下の場合には、関連する IdP に加入者の活動に関する情報を<strong>開示してもよい（MAY）</strong>：</p>

<ul>
  <li>ID サービスに関連する詐欺行為の軽減、</li>
  <li>ID サービスに関連するセキュリティ・インシデントに対応するため。</li>
  <li>法律または法的手続きに従うため。</li>
</ul>

<p>プライバシーエンジニアリングとリスクマネジメントに関する追加情報については、<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-NISTIR8062">[NISTIR8062</a>]を参照のこと。</p>
<h2 id="security-controls" data-section="3">
  
  
    セキュリティ・コントロール <a href="#security-controls" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>IdP 及び RP は，本ガイドラインが保護に使用される情報システム，アプリケーション及びオンラインサ ービスに対して，組織が決定した<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-53">[SP800-53]</a>又は同等の連邦（例えば，<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FEDRAMP">[FEDRAMP]</a>）又は業界標準に定 義された中程度の基本セキュリティ管理から適切に調整されたセキュリティ管理を採用<strong>しなければならない</strong>。IdP と RP は、適切なシステム、または同等のシステムの最低保証関連管理が満たされていることを 保証<strong>しなければならない（SHALL）</strong>。</p>
<h3 id="injection-protection" data-section="3">
  
  
    インジェクション攻撃からの保護 <a href="#injection-protection" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>連携プロトコルのコンテキストにおける<em>インジェクション攻撃とは</em>、攻撃者が RP にアクセスするため、または正当なサブスクライバが RP にアクセスすることを拒否するために、RP にアサーションまたはアサーション参照を受諾または処理させようとするものである。攻撃者は、アサーションまたはアサーション参照を取得し、脆弱な RP に注入することで、これを実行する。攻撃者がこれに成功すると、攻撃者は RP を騙して、攻撃者のセッションをアサーション内の連携識別子にバインドさせることができる。攻撃者のアサーションは、正当なサブスクライバから盗まれるか、攻撃を実行するために製造される。</p>

<p>インジェクション攻撃からの保護は、すべての FAL で推奨され、この保護は FAL2 以上で必須である。すべての場合において、RP は、RP ソフトウェアの性質、使用されているフェデレーション・プ ロトコルの機能、およびシステム全体のニーズに基づき、攻撃者がインジェクションされたアサーション またはアサーション参照を提示することを防ぐための合理的な手段を講じる必要がある。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">OIDC]</a>も<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML">[SAML]</a>も、リクエスト中にRPから送信されるnonces、バックチャネル通信のための RP認証、RPがフェデレーション・トランザクションを開始し、プロセス全体を通してその状態を追跡する方法など、インジェクション保護のためのメカニズムを提供する。具体的な防御の詳細は、使用するフェデレーション・プロトコルや技術によって異なるが、以下のような一般的なベストプラクティスを使用することで、攻撃対象領域を限定することができる：</p>

<ul>
  <li><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#back-channel">第4.11.1節で</a>説明するように、バックチャネル・アサーション提示を使用することで、 攻撃者がアサーションを直接RPに提示することを防ぐ。</li>
  <li>推測不可能な値を使用することで、RPの認証されていないセッションとリクエスト をバックチャネルに結びつける。</li>
  <li>アサーション要求時に RP に IdP への認証を要求することで、攻撃者が RP からの要求を偽造してフェデレーショ ン・プロセスを開始することを防ぐ。</li>
  <li>IdP が開始するフェデレーション・プロセスの禁止。これは、RP が、IdP からの要請されていないアサーションおよびアサーション参照を受諾することを妨げる。この禁止には、外部パーティ（IdP またはフェデレーション・オーソリティなど）が RP に信号を送 信して IdP とのフェデレーション・プロセスを開始させ、RP がフェデレーション・トランザクショ ンを開始し、そのトランザクション内で安全に応答を待つプロセスは含まれない。</li>
  <li>署名でカバーされる RP 提供の nonce を伴う IdP からの署名付きフロント・チャネル・ レスポンスの使用により、攻撃者があるセッションから別のセッションにアサーション参照を インジェクションすることを防止する。</li>
  <li>HTTPリダイレクトとは対照的に、フロントチャネル・コミュニケーションにプラットフォームAPIを使用すること。</li>
</ul>

<p>インジェクション攻撃は、フィッシング攻撃と組み合わせると特に危険である。組み合わせると、攻撃者はサブスクライバを騙して、攻撃者が攻撃者のセッションに注入するための有効なアサーションを生成させることもできるし、攻撃者はサブスクライバを騙して、RP でサブスクライバのセッションに攻撃者のアサーションを注入させることもできる。</p>
<h3 id="protecting-information" data-section="3">
  
  
    加入者情報の保護 <a href="#protecting-information" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>IdP と RP 間の通信は、認証された保護されたチャネルを使用してトランジットで保護さ<strong>れなけれ ばならない（SHALL）</strong>。加入者と IdP または RP（通常はユーザエージェントを介する）との間の通信は、 認証された保護されたチャネルを使用して行わ<strong>れなければならない（SHALL）</strong>。</p>

<p>IdPは、デバイスID、位置情報、システム健全性チェック、構成管理など、RPがセキュ リティポリシーを実施する上で有用な情報にアクセスできる可能性があることに注意。その場合、<a href="/800-63-4-2ndPD/sp800-63c/privacy/#notice">第 7.2 節で</a>説明する加入者のプライバシープリファレンスの範囲内で、この情報を RP に渡すのがよいかもしれない。</p>

<p>ユーザに関する追加属性は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#s-identity-api">第 3.11.3 節で</a>説明するように、ID API への認可されたアクセ スを使用して、アサーション自体の外部に含める<strong>ことができる</strong>。このようにユーザ情報を分割することで、ユーザのプライバシを保護することができ、 認証アサーション自体の必須情報に加えて、識別属性の限定的な開示が可能になる。</p>

<p>派生属性値が利用可能で，RP のニーズを満たす場合，RP は，<a href="/800-63-4-2ndPD/sp800-63c/privacy/#minimization">7.3 節に</a>記述されているように，完全な属性値ではなく，派生属性値を要求<strong>すべきである（SHOULD）</strong>。IdP は，基礎となるフェデレーションプロトコルが許す範囲で，派生属性値をサポート<strong>すべきで ある</strong>。</p>
<h3 id="store-subscriber-info" data-section="3">
  
  
    加入者情報の保存 <a href="#store-subscriber-info" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>IdP および RP は、法的措置または方針により別段の要求がない限り、アカウントの終了時に加入者ア カウントおよび RP 加入者アカウント（それぞれ）の個人識別情報を削除<strong>しなければならない（SHALL）</strong>。 加入者アカウ ントまたは RP 加入者アカウントに個人識別情報が保管されている場合は常に、アカウントがアクティブ であるか否かにかかわらず、IdP および RP<strong>は</strong>、個人識別情報の安全な保管を確保するために適切な管理 方法を決定し、使用<strong>しなければならない（SHALL）</strong>。</p>

<p>たとえば、RP は連携識別子をアクセス・ログおよび監査ログに記録でき、このログはアカウントが 終了した後も保持される。ただし、すべての ID 属性と個人情報は RP 自身のストレージから削除される。</p>

<p><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#provisioning">セクション4.6.</a>3に記述されているように、RPがエフェメラルプロビジョニングメカニズムを 使用する場合、RPは、法的措置またはポリシーによって要求されない限り、セッション終了時に すべての加入者属性を削除<strong>しなければならない[SHALL]</strong>。</p>
<h2 id="identity-attributes" data-section="3">
  
  
    アイデンティティ属性 <a href="#identity-attributes" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>加入者を表すID属性は、フェデレーショントランザクション中にRPに送信される。これらの属性は複数の側面を持ち、さまざまな方法で組み合わせることができる。</p>

<dl>
  <dt>バンドル：</dt>
  <dd>属性は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#attribute-bundles">3.11.1 節に</a>記載されているように、<em>バンドルされて</em>いないか（IdP によって直接提示される）、または CSP によって暗号署名されるパッケージに<em>バンドルされて</em> <strong>いなければならない（SHALL）</strong>。</dd>
  <dt>由来：</dt>
  <dd>属性は、<em>属性値</em>(例えば生年月日)または<em>派生属性値</em>(例えば成人年齢の表示)のいずれかで<strong>なければならない(SHALL)</strong>。</dd>
  <dt>プレゼンテーション</dt>
  <dd>属性は、アサーションで提示さ<strong>れるか</strong>（したがってアサーションの署名でカバーされる）、保護された ID API の一部として利用可能にさ<strong>れなければならない（SHALL）</strong>。</dd>
</dl>

<p>トラストアグリーメントは、トラストアグリーメントのもとで利用可能となるすべての属性の検証方法を記録<strong>しなけれ ばならない（SHALL）</strong>（例えば、属性が権威あるまたは信頼できるソースからのものか、サブスクライバが自 己認証したものか、IdP が割り当てたものか、など）。</p>
<h3 id="attribute-bundles" data-section="3">
  
  
    属性バンドル <a href="#attribute-bundles" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<blockquote>
  <p>注：属性バンドルは、他のプロトコルや仕様ではしばしば<em>クレデンシャルと</em>呼ばれるが、この用語の使用は、このガイドライン内で異なる概念に対して使用することと矛盾する。そのため、このガイドラインでは代わりに属性バンドルという用語を使用する。</p>
</blockquote>

<p>IdP から属性を直接送信する代わりに、属性を CSP によって署名されたバンドルに集めることができる。これらの属性バンドルは、RP によって独立に検証することができる。このパターンは、加入者が管理するウォレットで一般的に使用される。属性をバンドルするために使用される技術の例としては、Selective Disclosure JSON Web Tokens<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SD-JWT">[SD-JWT]</a>や<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-ISOIEC18013">[ISOIEC18013-5]</a> で定義されている mDoc セキュリティ・オブジェクトがある。</p>

<p>属性バンドルの提示は、非バンドルの属性と同じ方法で IdP によって保護さ<strong>れなければならない（SHALL）</strong>。すなわち，アサーションで提示される属性バンドルは，アサーションの署名によってカバーされ，ID API によって利用可能にされる属性バンドルは，その API に対する限定的なアクセス制御によって保護される。</p>

<p>属性バンドルは、1 つ以上の属性値および派生属性値を含む。属性バンドルは、IdP からのアサーションで搬送される。バンドル内の加入者属性は、すべてのトランザクショ ンですべての RP に完全に開示される必要はなく、代わりに RP に選択的に開示<strong>されてもよい（MAY）</strong>。選択的開示技術を使用する属性バンドルは、RP が属性バンドルから読み取れる属性を効果的に制限できる。RP は、IdP が属性バンドルのすべてのコンテンツを RP に開示しなくても、属性バンドルの署名を全体として検証し、そのソースが CSP であることを確認できる。</p>

<p>RP は<strong>、</strong>属性バンドル自体の署名とアサーション全体の署名を検証<strong>しなければならない（SHALL）</strong>。RP は、属性バンドルの署名に使用される公開鍵が属性バンドルの署名に含まれることを検証するなど、 属性バンドルを含むアサーションを作成した IdP が属性バンドルを提示できることを保証<strong>しなけれ ばならない（SHALL）</strong>。</p>
<h3 id="derived-attribute-values" data-section="3">
  
  
    派生属性値 <a href="#derived-attribute-values" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>一部の使用例では、ID 属性の実際の値を知ることは RP が機能するために厳密には必要ではないが、代わりに ID 属性から導出される値で十分である。たとえば、RP が加入者が成人年齢を超えているかどうかを知る必要がある場合、 RP は加入者の生年月日を要求し、この値から成人年齢の質問を計算することができる。しかし、そうすることで、RPは本当に必要な情報よりも具体的な情報を知ることになる。その代わりに、IdP が加入者の年齢が RP の要求時に成年の定義を満たすかどうかを計算し、生年月日の値 そのものではなく、この導出のための単純なブール値を返すことができればよい。その場合、RPは、基礎となる値を見る必要なく処理を続行できる。</p>

<p>派生属性値は、RP に対してより焦点を絞った情報公開を可能にするため、システムのプライバシを高める。フェデレーション・システムの中には、リクエスト時に RP が任意の派生属性値を動的に照会できるものもあるが、多くの一般的なユースケースは、IdP が一般的な派生属性値を事前に計算し、完全な属性値の代替として提供することで対応できる。</p>
<h3 id="s-identity-api" data-section="3">
  
  
    アイデンティティAPI <a href="#s-identity-api" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>プロファイル情報を含むサブスクライバに関する属性は、<em>ID API</em> として知られる保護された API を介して RP に提供<strong>されてもよい（MAY）</strong>。RP は、アサーションと協調して、フェデレーション・トランザクション中に ID API への限定的なアクセスを付与される。たとえば、OpenID Connect では、UserInfo エンドポイントが、サブスクライバに関する属性をフェッチするための標準化された ID API を提供する。この API は OAuth 2.0 Access Token で保護され、OpenID Connect のアサーションである ID Token と共に RP に発行される。</p>

<p>ID API で属性を利用可能にすることで、IdP はアサーションを使用して多くの情報を RP に伝える必要がなくなる。これは、機密性の高い属性をアサーション自体に含める必要がないことを意味するだけでなく、 アサーションをより小さくし、RP による処理を容易にする。アサーションのコンテンツは、必須フィールド（一意のサブジェクト識別子など）と、アサー トされる即時認証イベントに関する情報に限定できる。</p>

<p>また、Identity APIを使用することで、RPはIdPから加入者属性がいつ送信されるかを 管理することができる。RP は、IdP から提供された属性を RP 加入者アカウントにキャッシュすることが多いが、これ については<a href="/800-63-4-2ndPD/sp800-63c/Federation/#rp-account">3.10.1 節で</a>説明する。RP は、アサーションのフェデレーション・トランザクションのたびにサブスクライバ属性を受 け取るのではなく、RP サブスクライバ・アカウントを更新するために必要なときだけサブスクライバ 属性を要求することができる。IdP は、RP が利用可能な加入者属性のいずれかが IdP で更新された時刻をアサーションで示す ことで、この決定を支援できる。このアプローチは、サブスクライバの属性が時間の経過とともに安定している場合に特に有用であり、RP が要求のたびに属性をフェッチしなくても機能するようにする。</p>

<p>どのプロビジョニング・モデルが API を通して利用可能であるかなど、ID API のすべての可能な使用は、信頼契約の一部として記録および開示さ<strong>れなければならない（SHALL）</strong>。ID API へのアクセスは<strong>、</strong>信頼契約によって時間制限さ<strong>れなければならない（SHALL）</strong>。ID API へのアクセスは、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#attribute-sync">第 4.6.4 節で</a>説明するように、フェデレーション・トランザクショ ンの期間と属性の同期に必要な時間に制限さ<strong>れるべきである（SHOULD）</strong>。時間制限は、アサーションの有効期限および RP での認証セッションの有効期限とは別であるため、関連する有効なアサーションがない RP による ID API へのアクセスは、RP での認証セッションの確立に十分で<strong>あってはならない（SHALL NOT）</strong>。</p>

<p>所定の ID API の配備は、IdP がアサーションを作成できるすべてのサブスクライバに属性を提供でき ることが期待される。ただし、フェデレーション・トランザクションのコンテキスト内で ID API へのアクセスが許可される場合、ID API によって提供される属性は、関連するアサーションで識別される単一のサブスクライバのみに<strong>関連付けられなければならない（SHALL）</strong>。ID API が IdP によってホストされている場合、返される属性にはサブスクライバのサブジェクト 識別子が含ま<strong>れなければならない（SHALL）</strong>。これにより、RP は、アサーションのサブジェクトを返された属性に正 しく関連付けることができる。<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#provisioning">4.6.3 節で</a>説明するように、ID API へのアクセスが RP 加入者アカウントの事前プロビジョ ニングの一部として提供される場合、RP は通常、フェデレーション・トランザクションのコ ンテキスト外で ID API への包括的なアクセスを付与され、これらの要件は適用され ないことに注意すること。事前プロビジョニングのユースケースの場合、プライバシーへの配慮は、信頼契約の一部として評 価および記録さ<strong>れなければならない（SHALL）</strong>。ID API が外部でホストされている場合は、<a href="3_federation#external-identity-api">第 3.11.3.1 節の</a>要件が適用される。</p>
<h4 id="external-identity-api" data-section="3">
  
  
    外部アイデンティティAPI <a href="#external-identity-api" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>フェデレーション・プロトコルで使用されるほとんどの ID API は IdP の一部としてホストされるが、IdP が属性プロバイダによって直接ホストされる ID API へのアクセスを許可することも可能である。これらのサービスは、IdP から直接利用できる属性に加えて、加入者に関する属性を提供する。</p>

<p>IdP が外部の属性プロバイダへのアクセスを許可する場合、IdP は、属性プロバイダから返される情 報が、関連するアサーションで識別される加入者に関連付けられることを明示的に表明している。信頼協定の目的上、IdP は、ID API の正確性と内容、および表明されたサブスクライバ・アカウント との関連付けについて責任を負う当事者である。</p>

<p>属性プロバイダから返される属性は、IdP から直接返される属性とは独立していると仮定され、そのため、異なる識別子、フォーマット、またはスキーマを<strong>使用してもよい（MAY）</strong>。</p>

<p>たとえば、IdP は、フェデレーション・プロセスの一部として、加入者の医師免許情報へのア クセスを提供することができる。IdP は、ライセンス・ステータスを直接アサートする代わりに、加入者を表すレコー ドを含む API へのリンクと、この API への限定的なアクセスを許可するクレデンシャルを提供す ることによって、医療ライセンス機関の加入者のレコードへのアクセスを RP に提供する。RP は、ライセンス・レコードが異なるサブジェクト識別子を使用する可能性が高 く、そうでなければ RP が関連付けることができないとしても、現在の加入者とライ センス・レコードとの間に強い関連付けを行うことができる。信頼契約は、IdPへの追加属性プロバイダとして医師免許機関をリストアップする。IdP は、このリンクされたデータを提供する責任を負う。</p>

<p>外部 ID プロバイダから属性を受け入れ、RP 加入者アカウントに関連付ける前に、RP は、当該属性 が信頼契約の後援の下で外部属性プロバイダから提供されることが許可されていることを検証<strong>しなけ ればならない（SHALL）</strong>。</p>
<h2 id="assertion-protection" data-section="3">
  
  
    アサーション保護 <a href="#assertion-protection" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>アサーションには、攻撃者が有効なアサーションを作成したり、異なる RP でキャプチャされたアサーションを再利用したりすることを防ぐために、一連の保護を<strong>含めなければならない（SHALL）</strong>。必要な保護は、検討されているユースケースの詳細に依存し、具体的な保護はここに記載されている。</p>
<h3 id="assertion-id" data-section="3">
  
  
    アサーション識別子 <a href="#assertion-id" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>アサーションは、ターゲット RP が一意に識別できるよう、十分に一意で<strong>なければならない（SHALL）</strong>。アサーションは、埋め込み nonce、発行タイムスタンプ、アサーション識別子、またはこれらもしくは他の技法の組 み合わせを使用することによって、これを<strong>達成してもよい（MAY）</strong>。</p>
<h3 id="signed-assertion" data-section="3">
  
  
    署名入りアサーション <a href="#signed-assertion" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>アサーションは、発行者（IdP）によって暗号署名さ<strong>れなければならない（SHALL）</strong>。RP は<strong>、</strong>発行者の鍵に基づき、かかるアサーションのデジタル署名または MAC を検証<strong>しなければならない</strong>。この署名は、識別子、発行者、対象者、件名、有効期限を含むアサーション全体をカバーする<strong>ものとす る</strong>。</p>

<p>アサーション署名は、非対称鍵を使用するデジタル署名または RP と発行者の間で共有される対称 鍵を使用する MAC のいずれかと<strong>しなければならない（SHALL）</strong>。IdP がこの目的で使用する共有対称鍵は、アサーションを送信する RP ごとに独立した<strong>ものとし なければならず（SHALL）</strong>、通常は RP の登録時に確立される。電子署名を検証するための公開鍵は、安全な方法で RP に転送<strong>しなければならず（SHALL）</strong>、RP は、IdP がホストする HTTPS URL などを通じて、実行時に安全な方法で<strong>取得してもよい（MAY）</strong>。承認された暗号を使用<strong>しなければならない（SHALL）</strong>。</p>
<h3 id="encrypted-assertion" data-section="3">
  
  
    暗号化されたアサーション <a href="#encrypted-assertion" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>アサーションのコンテンツは、ユーザ・エージェントなど、信頼できないサード・パー ティーへの公開を保護するために暗号化することができる。この保護は、アサーションにサブジェクト識別子などの不透明な識別子を除く、サブスクライバの PII が含まれる場合に特に関連する。サブジェクト識別子は、SSN、電子メール・アドレス、運転免許証番号など、他の可能性のある 識別子とは異なり、ターゲット・システムの外部では無意味である。したがって、サブジェクト識別子は、アサーションを暗号化するための修飾子として除外される。 信頼契約は、他の状況において、アサーション・コンテンツの暗号化を<strong>要求してもよい（MAY）</strong>。</p>

<p>アサーション全体が暗号化されると、暗号化によってアサーションのコンテンツが意図され ない当事者によって読み取られないように保護され、対象となる RP のみがアサーションを処理で きるようになる。 ほとんどのアサーション・フォーマットはアサーション全体の暗号化をサポートするが、一部の アサーション・フォーマットではアサーションの PII 部分のみを暗号化することができ、アサーション 全体を暗号化することなく RP に機密情報を選択的に開示することができる。</p>

<p>IdP は、アサーションを暗号化する場合、RP の公開鍵または共有対称鍵のいずれかを使用して、 アサーションの内容を暗号化<strong>しなければならない（SHALL）</strong>。IdP がこの目的で使用する共有共通鍵は、アサーションを送信する RP ごとに独立した<strong>ものとし なければならず（SHALL）</strong>、通常は RP の登録時に確立される。暗号化のための公開鍵は、認証された保護されたチャネルを介して転送さ<strong>れなければならず （SHALL）</strong>、RP がホストする HTTPS URL などを通じて、実行時に IdP が<strong>取得してもよい （MAY）</strong>。</p>

<p>例えば、SAML アサーションは XML-Encryption を使用して暗号化することが<strong>でき</strong>、OpenID Connect ID トークンは JSON Web Encryption（JWE）を使用して暗号化することができる。 バックチャネル・プレゼンテーションで使用される場合、IdP と RP の間に TLS チャネルを中断する仲介者が存在しない限り、アサーションは相互に認証された TLS 接続で暗号化することもできる。</p>
<h3 id="audience-restriction" data-section="3">
  
  
    観客数制限 <a href="#audience-restriction" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>アサーションは、発行されたアサーションの意図された対象であるかどうかを RP が認識できるように、対象者制限技法を使用<strong>しなければならない[SHALL]</strong>。すべての RP は、ある RP のために生成されたアサーションが別の RP に注入され再生されることを防ぐために、アサーションの聴衆に自 RP の識別子が含まれていることを確認<strong>しなければならない（SHALL）</strong>。</p>

<p>攻撃者によるアサーションの再生に成功する可能性を制限するために、IdP は、単一の対象者のみに指定 されたアサーションを発行<strong>すべきである（SHOULD）</strong>。単一の対象者への制限は、FAL2 以上で要求される。</p>
<h2 id="bearer" data-section="3">
  
  
    ベアラのアサーション <a href="#bearer" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>無記名アサーションは、それを提示する当事者の身元を証明するものとして、それ自体を提示することができる。アサーションの検証以外の証明は必要ない。同様に、ベアラ・アサーション参照は、それ自体を RP に提示し、RP がアサーションをフェッチするために使用することができる。攻撃者が、サブスクライバを表す有効なアサーションまたはアサーション参照を捕捉または 製造し、そのアサーションまたは参照を RP に提示することに成功した場合、攻撃者は、その RP でサブスクライバになりすますことができる。</p>

<p>ベアラ・アサーションまたは参照を単に所有するだけでは、サブスクライバになりすます には必ずしも十分ではないことに注意。例えば、アサーションがバックチャネル・フェデレーション・モデル（<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#back-channel">第 4.11.1 節で</a>説明）で提示される場合、不正行為から RP をさらに保護するために、トランザクションに追加の管理（RP の識別やアサーション・インジェクション保護など）を設けることができる。</p>

<div latex-literal="true" class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\クリアページ</code></pre></div></div>
<h2 id="idp-managed-bound-authn" data-section="3">
  
  
    キーの所有者のアサーション <a href="#idp-managed-bound-authn" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-3">図 3</a>のような鍵所有者アサーションには、サブスクライバが管理する証明書の公開鍵など、RP が独自に検証できる認証子の一意の識別子を<strong>含めなければならない（SHALL）</strong>。RP は、サブスクライバがアサーションで識別される認証子を所有していることを検証<strong>しなけれ ばならない（SHALL）</strong>。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-9" name="fig-3">図3.鍵の所有者のアサーション</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/IdP-Managed-Bound-Auth.png" alt="Diagram illustrating the use of holder-of-key assertions." title="Holder-of-Key Assertions" latex-src="IdP-Managed-Bound-Auth.pdf" latex-fig="3" latex-place="h" /></p>

<p>holder-of-key アサーションで識別される認証子は、サブスクライバが IdP に対する認証に使用するプライマリ 認証子とは別個のもので<strong>あってもよい</strong>。holder-of-key アサーションで識別される認証子は、フィッシング耐性で<strong>なければならない（SHALL）</strong>。RP は、Holder-of-key アサーション内の認証子に初めて遭遇した場合、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#account-resolution">第 3.7.2 節で</a>説明するように、 認証子を RP 加入者アカウントに一意に解決できるように<strong>しなければならない（SHALL）</strong>。</p>

<p>鍵保有者アサーションは、認証子として使用される暗号化されていない秘密鍵または対称鍵を<strong>含んでは ならない（SHALL NOT）</strong>。</p>

<p>RP が<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#provisioning">第 4.6.3 節に</a>記載されたエフェメラルプロビジョニングメカニズムを使用する場合、IdP は、 RP が情報を保存または関連付けることを防ぐために、RP への各認証要求に一意のペア識別子を使用<strong>すべきで ある（SHOULD）</strong>。</p>

<p>より完全な例は、<a href="/800-63-4-2ndPD/sp800-63c/examples/#fal3-smart-card">第 10.6 節に</a>ある。この例では、相互 TLS 接続を使用して、アサーションによっ てリストされるスマート・カード上の証明書の所有証明を提供している。</p>

<p>鍵の保持者アサーションで使用される認証子は複数のパーティに提示され、これらの認証子には ID 属性が含まれることが多いため、<a href="/800-63-4-2ndPD/sp800-63c/privacy/#privacy">第 7 節で</a>説明するように、プライバシーに関する追加の考慮事項がある。</p>
<h2 id="bound-authn" data-section="3">
  
  
    バウンド認証 <a href="#bound-authn" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-4">図 4</a>に示すように、バインドされた認証子は、RP 加入者アカウントにバインドされ、RP によって管理される認証子である。IdP は、アサーションが FAL3 でバインドされた認証子とともに使用される場合、アサーションにインジケータ を<strong>含めなければならない（SHALL）</strong>。認証子の一意識別子（公開鍵など）は、RP 加入者アカウントに格納<strong>しなければならない</strong>。RPは、バインドされた認証子の特性を評価する信頼できる根拠を持つ必要がある。そのよう な根拠の1つは、<a href="/800-63-4-2ndPD/sp800-63b/authenticators/#attestation" latex-href="#ref-SP800-63B">[SP800-63B]のセクション3.2.4で</a>説明されているように、署名された証明書を 含むことである。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-10" name="fig-4">図4.バウンド認証子</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/RP-Managed-Bound-Auth.png" alt="Diagram illustrating the use of bound authenticators managed at the RP." title="Bound Authenticators" latex-src="RP-Managed-Bound-Auth.pdf" latex-fig="4" latex-place="h" /></p>

<p>バインドされた認証子は、RPの加入者ごとに一意で<strong>なければならず</strong>、2人の加入者が別々のRP加入者ア カウントに同じ認証子を提示することはできない。すべてのバインド認証子は、フィッシング耐性が<strong>なければならない</strong>。その結果、パスワードのようなサブスクライバが選択した値を、バインド認証子として使用することはできない。 RP は<strong>、</strong>フェデレーション・トランザクションの FAL3 アサーションを処理する場合にのみ、バインド認証子からの認証を受 け<strong>入れなければならない（SHALL）</strong>。同じ認証子を RP への直接認証にも使用することは可能であるが、そのような使用はバインド 認証子とはみなされず、RP はこれらを別のユースケースとして文書化<strong>しなければならない（SHALL）</strong>。</p>

<p>RPがFAL3アサーションを正常に受け入れる前に、RP加入者アカウントには、FAL3トランザクショ ン中に検証されるバインドされた認証子への参照を<strong>含めなければならない[SHALL]</strong>。これらの認証子は、RPまたはサブスクライバのいずれかが提供することができ、RP サブスクライバアカウントへの認証子の最初のバインディングには、それぞれ若干異なる要件が適用される。</p>

<p>RP は<strong>、</strong>新たな認証者をバインドするトランザクションとは独立した機構（例えば、加入者に以前から関連付け られているアドレスへの電子メール）を介して加入者に通知を送信<strong>しなければならず（SHALL）</strong>、また、 以下のいずれかの事象が発生した場合、共有シグナリングシステム（<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#shared-signals">第 4.8 節を</a>参照）を使用して IdP に通知<strong>すべきである（SHOULD</strong>）：</p>

<ul>
  <li>新しいバインド認証機能が RP サブスクライバ・アカウントに追加される。</li>
  <li>既存のバインドされた認証子が RP サブスクライバのアカウントから削除される。</li>
</ul>

<p>認証子管理イベントに関するサブスクライバへの通知に関する追加の考慮事項については、<a href="/800-63-4-2ndPD/sp800-63b/events/#notification" latex-href="#ref-SP800-63B">[SP800-63B]のセクション4.6を</a>参照のこと。</p>
<h3 id="rp-managed-rp-provided-bound-authn" data-section="3">
  
  
    RP提供バウンド認証子発行 <a href="#rp-managed-rp-provided-bound-authn" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>RP が提供する認証子については、RP の管理者は<strong>、</strong>FAL3 フェデレーション・トランザクショ ンで使用する認証子をサブスクライバに直接発行<strong>しなければならない（SHALL）</strong>。RP の管理者は、バインドされた認証子の一意の識別子（認証子の公開鍵など）を、RP 加入者アカウントに保存<strong>しなければならない（SHALL）</strong>。</p>

<p>RP の管理者は、RP 加入者アカウントの識別されたサブジェクトが、認証子が発行された当事者で あることを、独立した手段で判断<strong>しなければならない（SHALL）</strong>。</p>

<p>たとえば、FAL3 認証で使用するために購入した暗号化認証子のコレクションを持つ RP があるとする。これらの認証子は、それぞれ特定の RP サブスクライバ・アカウントにプロビジョニングされるが、RP の管理者が管理環境に保管する。認証子を発行するために、RP は、RP の管理者が、IdP からの FAL3 フェデレーション・トランザクショ ンを使用して、加入者に RP が管理するキオスクで認証させる対面プロセスを使用できる。次に管理者は、加入者に RP 加入者アカウントが示すバインドされた認証子を渡し、それを使用してキオスクで認証させる。加入者は、RP から提供されたバインドされた認証子を所有することになり、この認証子は、 今後のトランザクションのために FAL3 に到達するために使用することができる。あるいは、RP の管理者は、加入者の認証済みアドレスに認証子を送信し、加入者にアクティベーショ ン・プロセスを通じて受信を確認させることもできる。バインドされた認証子の使用には、依然として IdP からの有効なアサーションが必要であるため、 認証子の傍受だけでは、RP 加入者アカウントへのアクセスには不十分である。</p>
<h3 id="rp-managed-subscriber-provided-bound-authn" data-section="3">
  
  
    サブスクライバが提供するバウンド認証子のバインディング・セレモニー <a href="#rp-managed-subscriber-provided-bound-authn" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>RPは、サブスクライバが提供する認証子を、Trust-on-First-UseベースでRPサブスクライバ アカウントに関連付けるプロセスを<strong>提供してもよい[MAY]</strong>。このプロセスは<em>バインディングセレモニーと</em>呼ばれ、一般的なFAL3フェデレーションプロセス以上の追加要件がある。これは、<a href="/800-63-4-2ndPD/sp800-63b/events/#bind-subscriber-authenticator" latex-href="#ref-SP800-63B">[SP800-63B]の第4.1.3節で</a>議論されている加入者提供認証子バインディングプロセスと同様である。</p>

<p>バインドされた認証子が RP 加入者アカウントに関連付けられていない場合、RP は<strong>、</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-5">図 5</a> に示すように、認証子、加入者、および RP 加入者アカウント間の接続を確立するために、バインドセレモニーを実行<strong>しなければならない（SHALL）</strong>。RP は<strong>、</strong>まず、アサーションがバインドされた認証機関と FAL3 での使用を意図していることを示すなど、FAL3 の他のすべての要件を満たすアサーションを使用して、フェデレーションを使用した認証セッションを確立<strong>しなければならない（SHALL）</strong>。サブスクライバは直ちに、提案された認証子を提示して認証するよう促さ<strong>れるものとす る。</strong>認証子の提示に成功すると、RP は、認証子の一意な識別子（公開鍵など）を保存し、これを連携 識別子に関連付けられた RP 加入者アカウントに<strong>関連付けなければならない（SHALL）</strong>。サブスクライバーが適切な認証子を使用してRPへの認証に失敗した場合、バインディン グセレモニーは失敗する。バインディングセレモニーセッションのタイムアウトは5分以内で<strong>なければならず[SHALL]</strong>、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#rp-session">セクション3.</a>8に記載されているように、他のいかなる目的でも認証セッションと して<strong>使用してはならない[SHALL NOT</strong>]。バインディングセレモニーが成功裏に完了すると、RP は<strong>、</strong>サブスクライバに新しくバインドされ た認証子について確認するよう促すなどして、直ちに FAL3 で IdP に新しいアサーションを要 求<strong>しなければならない[SHALL]</strong>。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-11" name="fig-5">図5.サブスクライバが提供するバウンド認証機能バインディングセレモニー</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/Binding-Ceremony.png" alt="Sequence diagram of the steps involved in the binding ceremony used for bound authenticators managed at the RP and provided by the subscriber." title="Subscriber-Provided Bound Authenticator Binding Ceremony" latex-src="Binding-Ceremony.pdf" latex-fig="5" latex-place="p" /></p>

<p>RPは、サブスクライバーが複数のサブスクライバー提供認証名をFAL3でバインドすることを許可<strong>し てもよい[MAY]</strong>。この場合、RPのサブスクライバーアカウントが1つ以上の既存のバインドされた 認証子を持っている場合、バインドセレモニーはFAL3に到達するための既存の能力を 利用する。加入者はまず、FAL3に到達するために、既存のバインド認証子でRPに認証するよう促され<strong>なければならない[SHALL]</strong>。認証に成功すると、RPは直ちに加入者に、新しくバインドされた認証子を使用して RPに認証するよう<strong>促さなければならない[SHALL]</strong>。</p>

<p>RPがバインド認証子がもはや実行不可能であると判断することに加えて、サブスクライバは、 認証子が紛失した、危殆化した、または技術やプラットフォームの変更により使用できなく なったなど、さまざまな理由でバインド認証子の使用を停止することを選択する可能性が ある。 このような場合、RPは、サブスクライバが提供したバインド認証子をRPサブスクライバア カウントから削除することをサブスクライバに<strong>許可してもよい[MAY]</strong>。バインド認証子が削除された場合、RPはサブスクライバの現在のFAL3セッションをすべて 終了し、IdPからサブスクライバのFAL3での再認証を要求<strong>しなければならない[SHALL]</strong>。RP は、サブスクライバに対して、削除される認証子で認証する<strong>よう促してはならない[SHALL NOT]</strong>。</p>

<p>このオプションは、加入者が、RP が FAL3 トランザクションでの使用を許可したい適切な認証子へのアクセ スをすでに持っている場合に特に有用である。 たとえば、加入者は、<a href="/800-63-4-2ndPD/sp800-63b/authenticators/#verifier-name-binding" latex-href="#ref-SP800-63B">[SP800-63B]の 3.2.5.2 節に</a>記載されているような、名前ベースのフィッシング耐性を使用する単要素暗号認証子を持つことができる。このようなデバイスでは、認証器が各ロケーションで使用されるとき、IdP と RP は異なる鍵を見ることになり、バインドされた認証器を IdP が容易に検証できないことを意味する。さらに、RP は認証子を発行していないため、RP は事前に認証子の鍵を知らないし、どの加入者ア カウントを鍵に関連付けるかも知らない。代わりに、RP は、ここで説明するようなバインディングセレモニーを使用して、加入者が FAL3 でこのデバイスをバインドされた認証子として使用できるようにすることができる。</p>
<h2 id="rp-requirements-for-processing-holder-of-key-assertions-and-bound-authenticators" data-section="3">
  
  
    鍵所有者アサーションおよびバウンド認証子の処理に関する RP 要件 <a href="#rp-requirements-for-processing-holder-of-key-assertions-and-bound-authenticators" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>RP がバインドされた認証子に関連付けられたアサーションを受信すると、サブスクライバは、バインドされた 認証子を所有していることを直接 RP に証明する。IdP での一次認証と RP での連携認証は、別々に処理される。サブスクライバは、IDP でのプライマリ認証と RP でのバインドされた認証子で同じ認証子を使 用できるが、これらが同じであるという前提はない。</p>

<p>以下の要件は、バインドされた認証子に関連するすべてのアサーションに適用される：</p>

<ol>
  <li>サブスクライバは、アサーション自体の提示に加えて、バインドされた認証子を所有していることを RP に証明<strong>しなければならない（SHALL）</strong>。</li>
  <li>鍵保有者アサーションについては、アサーション内で発見された所定の認証子への参照は、信頼協 定に規定されるとおり、アサーション内の他のすべての情報と同じレベルで信頼さ<strong>れなければならな い（SHALL）</strong>。</li>
  <li>RP は<strong>、</strong>バインドされた認証子に加えて、アサーションを処理し、検証<strong>しなければならない（SHALL）</strong>。</li>
  <li>バインドされた認証子での認証に失敗した<strong>場合</strong>、RPでエラーが発生する<strong>ものとする[SHALL]</strong>。</li>
</ol>

<h1 id="GenIdP" data-section="4">
  
  
    汎用IdP <a href="#GenIdP" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは規範的なものである。</em></p>

<p>IdPが加入者のデバイス上ではなくサービス上でホストされている場合、またはIdPが複数の加入者を代表している場合、IdPは<em>汎用IdPとして</em>知られ、以下の要件が適用される。</p>

<p>加入者デバイスではなくネットワークシステムに展開されるデジタルウォレットは、本ガイドラインの目的上、汎用 IdP とみなされる。</p>
<h2 id="idp-account-provisioning" data-section="4">
  
  
    IdPアカウントのプロビジョニング <a href="#idp-account-provisioning" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>加入者アカウントを IdP を通じて利用できるようにするには、加入者アカウントを IdP でプロビジョニングする必要がある。加入者アカウントが IdP にプロビジョニングされる手段は、信託契約において開示さ<strong>れるも のとする</strong>。</p>

<p>IdP がサブスクライバを認証できることが要件であるため、IdP は多くの場合、CSP のサービスであり、IdP はサブスクライバ・アカウントの属性および認証子へのある程度のアクセス権を持っている。このような IdP は一般に、サブスクライバ・アカウントを収容する IdAM と同じセキュリティ・ドメイン内にある。他の場合、加入者アカウントの 1 つ以上の認証子は、共通の PKI に結び付けられた認証子など、セキュリ ティ・ドメインの外部で検証することができる。</p>

<p>IdP は、サブジェクト識別子などのフェデレーション固有の属性でサブスクライバ・アカウントを補強する。IdP は、信頼契約によって列挙されたプライバシー要件および保存要件に従って、追加の属性を収集できる。</p>

<p>サブスクライバ・アカウントが IdP にプロビジョニングされると、CSP はフェデレーション・プロセスに積極的に参加しなくなる。 その結果、RP が CSP がホストする ID API を通じて属性をフェッチする場合でも、ID API は、本ガイドラインの目的上、CSP ではなく IdP の機能とみなされる。</p>

<div latex-literal="true" class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\クリアページ</code></pre></div></div>
<h2 id="federation-transaction" data-section="4">
  
  
    連盟取引 <a href="#federation-transaction" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>汎用の IdP を含むフェデレーション・トランザクションは、IdP で加入者アカウントを確立し、RP で加入者の認証セッションに至る。このプロセスを<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-6">図 6 に</a>示す。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-6" name="fig-6">図6.連盟の概要</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/federation.png" alt="Overview diagram of federated authentication systems showing parties involved and major steps in the process." title="Federation Overview" latex-src="federation.pdf" latex-fig="6" latex-place="h" /></p>

<p>フェデレーション・トランザクションは多段階のプロセスである：</p>

<ol>
  <li>
    <p>フェデレーションが発生する前に、CSP によってサブスクライバのアカウントが確立される。このアカウントは、CSP が収集した ID 属性を、サブスクライバが使用する認証子セットにバインドする。</p>
  </li>
  <li>
    <p>加入者アカウントは、IdP でプロビジョニングされる。IdP は、サブジェクト識別子などのフェデレーション固有の属性でサブスクライバ・アカウントを補強する。</p>
  </li>
  <li>
    <p>IdP と RP は、フェデレーション・プロトコルにおいて当事者間で情報を安全に交換するために必 要な暗号鍵と識別子を確立するために、発見と登録を実行する。(アプリオリな信頼合意による)接続許可を表す既存のポリシー決定があったかもしれないが、この段階は技術レベルでの接続と統合を伴う。この段階は、加入者が RP にアクセスしようとする前に、または加入者が RP で IdP を使用しようとしたときの応答として発生する可能性がある。</p>
  </li>
  <li>
    <p>IdP と RP は、加入者を RP に認証するために、連携認証トランザクションを開始する。この一環として、RP に渡される属性のセットは、RP が要求したもの、信頼協定で許可され ているもの、および被認証者が許可しているもののサブセットから選択される。必要であれば、認可された当事者は実行時に属性の解放を承認するよう促される。</p>
  </li>
  <li>
    <p>加入者は、加入者アカウントにバインドされた認証子を使用して、IdP に対して認証を行う。</p>
  </li>
  <li>
    <p>IdP は、認証イベントの結果を表すアサーションを作成する。アサーションは、信頼契約、RP からの要求、IdP の能力、IdP が知っている加入者ア カウント、および被認証者が許可する属性によって確立される条件に基づいている。</p>
  </li>
  <li>
    <p>アサーションはネットワークを介して RP に渡される。</p>
  </li>
  <li>
    <p>RP は IdP からのこのアサーションを処理し、サブスクライバとの認証セッションを確立する。オプションとして、RP は、アサーション内または ID API を通じて、サブスクライバ・アカウントを表す IdP から ID 属性を受け取る。</p>
  </li>
</ol>

<p>すべてのトランザクションにおいて、関係者は<a href="/800-63-4-2ndPD/sp800-63c/Federation/#trust-agreement">第3.4節で</a>説明する信頼契約を締結する。この合意は、どの当事者がどの役割を果たすかを確立し、その実行は、当該システム の接続に対する最初の許可を意味する。利用可能な加入者 ID 属性のリストはこのステップで確立されるが、特定のトランザクショ ンで、どの属性を特定の RP に解放するかは、フェデレーション・トランザクション自体の間に 最終決定される。</p>

<p>連携 ID トランザクションでは、IdP は RP の ID および認証属性のソースである。連携トランザクションの通常の情報の流れは、IdP から RP へのものである。この情報の流れには方向性があるため、IdP は RP の<em>上流と</em>見なされ、RP は IdP の<em>下流と</em>見なされる。特に<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#shared-signals">第 4.8 節で</a>議論するように、共有信号を使用することによって、RP から追加情報が逆流することも可能である。</p>

<div latex-literal="true" class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\クリアページ</code></pre></div></div>
<h2 id="trust-agreements" data-section="4">
  
  
    信託契約 <a href="#trust-agreements" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>信託契約は、以下のいずれかの方法で結ば<strong>れなければならない</strong>：</p>

<ul>
  <li>連盟取引に先立ち、連盟当事者による合意の結果として、または</li>
  <li>フェデレーション・トランザクションの間、加入者による決定または行為の結果として。</li>
</ul>
<h3 id="apriori-trust-agreement-establishment" data-section="4">
  
  
    アプリオリ信託契約締結 <a href="#apriori-trust-agreement-establishment" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>連携トランザクションの前に連携当事者によって信頼合意が確立される場合、信頼合意は、IdP と RP の関係<strong>ごとに異なってもよい（MAY）</strong>以下の条件を確立<strong>しなければならない（SHALL）</strong>：</p>

<ul>
  <li>CSP がサブスクライバ・アカウントの一部として IdP に提供するサブスクライバ属性のセット。</li>
  <li>IdP が RP に提供できる加入者属性のセット。</li>
  <li>サブスクライバが削除を要求するための利用可能な手段を含む、サブスクライバ・アカウントの IdP の属性保存ポリシー。</li>
  <li>IdP が該当する加入者属性を受け取る追加の属性ソース</li>
  <li>IDP が直接または外部プロバイダを介して利用可能な ID API がある場合、その API はどのようなもので、どの加入者属性がこれらの API で利用可能か。</li>
  <li>IdP がアサーションを作成できるサブスクライバ・アカウントの集団。</li>
  <li>ID サービスの提供以外の、加入者情報の追加的な使用。</li>
  <li>RP が要求する加入者属性のセット（利用可能な属性のサブセット）。</li>
  <li>RPが要求する各属性の目的</li>
  <li>加入者が削除を要求するための利用可能な手段を含む、RP 加入者アカウントのための RP の属性保存ポリ シー。</li>
  <li>IdPとRPの間で共有されるシグナリングの使用</li>
  <li>加入者属性の RP への公開に関する決定に責任を負う権限を有する当事者（IdP 組織、加入者など）。</li>
  <li>RPへの属性解放を加入者に通知する手段</li>
  <li>IdPから利用可能なxAL</li>
  <li>RPが要求するxAL</li>
</ul>

<p>信託契約の条項は、その設立時に RP および IdP のオペレータが入手できる<strong>ものとする</strong>。信託契約の条項は、IdP または RP への要求に応じて加入者が利用できるように<strong>しなければならない（SHALL）</strong>。</p>

<p>IdP と RP はそれぞれ、苦情または問題の解決を達成するための有効性について、それぞれの救済機 構を評価し、この評価結果を信頼契約の一部として開示<strong>しなければならない（SHALL）</strong>。救済メカニズムの追加要件および考慮事項については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#redress">第 3.4.3 節を</a>参照のこと。</p>

<p>FAL3 がトラスト契約内で許可される場合、トラスト契約は、Holder-of-Key アサーションおよびバインドされた認証子に関して、以下の条件を規定<strong>しなければならない（</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#idp-managed-bound-authn">第 3.14 節</a>および<a href="/800-63-4-2ndPD/sp800-63c/Federation/#bound-authn">第 3.15 節</a>参照）：</p>

<ul>
  <li>鍵の所有者のアサーションを RP が検証できる手段（一般的な信頼できる PKI システムなど）。</li>
  <li>RP が、鍵所有者アサーションを特定の RP 加入者アカウントに関連付けることができる手段 （属性ベースのアカウント解決または事前プロビジョニングなど）。</li>
  <li>バインドされた認証子がRPによって提供されるか、加入者によって提供されるか。</li>
  <li>サブスクライバが提供するバインド認証子に使用されるバインド・セレモニーの文書化</li>
</ul>

<p><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-runtime-decision">第 4.6.1.3 節に</a>記載されているように、IdP における実行時決定を使用して、連携認証プロセスで 当事者間で送信されるサブスクライバ属性をさらに<strong>制限してもよい</strong>（たとえば、この属性が信 頼契約の条件に含まれていたとしても、実行時決定によって電子メール・アドレスを開示 しないことを選択できる）。</p>

<p>IdP と RP は、システムの機能を実現するために必要な最小限のデータのみを交換<strong>しなければならない</strong>。</p>

<p>信託契約は、それが依然として目的に適合していることを確認し、不必要なデータ交 換や加入者データの過剰収集を回避するために、定期的に<strong>見直さなければならない（SHALL）</strong>。</p>
<h3 id="subscriber-driven-trust-agreement-establishment" data-section="4">
  
  
    加入者主導による信託契約の成立 <a href="#subscriber-driven-trust-agreement-establishment" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>サブスクライバが、契約が確立していない RP とその IdP との間でフェデレーション取引を開始する など、サブスクライバの決定の結果として信頼契約が確立される場合、信頼契約はサブスク ライバによって固定される。従って、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-runtime-decision">4.6.1.3 節に</a>記載されるように、IdP への要求時に加入者に、また IdP での実行時決定時に RP に、以下の条件を開示<strong>しなければならない（SHALL）</strong>：</p>

<ul>
  <li>CSP が IdP に提供するサブスクライバ属性のセット。</li>
  <li>IdP が該当する加入者属性を受け取る追加の属性ソース</li>
  <li>IDP が直接または外部プロバイダを介して利用可能な ID API がある場合、その API はどのようなもので、どの加入者属性がこれらの API で利用可能か。</li>
  <li>IdP が RP に提供できる加入者属性のセット。</li>
  <li>サブスクライバが削除を要求するための利用可能な手段を含む、サブスクライバ・アカウントの IdP の属性保存ポリシー。</li>
  <li>IdPとRPの間で共有されるシグナリングの使用</li>
  <li>IdP がアサーションを作成できるサブスクライバ・アカウントの集団。</li>
  <li>ID サービスの提供以外の、加入者情報の追加的な使用。</li>
  <li>IdPから利用可能なxAL</li>
</ul>

<p>IdP は<strong>、</strong>苦情または問題の解決を達成するために、その救済メカニズムの有効性を評価し、この 評価結果を加入者に開示<strong>しなければならない（SHALL）</strong>。救済メカニズムの追加要件および考慮事項については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#redress">第 3.4.3 節を</a>参照のこと。</p>

<p>加入者属性の解放は、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-runtime-decision">4.6.1.3 節に</a>記述されるように、IdP での実行時決定を使用して管理さ<strong>れなけれ ばならない（SHALL）</strong>。認可された当事者は加入者と<strong>する</strong>。</p>

<p>以下の信託契約の条項は、実行時決定の間にサブスクライバーに開示さ<strong>れなければならない[SHALL]：</strong></p>

<ul>
  <li>RP が要求する加入者属性のセット（IdP が提供する属性のサブセット）。</li>
  <li>RPが要求する各属性の目的</li>
  <li>加入者が削除を要求するための利用可能な手段を含む、RP 加入者アカウントのための RP の属性保存ポリ シー。</li>
  <li>RPが要求するxAL</li>
</ul>

<p>加入者に開示されるすべての情報は、<a href="/800-63-4-2ndPD/sp800-63c/usability/#usability">セクション8で</a>説明されているように、理解可能で実行可能な方法で伝達される必要があることに留意されたい。</p>
<h2 id="discovery-and-registration" data-section="4">
  
  
    ディスカバリーと登録 <a href="#discovery-and-registration" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>汎用 IdP とフェデレーション取引を行う場合、RP は<strong>、</strong>信頼関係で規定されるとおり<strong>、</strong>アサーション署名 鍵およびその他の関連する構成情報を IdP の識別子に<strong>関連付けなければならない（SHALL）</strong>。これらがネットワーク接続を介して取得される場合、要求および取得は<strong>、</strong>信頼契約によって IdP の識別子に関連付けられた場所から、安全な保護されたチャネルを介して行わ<strong>れなければならない（SHALL）</strong>。多くのフェデレーションプロトコルでは、RP が、IdP が管理する、または IdP の代理として提供されることが既知の URL から公開鍵と設定データを取得することで実現される。RPの管理者がIdP情報をRPソフトウェアに直接入力することによって、RPがこの情報を静的に直接設定することも可能である。</p>

<p>さらに、RP は、信頼協定で規定されているように、IdP または IdP が信頼する機関にその情報を登録<strong>しなければならない（SHALL）</strong>。多くのフェデレーションプロトコルでは、この段階で RP に識別子が割り当てられ、RP はその後の IdP との通信でこの識別子を使用する。</p>

<p>これらの要件のすべてにおいて、IdP は、信頼されるサードパーティが信頼契約において特定される限り、その発見および登録プロセスを促進するために信頼されるサードパーティを<strong>使用してもよい（MAY）</strong>。例えば、コンソーシアムは、IdPとRPの構成レコードを参加者から直接収集するホストされたサービスを利用することができる。RPはIdPに直接ディスカバリーレコードを取りに行く代わりに、このサービスに行く。IdPは代わりにこのサービスに行き、接続に必要なRPの識別子と構成情報を見つける。</p>
<h3 id="manual-registration" data-section="4">
  
  
    手動登録 <a href="#manual-registration" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>すべての FAL において、RP と IdP の暗号鍵と識別子は、RP の管理者が RP の設定を IdP に（直接または信頼できる第三者を通じて）提出し、その IdP で使用する識別子を受け取るという手動プロセスで交換できる。次に、RP の管理者は、この識別子と、フェデレーション・トランザクションを継続するために必要な追加情報 を RP に設定する。</p>

<p>これは手作業であるため、登録はフェデレーション・トランザクションが始まる前に行われる。</p>

<p>このプロセスは、あるレベルの自動化ツールによって促進<strong>されてもよい[MAY]</strong>。 その場合、手動コンフィギュレーションは、時間の経過とともに更新可能な信頼できる 情報源に当該システムを向ける。このような自動化が使用される場合、信頼契約は、許容可能なキャッシュ寿命を含め、 暗号鍵の配布と割り当ての許容条件を列挙<strong>しなければならない[SHALL]</strong>。</p>
<h3 id="dynamic-registration" data-section="4">
  
  
    ダイナミック登録 <a href="#dynamic-registration" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>FAL1 および FAL2 では、RP の暗号鍵と識別子を動的なプロセスで交換することができ、これによ り RP ソフトウェアは（直接または信頼できる第三者を通じて）IdP に設定を提示し、その IdP で使用する識別子を受け取る。このプロセスは、使用するフェデレーションプロトコルに固有であるが、ネットワーク上で利用可 能な機械可読構成データが必要である。構成情報のすべての送信は、信頼契約によって IdP の識別子に関連付けられたエンドポイントに対して、安全な保護されたチャネルを介して行わ<strong>れなければならない（SHALL）</strong>。</p>

<p>IdP は<strong>、</strong>複数の RP インスタンスへの情報漏えいのリスクを考慮し、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#ppi">3.3.1 節で</a>述べたように動的に登録される RP に対して PPI を発行するなど、適切な対策を<strong>講じるべきである</strong>。</p>

<p>動的登録は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#attestations">セクション3.5.</a>3で議論されているように、RPソフトウェアとデバイスに 関する証明によって補強さ<strong>れるべきである[SHOULD]</strong>。</p>

<p><a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC-registration">[OIDC-Registration]</a>は、OpenID Connect IdPにRPを動的に登録するためのプロトコルを定義する。</p>
<h2 id="subscriber-authentication-at-the-idp" data-section="4">
  
  
    IdP における加入者認証 <a href="#subscriber-authentication-at-the-idp" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>フェデレーションコンテキストでは、IdP は、<a href="/800-63-4-2ndPD/sp800-63b/introduction/#introduction" latex-href="#ref-SP800-63B">[SP800-63B]</a>に記述されているように、加入者ア カウントにバインドされた認証子の検証者として機能する。 認証子の検証は、IdP において認証セッションを開始する認証イベントを生成する。この認証されたセッションは、加入者が存在するという IdP の主張の基礎となる。</p>

<p>IdP は、サブスクライバが以下のいずれかの事象の前に認証されたセッションを持つことを要求<strong>しなけ ればならない（SHALL）</strong>：</p>

<ul>
  <li>属性リリースの承認</li>
  <li>アサーションの作成と発行</li>
  <li>加入者主導の信託契約の成立。</li>
</ul>

<p>セッション管理と再認証に関する追加要件は、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#federation-session">セクション4.7で</a>議論する。</p>
<h2 id="authentication-and-attribute-disclosure" data-section="4">
  
  
    認証と属性開示 <a href="#authentication-and-attribute-disclosure" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>フェデレーション取引を進めるかどうかの決定は<strong>、</strong>信託契約によって規定された権限を付与され た当事者によって決定さ<strong>れなければならない（SHALL）</strong>。この決定は、以下を含む様々な方法で算出することができる：</p>

<ul>
  <li>これは、システムが自動化された方法でフェデレーション・トランザクションの進行を許可できる状況を決定する；</li>
  <li>システムがフェデレーション・トランザクションの進行を許可しない状況を決定するブロックリスト。</li>
  <li>実行時決定(runtime decision)は、認可された当事者が、トランザクショ ンを進めることができるかどうか、およびどのような正確な条件の下で進 められるかを決定することを可能にする。実行時決定を保存し、将来のトランザクショ ンに適用することができることに注意すること。</li>
</ul>

<p>許可リスト、ブロックリスト、または実行時決定の適用可能性は、IdP および RP の ID、要求された加入者属性、要求された xAL、および他の要素を含む、フェデレーション・トランザクションの側面によって影響され得る。これらの決定は、リスク管理システム、フェデレーション当局、およびローカル・システム・ ポリシーによって促進することができる。</p>

<p>企業アプリケーションのシングルサインオンを促進するために、一連の加入者のために IdP で許可リストに登録された RP の非基準的な例については、<a href="/800-63-4-2ndPD/sp800-63c/examples/#enterprise-sso">第 10.5 節を</a>参照のこと。</p>

<p>IdP は、加入者からの苦情または問題（例えば、加入者が不正確な属性値を特定した場合）の救済の ための効果的なメカニズムを提供<strong>しなければならない（SHALL）</strong>。救済メカニズムの追加要件および考慮事項については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#redress">第 3.4.3 節を</a>参照のこと。</p>
<h3 id="idp-controlled-decisions" data-section="4">
  
  
    IdPが管理する意思決定 <a href="#idp-controlled-decisions" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<h4 id="idp-allowlist" data-section="4">
  
  
    RPのIdPアロリスト <a href="#idp-allowlist" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>先験的な信頼契約において、IdP は、サブスクライバの実行時決定なしに、IdP から認証と属性を受 け取ることを許可された RP の許可リストを<strong>確立してもよい（MAY）</strong>。RP を許可リストに登録するとき、IdP は RP が信頼契約の条件を遵守していることを確認<strong>しなけれ ばならない（SHALL）</strong>。IdP は<strong>，</strong>認証時にどの ID 属性を許可リストに登録された RP に渡すかを決定<strong>しなければならない</strong>。IdP は<strong>、</strong> <a href="/800-63-4-2ndPD/sp800-63c/privacy/#notice">第 7.2 節に</a>記載するとおり、許可リストを加入者が利用できるように<strong>しなければならない</strong>。</p>

<p>IdP allowlist は<strong>、</strong>ドメイン名、暗号鍵、または使用するフェデレーション・プロトコルに適用可能な その他の識別子によって、RP を一意に識別<strong>しなければならない</strong>。識別子を共有するエンティティは，許可リストの目的上，等価であると<strong>みなさなければならない</strong>。意図しないRPのなりすましを避けるため、アウルリストは可能な限り具体的である<strong>べきである(SHOULD)</strong>。</p>

<p>RP に対する IdP allowlist エントリは、どの属性が許可リスト決定の一部として含まれるかを示さ<strong>なければならない（SHALL）</strong>。RP によって追加の属性が要求される場合、その要求は次のいずれかで<strong>なければならない（SHALL）</strong>：</p>

<ul>
  <li>要求された追加属性を承認するための、認可された当事者の実行時決定に従う、</li>
  <li>allowlistエントリーの属性のみに再編集する。</li>
  <li>は、IdP によって完全に拒否される。</li>
</ul>

<p>IdP allowlist は、allowlist エントリが適用される xAL など、他の<strong>情報を含めてもよい（MAY）</strong>。例えば、IdP は、FAL1 のトランザクショ ンでは同意画面をバイパスするが、FAL3 のトランザクションでは加入者の同意確認を要求 するために、allowlist エントリを使用できる。</p>
<h4 id="idp-blocklists-of-rps" data-section="4">
  
  
    RPのIdPブロックリスト <a href="#idp-blocklists-of-rps" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>IdP は、サブスクライバから要求されても、IDP から認証アサーションまたは属性を受 信することを許可されない RP のブロックリストを<strong>設定してもよい</strong>。RP が IdP のブロックリストに載っている場合、IdP は、いかなる状況においても、当該 RP を対象とするアサーションを<strong>生成してはならない（SHALL NOT）</strong>。</p>

<p>IdP ブロックリストは<strong>、</strong>ドメイン名、暗号鍵、または使用中のフェデレーション・プロトコルに適 用される他の識別子によって、RP を一意に識別<strong>しなければならない（SHALL）</strong>。識別子を共有するエンティティは、ブロックリストの目的上、等価とみなされる<strong>ものとする。</strong>たとえば、「*.example.com」というワイルドカードドメイン識別子は、「www.example.com」、「service.example.com」、「unknown.example.com」というドメインに等しくマッチする。これらの3つのサイトはすべて、同じブロックリストエントリによってブロックされる。</p>
<h4 id="idp-runtime-decision" data-section="4">
  
  
    IdPランタイムの決定 <a href="#idp-runtime-decision" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>IdP と信頼協定を結んでいるが、その IdP との許可リストに載っていないすべての RP<strong>は、</strong>実行時認可の決定が信頼協定によって識別される認可された当事者によって行われるデフォルトポリシ ーに支配さ<strong>れなければならない（SHALL）</strong>。実行時決定は、フェデレーショントランザクション中に発生するので、認可された当事者は、一般に個人であり、ほとんどの状況では加入者である。しかし、管理者のような別の当事者が加入者に代わってプロンプトを表示することは可能である。サブスクライバ主導のトラスト契約では、サブスクライバとの実行時決定が、サブスクライバ属性の リリースを承認するための唯一許容される手段であることに注意。</p>

<p>実行時決定を処理するとき、IdP は、フェデレーション・トランザクション中に、認可された 当事者に対話的にプロンプトを出す。認可された当事者は、認証アサーションおよび特定の属性を RP に公開することに同意する。IdP は<strong>、</strong>サブスクライバに関する属性が RP に送信される前に、認可されたパーティに 明示的な通知を提供し、肯定的な確認を求める<strong>ものとする。</strong>最低限、この通知は、<a href="/800-63-4-2ndPD/sp800-63c/privacy/#notice">第 7.2 節と</a>整合するように、最も効果的な通知を提供し、確 認を得る立場にある当事者によって提供さ<strong>れるべきである（SHOULD）</strong>。IdP は、トランザクションが承認された場合、どの属性が RP に解放されるかを開示<strong>しなけれ ばならない（SHALL）</strong>。使用されているフェデレーションプロトコルが実行時にオプション的または選択的な属性開示を許可している場合、認証されたパーティは、フェデレーショントランザクションを完全に終了することなく、特定の属性を RP に送信するかどうかを決定するオプションを<strong>与えられなければならない（SHALL）</strong>。</p>

<p>認可された当事者が加入者である場合、IdP は<strong>、</strong>加入者が RP に送信される属性値および派生 属性値を閲覧するための仕組みを提供<strong>しなければならない（SHALL）</strong>。機密情報の不正な暴露（例えば、ショルダーサーフィン）のリスクを軽減するために、IdP は、デフォルトで、加入者に表示される機密情報をマスク<strong>しなければならない（SHALL）</strong>。マスキングの詳細については、ユーザビリティの考慮に関する<a href="/800-63-4-2ndPD/sp800-63c/usability/#usability">第 8 節を</a>参照のこと。</p>

<p>IdP は、認可された当事者の決定を記憶して、同じ RP に同じ属性セットを再送信するため の仕組みを<strong>採用してもよい（MAY）</strong>。このメカニズムは、IdP が管理する加入者アカウントに関連付けられる。このような仕組みが提供される場合、IdP は、被認証者が将来の時点でそのような記憶されたアク セスを取り消すことを許可<strong>しなければならない（SHALL）</strong>。</p>
<h3 id="rp-controlled-decisions" data-section="4">
  
  
    RPにコントロールされた決定 <a href="#rp-controlled-decisions" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<h4 id="rp-allowlists-of-idps" data-section="4">
  
  
    IdPのRPアロリスト <a href="#rp-allowlists-of-idps" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>RPは、サブスクライバがIdPを使用することを実行時に決定しなくても、RPが認証と属性を受 け入れるIdPのallowlistを<strong>確立してもよい（MAY）</strong>。実際には、多くの RP は単一の IdP としかインタフェースしておらず、この IdP は、その RP の唯一の可能なエントリとして許可リストに登録される。RP は、IdP を許可リストに登録する際に、IdP が信頼契約の条件を遵守していることを確認<strong>しなけれ ばならない（SHALL）</strong>。この確認は、フェデレーション機関が容易に行うことも、RP が直接行うこともできることに注意。</p>

<p>RP allowlists は<strong>、</strong>ドメイン名、暗号鍵、または使用するフェデレーションプロトコルに適用可能な その他の識別子によって、IdP を一意に識別<strong>しなければならない</strong>。</p>

<p>RPのallowlistエントリは、加入者アカウントの側面(トランザクションに必要なxALな ど)に基づいて<strong>適用してもよい[MAY]</strong>。たとえば、RPはFAL1トランザクショ ンには実行時決定を使用できるが、FAL3トランザクションにはallowlistされたIdPを必 要とする。</p>
<h4 id="rp-blocklists-of-idps" data-section="4">
  
  
    IdPのRPブロックリスト <a href="#rp-blocklists-of-idps" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>RP は、サブスクライバから要求された場合でも、RP が認証または属性を受け入れない IdP のブロックリストを設定しても<strong>よい（MAY）</strong>。ブロックリストに登録された IdP は、RP と有効な信頼協定を結んでいる場合、例えば、両者が同一のフェデレーション権限下にある場合であってもよい。</p>

<p>RP ブロックリストは<strong>、</strong>ドメイン名、暗号鍵、または使用するフェデレーションプロトコルに適 用されるその他の識別子によって、IdP を一意に識別<strong>しなければならない（SHALL）</strong>。</p>
<h4 id="rp-runtime-decision" data-section="4">
  
  
    RPランタイムの決定 <a href="#rp-runtime-decision" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h4>

<p>RP と信頼協定を結んでいるが、その RP との許可リストに載っていないすべての IdP<strong>は</strong>、実行時認可の決定が信頼協定に示された認可当事者によって行われるデフォルトポリシ ーに支配さ<strong>れなければならない（SHALL）</strong>。このモードでは、認可されたパーティは、サブスクライバに代わって認証のためにコンタクト する IdP を選択または入力するよう、RP によって促される。このプロセスは、加入者が電子メール・アドレスのような人面識別子を入力できるようにす るディスカバリ・メカニズムの使用によって容易にすることができる。このプロセスにより、RP は、その識別子に対して適切な IdP をプログラ ム的に選択することができる。実行時の決定は、フェデレーショントランザクション中に行われるため、認可された 当事者は一般に人であり、ほとんどの状況では加入者である。</p>

<p>RPは、被認証者が所定のIdPを使用する決定を記憶するための仕組みを<strong>採用しても よい（MAY）</strong>。この仕組みは RP での認証の前に採用されるため、RP がこの仕組みを提供する方法 (認証セッション外のブラウザクッキーなど)は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#rp-account">3.10.1 節に</a>記述される RP 加入者アカウントとは別である。そのような仕組みが提供される場合、RPは、認証されたパーティが将来そのような記憶された オプションを取り消すことを許可<strong>しなければならない[SHALL]</strong>。</p>
<h3 id="provisioning" data-section="4">
  
  
    RP加入者アカウントのプロビジョニング・モデル <a href="#provisioning" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>RP 加入者アカウントのプロビジョニングプロセスのライフサイクルは、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#trust-agreement">3.4 節で</a>議論した信頼契約や IdP と RP の展開パターンを含む要因によって異なる。ただし、すべての場合において、RP 加入者アカウントは、以下のいずれかの方法で、RP での認証セッションの確立前に RP でプロビジョニングさ<strong>れなければならない（SHALL）</strong>：</p>

<dl>
  <dt>ジャストインタイム・プロビジョニング</dt>
  <dd>RP 加入者アカウントは、RP が IdP から未知のフェデレーション識別子を持つアサーションを初めて受 信したときに自動的に作成される。アサーション内または<a href="/800-63-4-2ndPD/sp800-63c/Federation/#s-identity-api">第 3.11.3 節で</a>説明する ID API を通じて、フェデレーション処理中に学習された ID 属性は、RP 加入者<strong>アカウントに関連付けてもよい（MAY）</strong>。この方法でプロビジョニングされたア カウントは、プロビジョニングに使用されたアサーション内のフェデレーション識別子にバインド される。 これは、RP と IdP 間で最も少ない調整しか必要としないため、フェデレーション・シス テムで最も一般的なプロビジョニングの形態である。ただし、このようなシステムでは、RP はキャッシュされた属性を管理する責任を負う<strong>ものとする。</strong> <a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-7">図 7</a> を参照。</dd>
</dl>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-7" name="fig-7">図7.ジャストインタイム・プロビジョニング</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/JIT-Provisioning.png" alt="Diagram of the stages of a just-in-time provisioning of an RP subscriber account based on a subscriber account." title="Just-In-Time Provisioning" latex-src="JIT-Provisioning.pdf" latex-fig="7" latex-place="p" /></p>

<dl>
  <dt>プリプロビジョニング</dt>
  <dd>RP 加入者アカウントは、IdP が属性を RP にプッシュするか、または RP が属性を IdP からプルすることによって作成される。アカウントの事前プロビジョニングは、一般に、代表加入者がフェデレーショントランザクショ ンを通じて認証する前にプロビジョニングが発生するため、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#provisioning-api">第 4.6.5 節で</a>説明するように、プロビジョ ニング API を通じて一括して行われる。事前にプロビジョニングされたアカウントは<strong>、</strong>プロビジョニング時に連携識別子にバインド さ<strong>れなければならない[SHALL]</strong>。特定の連携識別子が RP に見られるときはいつでも、関連するアカウントは結果としてログインできる。 
この形式のプロビジョニングは、IdP および RP 側のインフラストラクチャーと計画を必要とするが、こ れらのプロセスは、自動化されたプロトコルによって促進することができる。さらに、IdP と RP は、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#attribute-sync">4.6.4 節で</a>説明するように、プロビジョニングされたアカウント一式を経時的に同期しておく必要がある。<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-8">図 8 を</a>参照。    <p>このモデルでは、RPは、まだRPと相互作用していない(するかもしれない)加入者に関する属性も受信する。これは他のモデルとは対照的で、RPはRPを使用する加入者のサブセット についての情報のみを受信し、しかも加入者がRPを初めて使用した後にのみ受信する。フェデレーショントランザクションの前に、RPがこの情報にアクセスすることによるプライバシーの考慮は、信頼契約において説明さ<strong>れなければならない[SHALL]</strong>。</p>
  </dd>
</dl>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-8" name="fig-8">図8.プリプロビジョニング</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/Pre-Provisioning.png" alt="Diagram of the stages of a pre-provisioned RP subscriber account based on a subscriber account." title="Pre-Provisioning" latex-src="Pre-Provisioning.pdf" latex-fig="8" latex-place="p" /></p>

<dl>
  <dt>儚い</dt>
  <dd>アサーションの処理時にRPサブスクライバ・アカウントが作成されるが、認証された セッションが終了すると、RPサブスクライバ・アカウントは終了する。このプロセスは、ジャストインタイム・プロビジョニングに類似しているが、RPは、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#store-subscriber-info">第 3.10.3 節に従って</a>、セッションが完了したときにアカウントの長期的な記録を保持しない。この形式のプロビジョニングは、アクセス権をIdPに完全に外部化するRPに有用であり、RPは、より少ない内部状態でより単純化することができる。しかし、最も単純な RP でさえ、アプリケーション内の状態を追跡する必要があるか、少なくとも連携識別 子に関連するアクションの記録を保持する必要がある傾向があるため、このパターンは一般的ではない。<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-9">図9を</a>参照。</dd>
</dl>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Federation/#fig-9" name="fig-9">図9.エフェメラル・プロビジョニング</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/Ephemeral-Provisioning.png" alt="Diagram of the stages of an ephemeral RP subscriber account based on a subscriber account." title="Ephemeral Provisioning" latex-src="Ephemeral-Provisioning.pdf" latex-fig="9" latex-place="p" /></p>

<div latex-literal="true" class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\クリアページ</code></pre></div></div>

<dl>
  <dt>その他</dt>
  <dd>他の RP 加入者アカウントのプロビジョニングモデルも可能であるが、そのようなモデルの詳 細は本ガイドラインの範囲外である。代替プロビジョニングモデルの詳細は、IdP と RP のプライバシーリスク評価に<strong>含めなければならない（SHALL）</strong>。</dd>
</dl>

<p>すべての組織は<strong>、</strong>プロビジョニング・モデルを信頼契約の一部として文書化<strong>しなければならない（SHALL）</strong>。</p>
<h3 id="attribute-sync" data-section="4">
  
  
    属性の同期化 <a href="#attribute-sync" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>フェデレーション処理では、IdP および RP はそれぞれ、加入者アカウントに関連付けられた ID 属性の独自のストアを持つ。IdP は加入者アカウントの属性を直接見ることができるが、RP の加入者ア カウントは、連携トランザクション中に提示されるこれらの属性のサブセットから派生する。したがって、IdP の属性ストアと RP の属性ストアは、時間の経過とともに互いに乖離する可能性がある。</p>

<p>RP の観点からは、IdP は、IdP における加入者アカウントに関連するものとして、IdP がアサートするあらゆる属性の信頼される情報源である。IdP の属性の出所およびその検証プロセスは、信頼契約に規定される。</p>

<p>ただし、RP は、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#rp-attribute-collection">4.6.6 節で</a>説明するように、RP 加入者アカウントに関連付ける他の属性を追加 的に収集し、オプションで<strong>検証してもよい[MAY]</strong>。時々、これらの属性は、IdP がアサートするものを上書きすることさえある。たとえば、IdP がサブスクライバの完全な表示名をアサートする場合、RP は、サブスクライバが RP で使用する代替の優先名を提供することを許可できる。</p>

<p>IdP は、RP が利用可能な加入者アカウントの属性が更新されたときに、ダウンストリームの RP に 信号を<strong>送るべきであり（SHOULD）</strong>、RP は、RP 加入者アカウントの属性を更新することで、この信号に<strong>応答してもよい（MAY）</strong>。この同期は、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#shared-signals">第 4.8 節に</a>記載される共有シグナリングを使用するか、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#provisioning-api">第 4.6.5 節に</a>記載されるプロビジョニング API を使用するか、またはアサーション内のシグナル（関連属性が最後に更新された日時を示すタイムスタンプなど）を提供することで、RP がキャッシュが古くなったことを判断できるようにすることで達成できる。RP が<a href="/800-63-4-2ndPD/sp800-63c/Federation/#s-identity-api">第 3.11.3 節の</a>ように ID API へのアクセスを許可されている場合、IdP は、フェデレーショントランザ クションが終了した後に同期操作を実行するのに十分な時間、RP に API へのアクセスを許可<strong>すべきで ある（SHOULD）</strong>。例えば、アサーションが 5 分間有効である場合、ID API へのアクセスは、RP が帯域外で属性を取 得し更新できるように 30 分間有効とすることができる。</p>

<p>IdP は、加入者アカウントが終了したとき、または加入者アカウントの RP へのアクセス が取り消されたときに、ダウンストリームの RP にシグナリング<strong>すべきである[SHOULD]</strong>。これは、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#shared-signals">4.8 節に</a>記載される共有シグナリングを使用するか、または<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#provisioning-api">4.6.5 節に</a>記載されるプロビジョニング API を使用して達成することができる。このようなシグナルを受信すると、RPは信頼契約に規定されているようにRP加入者ア カウントを処理<strong>しなければならない[SHALL]</strong>。RP 加入者アカウントが解約された場合、RP は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#store-subscriber-info">第 3.10.3 節に従い</a>、RP 加入者アカウントに関連する すべての個人情報を削除<strong>しなければならない</strong>。終了の理由が疑わしい活動または詐欺的な活動である場合、IdP は<strong>、</strong>その RP との信頼契約に規定されていれば、RP が RP でのアカウントの活動に疑わしい活動がないか確認できるように、RP への信号にこの理由を<strong>含めなければならない（SHALL）</strong>。</p>
<h3 id="provisioning-api" data-section="4">
  
  
    プロビジョニングAPI <a href="#provisioning-api" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>プロビジョニングのいくつかの積極的な形態の一部として、RP は、<em>プロビジョニング API</em> として知られる汎用 ID API を介して加入者属性にアクセスできるようにすることができる。このタイプの API は、IdP が加入者アカウントの範囲の属性をプッシュすることを可能にし、場合によっては RP がこれらの加入者アカウントの属性を直接照会することを可能にする。API へのアクセスはフェデレーション・トランザク ションのコンテキスト外で許可されるため、所定の加入者のプロビジョニング API へのアクセ スは、所定の加入者が認証されたことを RP に示さない。</p>

<p>指定された RP が利用できるプロビジョニング API の属性は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#transmit-subscriber-info">第 3.9.1 節で</a>説明する監査およびセキュリテ ィ目的を含め、RP がその機能を実行するために必要なものだけに限定さ<strong>れなければならない（SHALL）</strong>。信頼契約の確立の一部として、IdP は、RP がプロビジョニング API へのアクセスを与えられたときに、少なくとも以下を含む文書を作成<strong>しなければならない（SHALL）</strong>：</p>

<ul>
  <li>プロビジョニング・モデルを使用したアクセスの目的；</li>
  <li>RPが利用できる属性のセット；</li>
  <li>APIがRPへのプッシュ、RPからのプル、またはその両方として機能するかどうか。</li>
  <li>RPが利用可能な属性を持つ加入者の集団。</li>
</ul>

<p>プロビジョニング API へのアクセスは、相互に認証された保護されたチャネルを介して行わ<strong>れなければならない（SHALL）</strong>。認証の正確な手段は、API の仕様、およびプッシュモデル（IdP が RP に接続する）かプルモデル（RP が IdP に接続する）かによって異なる。</p>

<p>プロビジョニング API は、サブスクライバ主導の信頼契約のもとで利用<strong>可能にしてはならない（SHALL NOT）</strong>。IdP は、確立された信頼契約以外の RP に対してプロビジョニング API を利用<strong>可能にしてはならない （SHALL NOT）</strong>。IdP は<strong>、</strong>RP との連携トランザクションおよび加入者アカウントの失効を通知するなどの関連機 能を促進するために、RP との連携 ID 関係の一部としてのみ、プロビジョニング API へのアク セスを提供<strong>しなければならない（SHALL）</strong>。IdP は<strong>、</strong>RP がその機能目的のためにアクセスを必要としなくなった時点で、または信頼契約が 終了した時点で、RP のプロビジョニング API へのアクセスを失効さ<strong>せなければならない（SHALL）</strong>。</p>

<p>RP に提供されるすべてのプロビジョニング API は、IdP の管理・管轄下に<strong>なければならない（SHALL）</strong>。このプロビジョニング API を通じて属性を提供するために，IdP が外部の属性プロバイダを情報源として<strong>使用してもよい（MAY）</strong>。</p>

<p>プロビジョニング API が使用されている場合、IdP は加入者アカウントが終了したときに RP に信号を<strong>送らなければならない（SHALL）</strong>。このような信号を受信した場合、RP は<strong>、</strong>アカウントから連携識別子のバインディングを削除し、必要な場合（このアカウントにリンクされた他の連携識別子が存在しないか、または信頼協定がそのような動作を指示している場合など）、アカウントを終了<strong>しなければならない（</strong> <strong>SHALL</strong> <strong>）</strong>。RPは<strong>、</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#store-subscriber-info">第3.10.3項に従って</a>、プロビジョニングAPIから取得したすべての個人情報を削除<strong>しなけれ ばならない(SHALL)</strong>。</p>
<h3 id="rp-attribute-collection" data-section="4">
  
  
    RPによる追加属性の収集 <a href="#rp-attribute-collection" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>RP は、IdP が提供する属性を超えて、加入者から追加の属性を収集し、<strong>保持してもよい（MAY）</strong>。たとえば、RP は、IdP によって提供されない優先表示名を加入者から直接収集できる。また、RP は、IdP に関連しない ID API へのアクセスを RP に与える属性プロバイダと別個の契約を結 ぶこともできる。たとえば、RP は IdP から州の免許証番号を受け取るが、別の属性検証 API を使用して、特定の免許証番号が現 在有効であるかどうかを確認できる。IdP からのアサーションは、ライセンスをサブスクライバにバインドするが、属性検証 API は、IdP が共有できる、または権限を持つ以上の追加情報を提供する。</p>

<p>これらの属性は、フェデレーション・トランザクションの外部でRPによって収集されるため、信 託契約とは別に管理される。RPサブスクライバーアカウントに関連付けられたすべての属性は、そのソースにかかわらず、 RPサブスクライバーアカウントが終了したときに、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#store-subscriber-info">セクション3.10.3に従って</a>削除さ<strong>れなければ ならない（SHALL）</strong>。</p>

<p>RP は<strong>、</strong>追加属性の収集目的を加入者に開示<strong>しなければならない</strong>。これらの属性は、RP の機能の規定の目的のみに使用される<strong>ものとし</strong>、当該属性の他者への伝達を 含むいかなる二次<strong>利用も行ってはならない</strong>。</p>

<p>RP は<strong>、</strong>加入者が RP 加入者アカウントから追加収集された属性を更新および削除するための効果的な救済手 段を提供<strong>しなければならない（SHALL）</strong>。救済メカニズムの追加要件と考慮事項については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#redress">第 3.4.3 節を</a>参照のこと。</p>

<p>次の要件は、連邦機関が独自の ID サービスを運用するか、ID サービスの一部として外部の CSP を使用するかに関係なく、連邦機関に適用される：</p>

<ul>
  <li>RP は<strong>、</strong>記録システム通知（SORN）の一部として、収集した追加属性とその使用方法を開示<strong>しなけ ればならない（SHALL）</strong>。</li>
</ul>
<h3 id="stale-account" data-section="4">
  
  
    RP加入者アカウントの時間ベースの削除 <a href="#stale-account" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>RP がジャストインタイムプロビジョニングメカニズムを使用している場合、RP は、そのアカウントが RP で最初に使用されるときにのみ加入者アカウントの存在を知る。IdP が、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#shared-signals">第 4.8 節に</a>記載される共有シグナリングを使用して、終了した加入者アカウントを RP に通知しない場合、RP は、IdP からアクセスできなくなった RP 加入者アカウントを蓄積する可能性がある。これは、RP が RP 加入者アカウントの個人情報を保持するリスクをもたらす。このような状況では、RP は、アプリケーションの使用パターンに合わせた期間を経過してもアク セスされない終了用の RP 加入者アカウントを識別するために、時間ベースのメカニズムを<strong>採用してもよい（MAY）</strong>。例えば、通常週単位でアクセスされるRPでは、RP加入者アカウントを終了するために、 RPでの最終アクセスから120日というタイムアウトを設定することができる。毎年利用されるサービスなど、アクセス間隔が長くなることが予想される RP では、5 年など、もっと長い時間枠を設定すべきである。</p>

<p>このような非活動アカウントを処理する場合、RP は、加入者に対し、保留中のアカウント 終了について十分な通知を行い、終了予定前にアカウントを再度有効にするオプションを提供<strong>しなけ ればならない</strong>。終了後、RP は<strong>、</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#store-subscriber-info">第 3.10.3 項に従って</a> <strong>、</strong>RP 加入者アカウントに関連するすべての個人情報を 削除<strong>しなければならない</strong>。</p>
<h2 id="federation-session" data-section="4">
  
  
    フェデレート環境における再認証とセッション要件 <a href="#federation-session" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>連携環境では、RP はそのセッションを IdP のセッションとは別に管理する。アサーションは両セッションに関連するが、その有効期間は最終的に両セッションに依存しない。</p>

<p><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-10">図 10</a> に示すように、アサーションは IdP での認証セッション中に作成され、アサーション を処理すると RP で認証セッションが作成される。アサーションの有効期限は、RP によるアサーションの処理を管理するために使用されるが、IdP または RP における認証セッションの有効期限を示すものではない。サブスクライバのセッションがまだ IdP で有効である間に、新しいフェデレーション・トランザ クションの要求が IdP に来た場合、独自の有効時間ウィンドウを持つ新しい別のアサーションが作成 される。同様に、RP がアサーションを消費した後、RP のセッションの有効性はアサーションの有効性とは無関係であり、 ほとんどの場合、RP での認証されたセッションはアサーションの有効性よりもはるかに長くなる。ID API に付与されるアクセスも同様に、アサーションの有効性または RP での認証されたセッションの有効期間とは無関係である。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-session" name="fig-10">図10.セッション寿命</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/Session.png" alt="Diagram of the relationship between session lifetimes at the IdP and RP and assertion validity window." title="Session Lifetimes" latex-src="Session.pdf" latex-fig="10" latex-place="h" /></p>

<p>IdP がサブスクライバの IdP でのセッションを終了しても、サブスクライバが下流の RP で持 つセッションが終了するとは限らない。RP と IdP は、フェデレーションプロトコルでサポートされている場合、または共有シグナリング（<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#shared-signals">第 4.8 節を</a>参照）により、セッション終了イベントを互いに<strong>通信してもよい（MAY</strong>）。</p>

<p>連携トランザクション要求時に、サブスクライバは、RP に対するアサーションを生成するために 使用<strong>されてもよい（MAY）、</strong>IDP における既存の認証済みセッションを有する可能性がある。IdP は<strong>、</strong>IdP におけるサブスクライバの最新の認証イベントの時間に関して、IdP が持つすべての情報を RP に伝達<strong>しなければならず（SHALL）</strong>、RP は、認可およびアクセスの決定にこの情報を<strong>使用してもよい（MAY）</strong>。使用するフェデレーションプロトコルの機能に応じて、IdP は、RP が加入者に対し、IdP での既存のセッションを使用する代わりに、IdP で新たな認証を提供するよう要求することを<strong>認めるべきである（SHOULD）</strong>。たとえば、加入者があるトランザクションのために IdP で認証したとする。それから 30 分後、サブスクライバは RP で連携トランザクションを開始する。xAL 要件によっては、IdP でのサブスクライバの既存セッションを使用して、サブスクライバに認証子 の入力を求めないようにできる。その結果、RP に対するアサーションは、サブスクライバが RP に対して最後に認証したのが 30 分前であることを示す。その後、RP はこの情報を使用して、これが RP のニーズにとって妥当かどうかを判断し、フェデレーショ ン・プロトコル内で可能であれば、代わりに新しい認証イベントをサブスクライバにプロンプト するよう IdP に要求できる。</p>

<p>フェデレーションプロトコルによる認証を要求する RP は<strong>、</strong>フェデレーションプロトコル（可能な場合）ま たは信頼契約の条件により、IdP に対して最大許容認証年齢を指定<strong>しなければならない（SHALL）</strong>。認証年齢は、IdP におけるサブスクライバのセッションの最後の認証イベントからの時間を表し、その期間内にサブスクライバが認証されなかった場合、IdP はサブスクライバを再認証<strong>しなければならない（SHALL）</strong>。IdP は<strong>、</strong>RP が RP での認証に十分なアサーションであるかどうかを判断し、次の再認証イベ ントの時刻を決定できるように、認証イベント時刻を RP に通知<strong>しなければならない（SHALL）</strong>。</p>

<p>RP がアサーションを受け取ると同時に ID API へのアクセスを許可された場合、ID API へのアク セスの有効期限はアサーションの有効期限とは無関係である。結果として、RP が ID API を介して追加属性を正常にフェッチする能力は、RP でのセッ ションの確立に<strong>使用してはならない[SHALL NOT]</strong>。同様に、ID API にアクセスできないことは、RP でのセッションを終了するために使用<strong>すべきで はない[SHOULD NOT]</strong>。</p>

<p>RP に ID API へのアクセスが付与されると、多くの場合、RP は同時に他の API へのアクセスも付与される。たとえば、ログイン中にサブスクライバのカレンダやデータストレージへのアクセスも付与される。このアクセスは、アサーションの有効期限が切れた後も、場合によっては RP とのセッ ションが終了した後も有効であることが一般的であるため、加入者が RP に存在しなくなった後でも、RP は加入者に代わってこれらの非 ID API にアクセスできる。非 ID API へのアクセスを提供することは、本ガイドラインの範囲外である。</p>

<p>アサーション、認証イベント、または属性が RP の要件を満たさない場合、RP はサブスクライバとの 認証セッションを<strong>終了してもよいし</strong>、RP の機能へのアクセスを<strong>制限してもよい</strong>。例えば、RP が、フェデレーション・トランザクションが FAL3 の場合のみ、特定の高リスク機能へのアクセ スを許可するように構成されているが、受信アサーションが FAL2 の要件しか満たしていない場合、 RP は、高リスク機能へのアクセスを拒否し、低リスク機能へのアクセスを許可することを決定することができ、また は、RP は、セッションを完全に終了することを選択することができる。</p>

<p>IdPとRPの両方に適用されるセッション管理要件の詳細については、<a href="/800-63-4-2ndPD/sp800-63b/session/#sec7" latex-href="#ref-SP800-63B">[SP800-63B]セクション5を</a>参照のこと。</p>
<h2 id="shared-signals" data-section="4">
  
  
    シェアード・シグナリング <a href="#shared-signals" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>環境によっては、IdP と RP がフェデレーション・トランザクションの外で相互に情報を送信することが有用で ある。これらのシグナ ルは、他の方法では知ることができない重要な状態の変化を当事者間で伝達することができる。共有シグナリングの使用は、IdP と RP 間の信頼契約に文書化<strong>しなければならない（SHALL）</strong>。IdP から RP へのシグナリングは<strong>、</strong>事前の信頼合意を必要と<strong>しなければならない（SHALL）</strong>。RP から IdP へのシグナリングは、アプリオリおよびサブスクライバ主導の信頼契約の両方で<strong>使用してもよい （MAY）</strong>。</p>

<p>共有シグナリングの使用はすべて文書化され、トラスト契約によって規定された 権限を持つ当事者が利用できるように<strong>しなければならない(SHALL)</strong>。この文書には、シグナルが送信されるイベント、シグナルに含まれる情報（属性情報を含む）、シグナルとともに送信される追加パラメータを<strong>含めなければならない（SHALL）</strong>。共有シグナリングの使用は、信頼契約に基づくプライバシーのレビューに従う<strong>ものとする。</strong></p>

<p>IdP は<strong>、</strong>加入者アカウントに以下の変更に関するシグナルを送信<strong>するべきである（SHOULD）</strong>：</p>

<ul>
  <li>アカウントは停止されました。</li>
  <li>このアカウントは漏洩した疑いがある。</li>
  <li>連携識別子以外の識別子（電子メールアドレスや証明書のコモンネームなど）を含むアカウントの属性が変更された。</li>
  <li>口座のIAL、AAL、FALの可能な範囲が変更された。</li>
</ul>

<p>RPが、RP加入者のアカウントに危殆化の疑いがあるというシグナルを受信した場合、 RPは、RPにおいてそのアカウントが取ったアクションに疑わしいものがないか確認す<strong>べきである（SHOULD）</strong>。</p>

<p>RPはRP加入者アカウントに以下の変更に関するシグナルを<strong>送るべきである[SHOULD</strong>]：</p>

<ul>
  <li>アカウントは停止されました。</li>
  <li>このアカウントは漏洩した疑いがある。</li>
  <li>バインドされた認証子は、RPによって追加される。</li>
  <li>バインドされた認証子は、RPによって削除される。</li>
</ul>

<p>IdP は、加入者アカウントの危殆化が疑われる旨のシグナルを受信した場合、当該アカウントが IdP で行ったアクションに不審な動きがないか確認する<strong>ものとする（SHALL）</strong>。IdP において不審な活動が確認された場合、IdP は、当該加入者アカウントが疑われる時間帯 に使用された追加の RP を通知<strong>しなければならない（SHALL）</strong>。</p>

<p>IdPとRPの両方からの追加信号は、信頼契約の一部として、プライバシーとセキュリテ ィの審査を条件として<strong>許可してもよい（MAY）</strong>。</p>
<h2 id="assertions" data-section="4">
  
  
    アサーション内容 <a href="#assertions" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>アサーションは、認証済みサブスクライバに関する、または認証済みサブスクライバに関連する属性 値または派生属性値のパッケージ・セットであり、連携 ID システムにおいて IdP から RP に渡される。アサーションには、アサーション・メタデータ、サブスクライバに関する属性値および派生属性値、IdP におけるサブスクライバの認証に関する情報、RP が活用できるその他の情報（制限や有効期限など）など、さまざまな情報が含まれる。アサーションの主な機能は、RP に対してユーザを認証することであるが、アサーションで伝達され る情報は、RP が多くのユースケース（例えば、Web サイトの認可またはパーソナライゼーション） で使用することができる。本ガイドラインは、RP の使用事例や、ID のフェデレーションに使用されるプロトコルやデータ・ ペイロードの種類を制限するものではない。</p>

<p>アサーションは、IdP においてはサブスクライバの個別の認証イベントを表し、RP においては 個別の認証イベントとして処理さ<strong>れなければならない（</strong> <strong>SHALL</strong> <strong>）</strong>。</p>

<p>すべてのアサーションには、以下の属性を含める<strong>ものとする</strong>：</p>

<ol>
  <li>サブジェクト識別子：アサーションが適用される当事者（すなわちサブスクライバ）の識別子。</li>
  <li>発行者識別子：アサーションの発行者（すなわち IdP）の識別子。</li>
  <li>視聴者識別子：アサーションを消費することを意図する当事者（すなわち、RP）の識別子。アサーションは、FAL1 において複数の視聴者識別子を含むことができる。</li>
  <li>発行時刻：IdP がアサーションを発行した日時を示すタイムスタンプ。</li>
  <li>有効期限：有効期限：サブスクライバを認証し、RP で認証セッションを開始する目的で、RP がアサーション を有効な<strong>ものとして受け入れてはならない</strong>期間。これは通常、発行タイムスタンプに加えて、アサーションの有効期限タイムスタンプによって通知される。</li>
  <li>アサーション識別子：このアサーションを一意に識別する値で、攻撃者が以前のアサーションを再生するのを防ぐために使用される。</li>
  <li>認証時間：一次認証イベントによって、IdP が最後にサブスクライバの存在を確認した日時を示すタイムスタンプ。</li>
  <li>ノンス：RPから提供されている場合は、暗号化ノンス。</li>
  <li>署名：署名：鍵識別子を含む、アサーション全体をカバーするデジタル署名またはメッセージ認証コード（MAC）。</li>
</ol>

<p>すべてのアサーションは<strong>、</strong>フェデレーション・トランザクションの以下の側面を判断するのに十分な情報を<strong>含まなけれ ばならない（SHALL）</strong>：</p>

<ol>
  <li>アサーションで表されるサブスクライバ・アカウントの IAL、または IAL がアサートされていないことを示す。</li>
  <li>サブスクライバが IdP に認証されたときに使用された AAL、または AAL がアサートされていないことを示す。</li>
  <li>アサーションが表すフェデレーション・プロセスの、IdP が意図する FAL。</li>
</ol>

<p>FAL3 において、アサーションは以下のいずれかを<strong>含まなければならない（SHALL）</strong>：</p>

<ul>
  <li>公開鍵、鍵識別子、または鍵所有者アサーションのその他の識別子。</li>
  <li>このアサーションを処理するために、バインドされた認証子の検 証が必要であることを示すインジケータ。</li>
</ul>

<p>アサーションはまた、以下の情報を含む追加項目を<strong>含んでもよい（MAY）</strong>：</p>

<ol>
  <li>属性値および派生属性値：加入者に関する情報。</li>
  <li>属性バンドル：CSP からの署名付きバンドル内の属性のコレクション。</li>
  <li>属性メタデータ：<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-nistir8112">NISTIR8112]</a> に記述されているような、1 つ以上のサブスクライバ属性に関する追加情報。</li>
  <li>認証イベント：認証イベント：使用された認証子のクラスなど、認証イベントに関する追加の詳細。</li>
</ol>

<p>RP は、以下のすべてが真であることを確認することで<strong>、</strong>アサーションを検証<strong>しなければならない（SHALL）</strong>：</p>

<ul>
  <li><em>署名検証</em>：アサーションの署名が有効であり、アサーションを送信する IdP の鍵に対応することを確 認する。</li>
  <li><em>発行者検証</em>：RP が期待する IdP が発行したアサーションであることを確認する。</li>
  <li><em>時間の検証</em>：有効期限と発行時間が現在のタイムスタンプの許容範囲内であることを確認する。</li>
  <li><em>対象者の制限</em>：この RP がアサーションの意図された受信者であることを保証する。</li>
  <li><em>Nonce</em>:RPのリクエストに含まれる暗号化Nonce(該当する場合)がプレゼンテーションに 含まれていることを保証する。</li>
  <li><em>取引条件</em>：アサーションが表す IAL、AAL、FAL が、適用される信託契約に基づき許容されるものであること。</li>
</ul>

<p>RP は<strong>、</strong>サブジェクト識別子を本質的にグローバルに一意でないものとして扱う<strong>ものとする。</strong>その代わりに、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#federated-identifier">3.3 節で</a>説明するように、アサーションのサブジェクト識別子の値は、通常、 アサーション発行者の管理下にある名前空間内にある。これにより、RP は、異なる IdP からのサブジェクトを誤って混同することなく、複数の IdP と対話することができる。</p>

<p>アサーションには、サブスクライバに関する追加<strong>属性を含めてもよい[MAY]</strong>。<a href="/800-63-4-2ndPD/sp800-63c/Federation/#privacy-reqs">セクション3.9には</a>、アサーションに属性を提示するためのプライバシー要件 が記載されている。RP は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#s-identity-api">第 3.11.3 節で</a>説明されているように、アサーション受信と同じ応答で、または他のメカニズ ムを介して、ID API への限定的な<strong>アクセスを与えられてもよい[MAY]</strong>。RP は、この API を使用して、アサーション自体に含まれないサブスクライバの追加 ID 属性を取得できる。</p>

<p>アサーションの有効時間ウィンドウは、発行から有効期限までの時間である。このウィンドウは、RPがアサーションを処理し、サブスクライバのローカル・ アプリケーション・セッションを作成するのに十分な大きさである必要があるが、 そのような確立に必要な時間よりも長くすべきではない。長寿命のアサーションは、盗まれたり、再生されたりするリスクが高い。短いアサーション有効 期限ウィンドウは、このリスクを軽減する。アサーション有効期限は、RPでのセッションを制限するために<strong>使用してはならない[SHALL NOT</strong>]。詳細については<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#federation-session">、セクション4.7を</a>参照のこと。</p>
<h2 id="assertion-requests" data-section="4">
  
  
    アサーション・リクエスト <a href="#assertion-requests" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>フェデレーショントランザクションが RP によって開始される場合、RP のアサーション要求には以下を<strong>含まなければならない（SHALL）</strong>：</p>

<ol>
  <li>RPの識別子。</li>
  <li>アサーションで返される暗号化ノンス。</li>
</ol>

<p>RPのリクエストはさらに以下を<strong>含むべきである[SHOULD</strong>]：</p>

<ol>
  <li>RP が要求する ID 属性のセットと RP での使用目的。これは、信頼契約によって許可される もののサブセットである。</li>
  <li>IdP における認証イベントの要件</li>
</ol>

<p>フェデレーション・トランザクションは、常に FAL2 以上の RP によって開始されることに注意。</p>
<h2 id="presentation" data-section="4">
  
  
    アサーション・プレゼンテーション <a href="#presentation" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>プロトコルの仕様に応じて、RP と IdP は 2 つの方法で互いに通信する。これは、アサーションが IdP から RP に渡される 2 つの方法をもたらす：</p>

<ul>
  <li>加入者が直接関与しない、RP と IdP 間の直接接続による<em>バックチャネル</em>。</li>
  <li><em>フロント・チャンネルは</em>、加入者と加入者のブラウザを含むリダイレクトを使用するサードパーティを経由する。</li>
</ul>

<p>各モデルにはトレードオフがあるが、いずれもアサーションの適切な検証を必要とする。アサーションはまた、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#proxied">3.2.3 節で</a>詳述するように、異なる提示方法を使用する IdP と RP 間のフェデレーションを促進するために、プロキシ<strong>されてもよい（MAY）</strong>。</p>
<h3 id="back-channel" data-section="4">
  
  
    バックチャンネル・プレゼンテーション <a href="#back-channel" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-11">図 11 に</a>示す<em>バックチャネル</em>提示モデルでは、サブスクライバは、通常フロントチャネルを通 じて RP に提示するアサーション参照を渡される。アサーション参照自体は、サブスクライバに関する情報を含まず、攻撃者による改ざんおよび捏造に耐性を<strong>持たなければならない（SHALL）</strong>。RP は、アサーション参照を IdP に提示して、アサーションを取得する。これをどのように実現するかは、プロトコルによって異なる。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">OIDC]</a>の認証コード・フローおよびハイブリッド・フローのいくつかの形態では、アサーション （ID トークン）は、アサーション参照（認証コード）と交換にバックチャネルに提示される。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML-bindings">SAML-Bindings]</a>のアーティファクト・バインディング・プロファイルでは、SAML アサーションがバックチャネルに提示される。</p>

<div latex-literal="true" class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\クリアページ</code></pre></div></div>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-63cSec7-Figure1" name="fig-11">図11.バックチャンネル・プレゼンテーション</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/back-channel.png" alt="Diagram of the back-channel presentation model for communicating assertions to the RP." title="Back-channel Presentation" latex-src="back-channel.pdf" latex-fig="11" latex-place="h" /></p>

<p><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-11">図11に</a>示すように、バックチャンネル提示モデルは3つのステップから構成される：</p>

<ol>
  <li>IdP は、フロント・チャネルを通じてサブスクライバにアサーション参照を送信する。</li>
  <li>サブスクライバは、フロントチャネルを介して RP にアサーション参照を送信する。</li>
  <li>RP は、バックチャネルを介して、アサーション参照と RP 資格情報を IdP に提示する。IdP は認証情報を検証し、アサーションを返す。</li>
</ol>

<p>アサーション・リファレンス</p>

<ol>
  <li>単一のRPによる使用に限定さ<strong>れなければならない</strong>。</li>
  <li>シングルユースで<strong>なければならない</strong>。</li>
  <li>時間制限を<strong>設けなければならず（SHALL）</strong>、有効期限は5分以内と<strong>すべきで ある（SHOULD</strong>）。</li>
  <li>RP の認証とともに IdP に提示<strong>しなければならない（SHALL）</strong>。</li>
  <li>攻撃者が予測または推測可能で<strong>あってはならない</strong>。</li>
</ol>

<p>このモデルでは、RP が直接 IdP にアサーションを要求するため、第三者（加入者自身を含む）による傍受や操作の可能性が最小化される。 バックチャネル方式では、より多くのネットワーク・トランザクションが必要となるが、情報はそれを必要とする当事者のみに限定される。RP は、リクエストの結果として IdP から直接アサーションのみを取得することを予期しているため、 攻撃対象は減少する。その結果、RP にアサーションを直接注入することはより困難であり、この提示方式は FAL2 以上で推奨される。 IdP と RP はすでに直接接続されているため、バックチャネル提示方式は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#s-identity-api">3.11.3 節で</a>説明する ID API の使用を容易にする。</p>

<p>アサーション参照(単一聴衆)が複数聴衆アサーションになることは技術的には可能であるが、 このような状況になる可能性は低いことに注意。このため、バックチャネル提示は、実質的に単一聴衆アサーションでの使用に限定される。</p>

<p>IdP からサブスクライバへの、およびサブスクライバから RP へのアサーション・リファレンスの伝達は、 認証された保護されたチャネルを介して行われる<strong>ものとする。</strong>RP から IdP へのアサーション・リファレンスの伝達、および IdP から RP へのアサーションの伝達は、 認証された保護されたチャネルを介して行われる<strong>ものとする。</strong></p>

<p>RP は、クロスサイト・スクリプティング保護、フェデレーション・トランザクションの正しい ステージの外でのアサーション参照の拒否、または<a href="/800-63-4-2ndPD/sp800-63c/Federation/#injection-protection">第 3.10.1 節で</a>議論される他の許容される技法の 使用によって、製造またはキャプチャされたアサーション参照のインジェクションから自らを保護<strong>しなければならない（</strong> <strong>SHALL</strong> <strong>）</strong>。この例については、<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">[</a> <a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FAPI">FAPI]</a>などの追加セキュリティプロファイルを使用した<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">[OIDC]</a>の認可コードフローなど、<a href="/800-63-4-2ndPD/sp800-63c/examples/#rp-auth">第 10.12 節で</a>説明する。</p>

<p><a href="/800-63-4-2ndPD/sp800-63c/Federation/#proxied">第 3.2.3 節に</a>記載されるフェデレーション・プロキシでは、上流の IdP オーディエンスは、 プロキシに対するアサーション参照およびアサーションを制限し、プロキシは、下流の RP に対し て、新たに作成されるアサーション参照またはアサーションを制限することに注意すること。</p>
<h3 id="front-channel" data-section="4">
  
  
    フロント・チャンネル・プレゼンテーション <a href="#front-channel" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-12">図 12 に</a>示す<em>フロントチャネル</em>提示モデルでは、IdP はアサーションを作成し、加入者のユー ザ・エージェントなどの第三者によって RP に送信する。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">OIDC]</a>の暗黙フローおよびハイブリッド・フローのいくつかの形式では、アサーション （ID トークン）はフロント・チャネルで提示される。 <a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML-WebSSO"> SAML-WebSSO]</a> で定義されている SAML Web SSO プロファイルでは、SAML アサーションがフロントチャネルに提示される。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#fig-13" name="fig-12">図12.フロントチャンネルのプレゼンテーション</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/front-channel.png" alt="Diagram of the front-channel presentation model for communicating assertions to the RP." title="Front-channel Presentation" latex-src="front-channel.pdf" latex-fig="12" latex-place="h" /></p>

<p>フロントチャネル・プレゼンテーション手法は、アサーションを IdP および RP 以外の当事者に公開するため、アサーションに含まれる PII およびその他の情報が漏えいするリスクが高まる。さらに、アサーションが攻撃者に捕捉され、再生される攻撃対象が増加する。結果として、他のメカニズムが利用可能な場合は、フロントチャネル・ プレゼンテーションを使用しないことが推奨される。</p>

<p>RP は、アサーション識別子を使用して、指定されたアサーションがアサーションの有効期間中に最大 1 回提示されることを保証<strong>しなければならない（SHALL）</strong>。</p>

<p>RP は、クロスサイト・スクリプティング保護、フェデレーション・トランザクションの正しいステー ジ外のアサーションの拒否、または<a href="/800-63-4-2ndPD/sp800-63c/Federation/#injection-protection">第 3.10.1 節で</a>説明するその他の許容される技法を使用することで、製 造またはキャプチャされたアサーションのインジェクションから自身を保護<strong>しなければならない（SHALL）</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#injection-protection">。</a></p>

<p>IdP からサブスクライバへのアサーションの伝達、およびサブスクライバから RP へのアサーションの伝達は、 認証された保護チャネルを介して行わ<strong>れなければならない（SHALL）</strong>。</p>

<p>汎用の IdP では、フロントチャネル通信は HTTP リダイレクトを使用して達成されるのが一般的であ り、この場合、アサーションのコンテンツは HTTP リクエスト URL の一部として利用可能 になる。HTTP エコシステムの性質上、これらのリクエスト URL は、アクセスログやブラウザ履歴など、予期しない場所で利用できることがある。これらのログおよびその他の成果物は、フェデレーション・トランザクショ ンを過ぎても生き続け、他のコンテキストで利用可能になる傾向があるため、アサーションを読み取る ための攻撃対象が増加する。結果として、PII を含むアサーションのフロントチャネル提示に HTTP リダイレクトを使用する IdP は<strong>、</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#encrypted-assertion">第 3.12.3 節で</a>説明するように、アサーションを暗号化<strong>しなければならない（SHALL）</strong>。</p>

<h1 id="wallet" data-section="5">
  
  
    加入者が管理する財布 <a href="#wallet" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは規範的なものである。</em></p>

<p>IdP が、デジタル・ウォレットとしてであれ自己発行 ID プロバイダとしてであれ、加入者 が制御する装置上で実行される場合、IdP は<em>加入者が制御するウォレットとして</em>知られ、以下の要件が適 用される。</p>

<p>サブスクライバが管理するウォレットは、ウォレットのオンボーディングやRPへの属性の解放など、ウォレットの 署名鍵の使用を必要とするアクションを実行するために、アクティベーションファクターの提示を要求<strong>しなけれ ばならない（SHALL）</strong>。</p>
<h2 id="wallet-activation" data-section="5">
  
  
    ウォレットのアクティベーション <a href="#wallet-activation" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>サブスクライバが管理するウォレットは<strong>、</strong>以下のアクションのために、サブスクライバからのアクティベー ション・ファクターの提示を要求<strong>しなければならないものとする</strong>：</p>

<ul>
  <li>プロビジョニング・プロセスにおいて、署名キーの証明を CSP に提供する。</li>
  <li>RPに提出するアサーションに署名する。</li>
</ul>

<p>サブスクライバが管理するウォレットは、ウォレットの署名鍵の使用を伴う他の操作の前に、活性化因子の提 示を要求<strong>するべきである(SHOULD)</strong>。ウォレットは、サブスクライバの関与を必要とせずに、以前に発行された属性バンドル の再発行を<strong>要求してもよい[MAY]</strong>。</p>

<p>活性化因子の提出は、ホストデバイス（スマートフォンなど）のロック解除とは別の操作で<strong>なければならな い（SHALL</strong>）が、ホストデバイスのロック解除に使用された同じ活性化因子を、活性化操作で<strong>使用してもよい （MAY）</strong>。機関は、（機関が決定した）短い非アクティブ・タイムアウトおよび上記の要件を満たすデバイスのアクティベー ション・ファクタを持つように制約されている、（例えば、モバイル・デバイス管理を介して）CSP によって、または CSP に代わって管理されるサブスクライバ管理ウォレットについては、この要件を<strong>緩和してもよい（MAY）</strong>。認証機関のアクティブ化要因に関する補足説明は、<a href="/800-63-4-2ndPD/sp800-63b/authenticators/#s-5-2-10" latex-href="#ref-SP800-63B">[SP800-63B]のセクション 3.2.10</a> に記載されている。</p>
<h2 id="federation-transaction" data-section="5">
  
  
    連盟取引 <a href="#federation-transaction" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>加入者が管理するウォレットとの連携トランザクションは、加入者のデバイスを加入者アカウントの IdP として確立し、RP で加入者の認証セッションを作成する。プロセスを<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#fig-13">図 13</a> に示す。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/Wallets/#fig-1" name="fig-13">図13.加入者が管理するウォレットとのフェデレーション</a></p>

<p><img src="/800-63-4-2ndPD/sp800-63c/images/subscriberidp.png" alt="Overview diagram of federated authentication process using a subscriber-controlled wallet." title="Subscriber-Controlled Wallet" latex-src="subscriberidp.pdf" latex-fig="13" latex-place="p" /></p>

<p>加入者が管理するウォレットとのフェデレーション取引は、いくつかのステップを経て行われる：</p>

<ol>
  <li>CSP はサブスクライバの身元を証明し、サブスクライバ・アカウントを作成する。</li>
  <li>CSP はウォレットをサブスクライバ・アカウントに提供し、サブスクライバはサブスクライバ・アカウントの 認証子を検証する。</li>
  <li>ウォレットは CSP から署名された属性バンドル を受け取り、ウォレットが IdP として機能することを可能にする。</li>
  <li>RP は、通常サブスクライバのアクションによって、ウォレットに連携認証を要求する。</li>
  <li>加入者は認証要素を通してウォレットをアクティブにする。</li>
  <li>ウォレットは、ウォレットで利用可能な属性バンドルに基づいてアサーションを作成する。</li>
  <li>財布は RP にアサーションを提示する。</li>
  <li>RP はアサーションを検証する。</li>
  <li>RPは加入者の認証セッションを作成する。</li>
</ol>
<h2 id="trust-agreements" data-section="5">
  
  
    信託契約 <a href="#trust-agreements" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>サブスクライバが管理するウォレットを含むトランザクションの信頼契約は、RP と CSP の間で確立さ<strong>れなければならない（SHALL）</strong>。信頼契約は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#authorities">セクション 3.4.2</a> で説明されているように、フェデレーション・オーソリティを使用することで<strong>促進してもよい（MAY）</strong>。</p>

<p>ほとんどの場合、RP は(IdP として機能する)ウォレットと直接的な信頼関係を持たず、代わりにウォレットと CSP との確立された関係を通じてウォレットを過渡的に信頼する。この関係は、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#attribute-bundles">セクション 3.11.1</a> で説明されているように、属性バンドルによって検証することができる。ウォレットは通常、信頼合意を確立するプロセスに関与しないが、RP と CSP の間の信頼合意は、アプリオリまたはサブスクライバ主導のいずれかの方法で達成することができる。</p>

<p>信託契約には以下を<strong>含めなければならない</strong>。</p>

<ul>
  <li>CSP が属性バンドルでウォレットに提供するサブスクライバ属性のセット。</li>
  <li>ウォレットが RP に提供できるサブスクライバ属性のセット。</li>
  <li>CSP が代理できるサブスクライバ・アカウントの母集団。</li>
  <li>ウォレットから入手可能なxAL</li>
</ul>

<p>サブスクライバ属性の解放は、<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-runtime-decision">セクション4.6.1.</a>3に記載されているように、ウォレットが管理する実行時 決定を用いて管理さ<strong>れなければならない[SHALL]</strong>。認可されたパーティはサブスクライバで<strong>なければならない(SHALL)</strong>。</p>

<p>以下の条件は、ランタイム決定中に加入者に開示さ<strong>れなければならない（SHALL）</strong>：</p>

<ul>
  <li>RP が要求する加入者属性のセット（利用可能な属性のサブセット）。</li>
  <li>RPが要求する各属性の目的</li>
  <li>RPが要求するxAL</li>
</ul>

<p>加入者に開示されるすべての情報は、<a href="/800-63-4-2ndPD/sp800-63c/usability/#usability">セクション8で</a>説明されているように、理解可能で実行可能な方法で伝達される必要があることに留意されたい。</p>

<p>トラスト契約内で FAL3 が許可され、ウォレット自身以外の認証子が FAL3 での使用を許可される場合、トラスト契約は、鍵の 保持者アサーションおよびバインドされた認証子に関して以下の条件を規定<strong>しなければならない（</strong> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#idp-managed-bound-authn">第 3.14 項</a>および<a href="/800-63-4-2ndPD/sp800-63c/Federation/#bound-authn">第 3.15 項</a>参照<strong>）</strong>：</p>

<ul>
  <li>ウォレットの提示が、鍵保有者のアサーション要件に十分であるとみなされるかどうか。</li>
  <li>ウォレット以外の鍵所有者のアサーションを RP が検証できる手段（一般的な信頼できる PKI システムなど）。</li>
  <li>RP が、（属性ベースのアカウント解決や事前プロビジョニングなど）特定の RP 加入者アカウントに、ウォレット 以外の鍵所有者のアサーションを関連付けることができる手段。</li>
  <li>バインドされた認証子がRPによって提供されるか、加入者によって提供されるか。</li>
  <li>サブスクライバが提供するバインド認証子に使用されるバインド・セレモニーの文書化</li>
</ul>
<h2 id="scidp-provisioning" data-section="5">
  
  
    加入者管理ウォレットのプロビジョニング <a href="#scidp-provisioning" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>CSP がサブスクライバが管理するウォレットをプロビジョニングする場合、そのプロセスには以下の手順が含まれるも<strong>のとする（SHALL）</strong>：</p>

<ol>
  <li>加入者は、加入者アカウントにバインドされた 1 つ以上の認証子を使用して、CSP のプロビジョニング・ システムに認証を行う。</li>
  <li>加入者は、アクティベーション・ファクターを使ってウォレットをアクティベートする。</li>
  <li>ウォレットはその署名鍵の所有権を CSP に証明する。</li>
  <li>CSP は、サブスクライバの属性とウォレットの署名鍵（またはその鍵への参照）を含む 1 つ以上の属性バンドル を作成する。</li>
  <li>ウォレットは、後でRPに提示するために属性バンドルを保存する。</li>
</ol>

<p>サブスクライバが管理するウォレットは、CSP とのプロビジョニング要求ごとに異なる署名鍵を生成し、使用し<strong>てもよい（MAY）</strong>。</p>

<p>CSP は、要求している各ウォレットに対して一意の属性バンドルを作成<strong>しなければなりません（SHALL）</strong>。</p>
<h3 id="deprovisioning-the-subscriber-controlled-wallet" data-section="5">
  
  
    加入者管理ウォレットのデプロビジョニング <a href="#deprovisioning-the-subscriber-controlled-wallet" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>CSP は<strong>、</strong>サブスクライバが管理するウォレットをデプロビジョニングする手段を提供する<strong>ものとします。</strong>デプロビジョニング・プロセスは、サブスクライバ・アカウントが終了し、それによってダウンストリームのフェデレーション・アクションが無効になる場合、またはデバイスの紛失、盗難、侵害によりウォレットを終了する必要がある場合に使用される。</p>

<p>これを達成するため、CSP は、有効期限が限定された属性バンドルを発行し、各ウォレットに固有の属性バ ンドルを発行する<strong>ものとします（</strong> <strong>SHALL</strong> <strong>）</strong>。CSP は、属性バンドル のステータス（特定のバンドルが CSP によって失効されたかどうかなど）を独自に検証する手段を提供<strong>すべきで ある（SHOULD）</strong>。そのようなサービスが提供される場合、そのサービスは、特定の RP で特定の属性バンドルが使用されていることを CSP が警告されないように、プライバシーを保護する方法で展開される<strong>ものとする（SHALL）</strong>。</p>
<h2 id="discovery-and-registration" data-section="5">
  
  
    ディスカバリーと登録 <a href="#discovery-and-registration" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>サブスクライバが管理するウォレットでフェデレーション・トランザクションを実行するために、RP はまず、信頼協定で規定されているように、安全なプロセスを通じて CSP の属性バンドル署名公開鍵を決定<strong>しなければならない（SHALL）</strong>。システムによっては、これは CSP が管理していることが既知の URL から CSP の属性バンドル署名公開鍵を取得することで達成される。他のシステムでは、デプロイされる前に、RP が CSP の公開鍵で手動で構成される。</p>

<p>RP は、フェデレーション・トランザクションで提示される、CSP によって署名された属性バンドルの 一部として、サブスクライバが管理するウォレットの識別子およびアサーション署名公開鍵を学習する。RP は、提示される公開鍵が問題の属性バンドルを提示するために信頼できることを保証するために、CSP のウォレットのオンボーディング・プロセスを信頼する。</p>

<p>RPはまた、サブスクライバが管理するウォレットに登録する必要がある。ほとんどの場合、これはフェデレーショントランザクショ ン中に RP がそのプロパティを紹介する動的なプロセスであると予想される。サブスクライバが管理するウォレットの性質上、特定の RP がウォレットのインスタンスに事前登録することは困難ですが、このユースケースは信頼協定に規定された信頼できるサードパーティを使用することで容易にすることができます。例えば、エコシステムには発見と登録を管理する集中型サービスがある。RPがエコシステムに参加すると、信頼できるサービスに登録し、CSPの公開鍵をダウンロードし、ウォレットで使用する識別子を受け取る。ウォレットがCSPによってオンボードされると、ウォレットはエコシステム内で有効なRP識別子のリストを見つけることができる場所を知らされる。RP がウォレットに接続すると、ウォレットは RP が直接ウォレットに登録しなくても RP の識別子を検証できる。同様に、RP はウォレットの署名鍵が CSP の公開鍵で署名された属性バンドルで提示されていることで、それを検証することができる。</p>
<h2 id="authentication-and-attribute-disclosure" data-section="5">
  
  
    認証と属性開示 <a href="#authentication-and-attribute-disclosure" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>連携認証が発生するか、または属性が渡される可能性があるかどうかの決定は、認可されたパーティの役割を果たすサブスクライバが決定<strong>しなければならない（SHALL）</strong>。</p>

<p>サブスクライバが管理するウォレットは、CSP から属性バンドル内の属性のサブセットを選択的に開 示する手段を提供<strong>するべきである（SHOULD）</strong>。</p>

<p>CSP は、サブスクライバの苦情または問題（例えば、サブスクライバが不正確な属性値を特定した場合、 またはサブスクライバが管理するウォレットをデプロイする必要がある場合）の救済のための効果的なメカニズムを提供<strong>しなければならない（SHALL）</strong>。救済メカニズムの追加要件および考慮事項については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#redress">第 3.4.3 節を</a>参照のこと。</p>
<h2 id="assertion-requests" data-section="5">
  
  
    アサーション・リクエスト <a href="#assertion-requests" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>フェデレーション・トランザクションが RP によって開始される場合、RP のアサーション要求には以下が 含ま<strong>れなければならない（SHALL）</strong>：</p>

<ol>
  <li>RPの識別子。</li>
  <li>暗号ノンス</li>
  <li>RP が要求する ID 属性のセットと、RP での使用目的。</li>
</ol>

<p>フェデレーション・トランザクションは、常に FAL2 以上の RP によって開始されることに注意。</p>
<h2 id="assertion-contents" data-section="5">
  
  
    アサーション内容 <a href="#assertion-contents" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>サブスクライバが管理するウォレットからのアサーションは<strong>、</strong>以下を含む<strong>ものとする：</strong></p>

<ol>
  <li>CSP からの署名付き属性バンドル。</li>
  <li>サブジェクト識別子：アサーションが適用される当事者（すなわちサブスクライバ）の識別子。</li>
  <li>発行者識別子：アサーションの発行者（すなわちサブスクライバが管理するウォレット）の識別子。</li>
  <li>視聴者識別子：アサーションを消費することを意図する当事者（すなわち RP）の識別子。</li>
  <li>発行時刻：ウォレットがアサーションを発行した時刻を示すタイムスタンプ。</li>
  <li>有効期限：有効期限：サブスクライバを認証し、RP で認証セッションを開始する目的で、RP がアサーション を有効な<strong>ものとして受け入れてはならない</strong>期間。これは通常、発行タイムスタンプに加えて、アサーションの有効期限タイムスタンプによって通知される。</li>
  <li>アサーション識別子：このアサーションを一意に識別する値で、攻撃者が以前のアサーションを再生するのを防ぐために使用される。</li>
  <li>認証時間：サブスクライバが最後にウォレットのアクティベーションファクターを使用した時刻を示すタイムスタンプ。</li>
  <li>ノンス：RPから提供されている場合は、暗号化ノンス。</li>
  <li>署名：アサーション全体をカバーする非対称暗号を使用したデジタル署名。</li>
</ol>

<p>すべてのアサーションは<strong>、</strong>フェデレーション・トランザクションの以下の側面を判断するのに十分な情報を<strong>含まなけれ ばならない（SHALL）</strong>：</p>

<ol>
  <li>アサーションで表されるサブスクライバ・アカウントの IAL、または IAL がアサートされていないことを示す。</li>
  <li>財布が意図するフェデレーション・プロセスのFALは、アサーションによって表される。</li>
</ol>

<p>FAL3 において、アサーションは以下のいずれかを<strong>含まなければならない（SHALL）</strong>：</p>

<ul>
  <li>鍵の所有者アサーションの公開鍵、鍵識別子、またはその他の識別子。これは、サブスクライバが管理するウォレットがアサーションに署名するために使用する鍵と同じで<strong>あってもよい（MAY）</strong>。</li>
  <li>このアサーションを処理するために、バインドされた認証子の検 証が必要であることを示すインジケータ。</li>
</ul>

<p>CSP からの署名付き属性バンドルには、以下を含める<strong>ものとします</strong>：</p>

<ol>
  <li>サブスクライバが管理するウォレットがアサーションに署名するために使用する鍵の公開鍵または鍵識別子。</li>
  <li>発行時刻：CSP が属性バンドルを発行した日時を示すタイムスタンプ。</li>
  <li>有効期限：サブスクライバを認証し、RP で認証セッションを開始する目的で、RP が属性バンドル を有効な<strong>ものとして受け入れてはならない</strong>期間。これは通常、発行タイムスタ ンプに加えて、アサーションの有効期限タイムスタンプによって通知される。</li>
  <li>IAL: 属性バンドルで表現されるサブスクライバーアカウントのIALのインジケータ、 またはIALがアサートされていないことの表示。</li>
  <li>署名：属性バンドル全体をカバーする非対称暗号を使用したデジタル署名。</li>
</ol>

<p>追加の ID 属性と派生属性値を属性<strong>バンドルに含めてもよい（MAY）</strong>。これらの属性は、サブスクライバがウォレットソフトウェアを通じて、RPにバンドル のどの部分を開示するかを決定できる、選択的開示方法を使用して利用可能に<strong>なるべ きである[SHOULD</strong>]。</p>

<p>アサーションに含まれるが、署名された属性バンドルの外部にあるID属性は、自己アサー トと見なさ<strong>れるものとする[SHALL]</strong>。RPは、これらの追加属性を帯域外で<strong>検証してもよい[MAY]</strong>。</p>

<p>利用者が管理するウォレットは、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#key-storage">第 3.5.2 項で</a>説明するように、エクスポート不可能な鍵ストレージを使用<strong>す べきである</strong>。</p>
<h2 id="assertion-presentation" data-section="5">
  
  
    アサーション・プレゼンテーション <a href="#assertion-presentation" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>アサーションは、認証された保護されたチャネルを通してRPに提示さ<strong>れなければならない[SHALL]</strong>。</p>

<p>提示には、RPのリクエストの暗号化ノ ンスが存在する場合、それを<strong>含めなければならない[SHALL]</strong>。RPはフェデレーション プロトコルに従ってnonceを検証<strong>しなければならない[SHALL]</strong>。</p>

<p>アサーションに PII が含まれ、提示メカニズムがウォレットまたは RP 以外のコンポーネントを介してアサーションを通過させる場合、アサーションは暗号化さ<strong>れるべきである（SHOULD）</strong>。</p>

<p>RP は、クロスサイト・スクリプティング保護、フェデレーション・トランザクションの適切なステー ジ外でのアサーションの拒否、または<a href="/800-63-4-2ndPD/sp800-63c/Federation/#injection-protection">第 3.10.1 節で</a>議論されるその他の許容される技法の使用により、製 造またはキャプチャされたアサーションの注入から自身を保護<strong>しなければならない（SHALL）</strong>。可能な場合、IdP は、RP にアサーションを配信する際に、HTTP リダイレクトの代わりにプラットフォーム API を使用<strong>すべきである（SHOULD）</strong>。</p>

<p>サブスクライバが管理するウォレットからのアサーションには、CSP からの署名済み属性バンドル内にウォレットの 署名鍵への参照が常に含まれるため、サブスクライバが管理するウォレットからのアサーションは、本ガ イドラインのその他の要件がすべて満たされている限り、FAL3 に到達するための鍵所有者アサーションとし て<strong>使用してもよい（MAY）</strong>。鍵所有者アサーションに関するその他の要件については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#idp-managed-bound-authn">第 3.14 節を</a>参照のこと。</p>
<h2 id="assertion-validation" data-section="5">
  
  
    アサーション検証 <a href="#assertion-validation" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>RP は<strong>、</strong>署名付き属性バンドルを発行する CSP からの暗号鍵を使用して、アサーション内のすべての署名付き 属性バンドルの署名を検証する<strong>ものとする。</strong>RP は<strong>、</strong>署名済み属性バンドル内の識別された暗号鍵を使用して、アサーションの署名を検証する<strong>ものとする。</strong></p>

<p>RP は、以下のすべてが真であることを確認することで<strong>、</strong>アサーションを検証<strong>しなければならない（SHALL）</strong>：</p>

<ul>
  <li><em>発行者の検証</em>：アサーションが RP が期待するウォレットから発行されたことを確認する。</li>
  <li><em>時間の検証</em>：有効期限と発行時間が現在のタイムスタンプの許容範囲内であることを確認する。</li>
  <li><em>対象者の制限</em>：この RP がアサーションの意図された受信者であることを保証する。</li>
  <li><em>Nonce</em>:RPのリクエストに含まれる暗号化Nonceがプレゼンテーションに 含まれることを保証する。</li>
  <li><em>取引条件</em>：アサーションが表す IAL、AAL、FAL が、適用される信託契約に基づき許容されるものであること。</li>
</ul>

<p>さらに、発行者は、RPが問い合わせ可能なステータスリストなど、与えられた属性バンドル の有効性を判断するためのオンラインメカニズムを利用<strong>可能にしてもよい(MAY)</strong>。</p>
<h2 id="rp-subscriber-accounts" data-section="5">
  
  
    RP加入者アカウント <a href="#rp-subscriber-accounts" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>RP 加入者アカウントは、ジャストインタイムまたはエフェメラル・プロビジョニング・モデルのみを 使用して管理<strong>しなければならない（</strong> <a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#provisioning">セクション 4.6.3</a> 参照）。これらのいずれの場合も、RP は、ウォレットからのアサーションの検証に成功した後にのみ、RP 加入者アカウントを作成し、連携識別子と関連付ける。</p>

<p>RP は<strong>、</strong>信託契約の一部として、加入者情報の管理方法を開示<strong>しなければならない</strong>。RP は<strong>、</strong>RP 加入者アカウントから情報を修正および削除するために、加入者に効果的な救済手 段を提供<strong>しなければならない（SHALL）</strong>。救済メカニズムの追加要件および考慮事項については、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#redress">第 3.4.3 節を</a>参照のこと。</p>

<h1 id="security" data-section="6">
  
  
    セキュリティ <a href="#security" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは参考になる。</em></p>

<p>連携認証プロセスには、CSP、IdP、および RP を含む複数のコンポーネント間の調整が含まれるため、攻撃者が連携 ID ト ランザクションを侵害する機会が増え、攻撃が成功するとさらなる影響が生じる。このセクションでは、フェデレーションに適用できる攻撃および緩和策の多くを要約する。</p>
<h2 id="federation-threats" data-section="6">
  
  
    連盟の脅威 <a href="#federation-threats" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>非フェデレート認証の場合と同様に、攻撃者の動機は通常、RPが提供するリソースまたはサ ービスへのアクセス（またはより高いレベルのアクセス）を得ることである。攻撃者は、サブスクライバになりすまそうとする場合もある。不正または侵害された IdP、RP、ユーザーエージェント（ブラウザなど）、および典型的なフェデレーション トランザクションの外部にいる当事者が、潜在的な攻撃者である。攻撃を達成するために、アサーションおよびアサーション参照を傍受または変更する可能性がある。さらに、2 つ以上のエンティティが、アサーション・データの完全性または機密性を 直接侵害することによって、フェデレーション・プロトコルの破壊を試みる可能性もある。これらのタイプの脅威の目的上、権限を超えて試みる認可された当事者は、攻撃者とみなされる。</p>

<p>連携システムでは、IdP に対する攻撃が成功すると、ID およびセキュリティ情報をその IdP に依存する RP に伝播する可能性がある。結果として、ある機関の RP を標的にした IdP に対する攻撃は、別の機関の RP に拡散する可能性がある。さらに、単一の加入者アカウントが連携システムで複数の RP に利用可能になるため、IdP が異なる RP に提供できる証明戦略への調整および証明プロセスへの可視性には、潜在的な制限がある。ただし、IdP が加入者アカウント集団ごとに異なるユースケースをサポートできる場合、各 RP との信頼契約でこれらの条件を変えることができる。さらに、IdPは各RPに異なる属性を開示できるが、加入者アカウントは、すべてのRPが利用可能なすべての属性の結合を含む必要がある。このプラクティスは、RPに対する攻撃の被害を制限するが、逆にIdPを攻撃者にとってより説得力のある標的にする。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/security/#table-2" name="table-2">表2.連盟の脅威</a></p>

<table latex-table="2" latex-caption="Federation Threats" latex-columns="p@0.20\textwidth,p@0.35\textwidth,p@0.35\textwidth">
  <thead>
    <tr>
      <th>連盟の脅威／攻撃</th>
      <th>説明</th>
      <th>例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>アサーション製造または修正</td>
      <td>攻撃者は偽のアサーションを生成する。</td>
      <td>侵害された IdP は、適切に認証されていない請求者の身元をアサートする。</td>
    </tr>
    <tr>
      <td> </td>
      <td>攻撃者は既存のアサーションを変更する。</td>
      <td>認証アサーションの AAL を変更する侵害されたプロキシ</td>
    </tr>
    <tr>
      <td>アサーション開示</td>
      <td>第三者から見えるアサーション</td>
      <td>ネットワーク監視により、記録された加入者アドレスが外部に漏れる</td>
    </tr>
    <tr>
      <td>IdPによるアサーションの否認</td>
      <td>後にIdPがトランザクションに署名していないと主張</td>
      <td>ユーザがRPで不正なクレジットカード取引を行い、IdPがログインしていないと主張する。</td>
    </tr>
    <tr>
      <td>加入者によるアサーションの否認</td>
      <td>利用者が取引を行わなかったと主張</td>
      <td>ユーザー契約（契約書など）の強制ができない</td>
    </tr>
    <tr>
      <td>アサーション・リダイレクト</td>
      <td>アサーションは意図しない文脈で使われることがある</td>
      <td>侵害されたユーザーエージェントがアサーションを攻撃者に渡し、攻撃者はそれを別の場所で使用する。</td>
    </tr>
    <tr>
      <td>アサーション再利用</td>
      <td>アサーションは同じRPで複数回使用できる。</td>
      <td>攻撃者が自身のセッションを認証するために使用する、傍受されたアサーション</td>
    </tr>
    <tr>
      <td>アサーション置換</td>
      <td>攻撃者が別の加入者向けのアサーションを使用した。</td>
      <td>IdPとRP間のセッションハイジャック攻撃</td>
    </tr>
  </tbody>
</table>
<h2 id="federation-threat-mitigation-strategies" data-section="6">
  
  
    フェデレーションの脅威軽減戦略 <a href="#federation-threat-mitigation-strategies" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>上記の脅威を軽減するためのメカニズムを<a href="/800-63-4-2ndPD/sp800-63c/security/#table-3">表3に</a>示す。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/security/#table-3" name="table-3">表3.フェデレーションの脅威を軽減する</a></p>

<table latex-table="3" latex-caption="Mitigating Federation Threats" latex-columns="p@0.20\textwidth,p@0.55\textwidth,p@0.15\textwidth">
  <thead>
    <tr>
      <th>連盟の脅威／攻撃</th>
      <th>脅威軽減メカニズム</th>
      <th>参考文献</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>アサーション製造または修正</td>
      <td>IdP でアサーションに暗号署名し、RP で検証する。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/Federation/#identifiers-keys">3.5</a>,<a href="/800-63-4-2ndPD/sp800-63c/Federation/#signed-assertion">3.12.2</a></td>
    </tr>
    <tr>
      <td> </td>
      <td>IdP を認証する認証済み保護チャネル上でアサーションを送信する。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#presentation">4.11</a></td>
    </tr>
    <tr>
      <td> </td>
      <td>アサーションに推測不可能なランダム識別子を含める。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/Federation/#assertion-id">3.12.1</a></td>
    </tr>
    <tr>
      <td>アサーション開示</td>
      <td>RPを認証する認証済み保護チャネル上でアサーションを送信する。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#assertions">4.9</a>,<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#assertion-contents">5.8</a></td>
    </tr>
    <tr>
      <td> </td>
      <td>特定の RP のアサーションを暗号化する（相互に認証された保護チャネルを使用することで実現できる）。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/Federation/#encrypted-assertion">3.12.3</a></td>
    </tr>
    <tr>
      <td>IdPによるアサーションの否認</td>
      <td>IdP で否認防止をサポートする鍵を使用してアサーションに暗号署名する。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/Federation/#signed-assertion">3.12.2</a></td>
    </tr>
    <tr>
      <td>加入者によるアサーションの否認</td>
      <td>鍵保有者アサーションまたはバインドされた認証子を伴うアサーションを発行する。認証子所有の証 明により、サブスクライバが RP に参加していることが検証される。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/Federation/#idp-managed-bound-authn">3.14</a> <a href="/800-63-4-2ndPD/sp800-63c/Federation/#bound-authn">3.15</a></td>
    </tr>
    <tr>
      <td>アサーション・リダイレクト</td>
      <td>アサーションが発行された RP（「利用者」）の身元を署名済みコンテンツに含める。</td>
      <td> </td>
    </tr>
    <tr>
      <td>アサーション再利用</td>
      <td>有効期間の短い発行タイムスタンプをアサーションの署名済みコンテンツに含める。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#assertions">4.9</a>,<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#assertion-contents">5.8</a></td>
    </tr>
    <tr>
      <td> </td>
      <td>RP は、構成可能な時間ウィンドウ内で消費されたアサーションを追跡し、指定されたアサーションが 2 回以上使用されないようにする。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/Federation/#assertion-id">3.12.1</a></td>
    </tr>
    <tr>
      <td>アサーション置換</td>
      <td>アサーションに、アサーション・リクエストへの参照、または RP によってリクエストに暗号 的にバインドされたその他の nonce が含まれるようにする。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#assertions">4.9</a>,<a href="/800-63-4-2ndPD/sp800-63c/Wallets/#assertion-contents">5.8</a></td>
    </tr>
    <tr>
      <td> </td>
      <td>バックチャネルモデルのように、リクエストと同じ認証済み保護チャネルでアサーションを送信する。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#back-channel">4.11.1</a></td>
    </tr>
  </tbody>
</table>

<h1 id="privacy" data-section="7">
  
  
    プライバシーへの配慮 <a href="#privacy" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは参考になる。</em></p>
<h2 id="minimizing-tracking-and-profiling" data-section="7">
  
  
    トラッキングとプロファイリングの最小化 <a href="#minimizing-tracking-and-profiling" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>フェデレーションは、RPと加入者に多くの利点を提供するが、加入者がフェデレーション参加者を 信頼する必要がある。<a href="/800-63-4-2ndPD/sp800-63c/Federation/#common">第 3 節</a>および<a href="/800-63-4-2ndPD/sp800-63c/Federation/#ppi">第 3.3.1 節は</a>、多くの技術的要件をカバーしているが、その目的は、加入者を追跡お よびプロファイル化する機能の増加から生じるプライバシーリスクを最小化することである。たとえば、加入者が複数の RP に対して認証するために同じ IdP を使用することで、IdP は、フェデレーションがなければ存在しなかった加入者トランザクションのプロファイルを構築することができる。このようなデータが利用可能になることで、加入者が予期または希望しない利用に対して脆弱になり、加入者による連携サービスの導入が阻害される可能性がある。</p>

<p><a href="/800-63-4-2ndPD/sp800-63c/Federation/#privacy-reqs">3.9項では</a>、IdPに対して、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#transmit-subscriber-info">3.9.1</a>項に列挙された目的以外の属性の処理から生じうるプライバシーリスクに見合った予測可能性（PIIと情報システムによるその処理について、個人、所有者、運用者が信頼できる想定を可能にすること）と管理可能性（変更、削除、選択的開示を含むPIIのきめ細かな管理機能を提供すること）の目的を維持するための手段を用いることを求めている。</p>

<p>IdP は、加入者に非 ID サービスを提供することを含め、属性を処理する様々な事業目的を 持つことができる。しかし、当初の収集目的とは異なる目的で属性を処理することは、個人が追加的な処理を予期していない、あるいは快適でない場合、プライバシーリスクを生じさせる可能性がある。IdP は、追加処理から生じるプライバシーリスクに見合った適切な措置を決定することができる。たとえば、適用される法律、規制、または方針がない場合、加入者が要求する非 ID サービスを提供するために属性を処理する場合、同意を得る必要はないかもしれないが、通知によって加入者が処理について信頼できる前提（たとえば予測可能性）を維持することができる。属性の他の処理は、同意を得るか、または特定の属性の使用または開示について加入者により多くのコ ントロールを認める（管理可能性）ことを求める、異なるプライバシーリスクを伴うかもしれない。加入者の同意は意味のあるものである必要がある。したがって、IdP が同意手段を使用する場合、IdP は、ID サービスの提供の条件として、追加的な使用について加入者が受諾するようにすることはできない。</p>

<p>FAL3 で holder-of-key アサーションを使用する場合、通常、IdP と RP の両方で同じ認証子が使用される。この技術要件を満たす認証子では、複数の RP で同じ認証子がさらに使用される可能性が高い。さらに、無関係な RP が同じ認証子を直接認証に使用する可能性もある。このような RP はすべて、ネットワークを通じて加入者を追跡するために、結託し、すべての関係者間で同じ認証 子の使用を開示できる可能性がある。これは、たとえプロバイダごとの識別子が使用されている場合でも、バインドされた認証 子はアサーションとは別に認識可能であるため、同様である。さらに、Holder-of-Key アサーションに適した認証子の多くには、アサーションまたは ID API とは別に送信される ID 属性が含まれている。これらの追加属性は、プライバシー・リスク・アセスメントの対象でなければならない。</p>

<p>提案された処理が許可された処理の範囲外であるかどうか、または適切なプライバシーリスク軽減措置について疑問がある場合は、SAOPに相談すること。</p>

<p>また、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#privacy-reqs">セクション 3.9</a>では、分離可能性（システムの運用要件を超える個人またはデバイスへの 関連付けなしに、PII またはイベントの処理を可能にすること）を提供し、加入者の活動の追跡お よびプロファイリング<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-NISTIR8062">[NISTIR8062]</a>を防止するための技術的手段の使用を推奨している。プロキシされたフェデレーションに関する<a href="/800-63-4-2ndPD/sp800-63c/Federation/#proxied">セクション 3.2.3</a>およびペアワイズ仮 名識別子に関する<a href="/800-63-4-2ndPD/sp800-63c/Federation/#ppi">セクション 3.3.1</a>で概説されているような技術的手段は、運用要件を超える加入者 の追跡またはプロファイリングをより困難にすることにより、ポリシーの有効性を高めることができる。しかし、これらの手段にも限界があり、加入者の属性、統計的な人口統計、および IdP と RP の間で共有される他の種類の情報に基づいて、追跡が依然として行われる可能性がある。</p>

<p>一部のユースケース、特に高い xAL では、システムを保護する手段として、加入者の実世界の ID を追跡することが期待される。どの情報が送信されるかについて加入者に通知し、教育し、加入者がこの情報を確認できるようにす ることは、IdP および RP の責任である。</p>
<h2 id="notice" data-section="7">
  
  
    通知と同意 <a href="#notice" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>フェデレーションにおける加入者の信頼を構築するために、加入者は、自分の情報がど のように処理されるかについて、信頼できる前提を構築できる必要がある。例えば、どのような情報が伝送されるか、トランザクションのどの属性が必須であ るかオプションであるかを理解し、オプションの属性をRPに伝送するかどうかを決定する 能力を持つことは、加入者にとって有用である。従って、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#trust-agreement">第3.4条は</a>、加入者に関する属性がRPに送信される前に、認可された 当事者から肯定的な確認を得ることを要求する。</p>

<p><a href="/800-63-4-2ndPD/sp800-63c/Federation/#ppi-shared">セクション3.3.1.3の</a>ように、一組のRPが共有されるペアワイズ仮名識別子をいつ共有すべきか を判断する際、信頼契約は、RPのそのようなグループ化に対する加入者の理解を考慮し、そのような 理解を支援するために、加入者への効果的な通知の手段を提供する。効果的な通知は、情報処理から発生する可能性のあるプライバシーリスクの評価だけでなく、ユー ザーエクスペリエンス設計基準および調査も考慮に入れる。加入者が処理について持つ可能性のある前提の信頼性や、フェデレーションに関与する様々なエンティティの役割など、考慮すべき要因は様々である。しかし、相当数の加入者が読んだり理解したりしないような、複雑で法律的なプライバシーポリシーや一般利用規約へのリンクは、決して効果的な通知ではない。</p>

<p><a href="/800-63-4-2ndPD/sp800-63c/Federation/#trust-agreement">第3.4条は</a>、どの当事者が通知を行うべきかを規定していない。場合によっては、フェデレーション内の当事者は、通知を提供し同意を得るために、加入者と直接の接点がないこともある。複数の当事者が通知を提供することを選択することはできるが、契約上または信託の枠組み方針を通じて、どの当事者が通知を提供し、確認を得るかを当事者が事前に決定することは、その決定が加入者が通知に注意を払い、十分な情報を得た上で選択できるようにすることを中心とする要素に基づいている限り、許される。</p>

<p>IdP は、加入者の属性にアクセスする可能性のあるすべての RP を加入者に通知する必要がある。RP が<a href="/800-63-4-2ndPD/sp800-63c/GenIdP/#idp-allowlist">4.6.1.1 節に</a>記述された IdP の許可リストにある場合、加入者は実行時に属性の公開に同意するよう促されない。このシングル・サインオン・シナリオにより、加入者はフェデレーション・トランザクショ ンに参加していることに気づかないかもしれないが、よりシームレスなログイン体験が可能となる。IdP は、信頼契約の条項の一部として、許可リストされた RP のリストを加入者に公開する。この情報により、加入者は、どの RP が、どのような状況で、どのような目的で、自分の属性にアク セスできるかを確認できる。</p>

<p>サブスクライバの IdP での実行時決定が、将来のトランザクションを容易にするために、IdP によってサブスクライバのアカウントに保存された場合、IdP は、サブスクライバが実行時決定中に以前に承認された RP を表示し、取り消すこともできるようにする必要がある。このリストには、どの属性が承認され、いつ承認が記録されたかという情報が含まれる。同様に、RP でのサブスクライバの実行時決定が何らかの方法で保存される場合、RP は、サブスクライバが実行時決定中に承認されたあらゆる IdP を閲覧し、取り消すこともできるようにする必要がある。</p>
<h2 id="minimization" data-section="7">
  
  
    データの最小化 <a href="#minimization" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>フェデレーションは、RP に公開されるデータを最小化することを可能にし、加入者のプライバシ ー保護をもたらすことができる。IdP は、RP がそのユースケースで要求する以上の属性を収集することができるが、RP が 明示的に要求した属性のみが IdP から送信される。RP が属性の完全な値を必要としない場合もある。たとえば、RP は加入者が 13 歳以上であるかどうかを知る必要があるが、完全な生年月日を必要としない場合がある。潜在的に機微な PII の収集を最小限にするために、RP は、派生属性値を要求することができる（例：質問：加入者は 13 歳以上ですか。応答：Y/N または合否）。これにより、RP による潜在的に機微で不必要な PII の収集が最小限に抑えられる。したがって、<a href="/800-63-4-2ndPD/sp800-63c/Federation/#protecting-information">第 3.10.2 節では</a>、RP は、実行可能な場合、完全な属性値ではなく、派生属性値を要 求することを推奨している。この RP 要件をサポートするために、IdP は派生属性値をサポートすることが要求される。</p>
<h2 id="agency-privacy" data-section="7">
  
  
    省庁固有のプライバシー・コンプライアンス <a href="#agency-privacy" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p><a href="/800-63-4-2ndPD/sp800-63c/Federation/#privacy-reqs">セクション 3.9</a>では、プライバシー・コンプライアンス要件を決定するために SAOP に相談する各省庁の要件が示されている。デジタル認証システム開発の初期段階で、省庁の SAOP を関与させ、プライバシー・リスクを評 価・軽減し、フェデレーションがプライバシー法（1974 年）または電子政府法（2002 年） の PIA 実施要件の引き金となるかどうかなどのコンプライアンス義務について省庁に 助言することが重要である。たとえば、省庁がフェデレーションで IdP として機能している場合、プライバシー法の要件が発 生する可能性が高く、それがフェデレーションしている RP に代わってクレデンシャルが IdP で保持されるため、新規または既存のプライバシー法システム・オブ・レコード通知によるカバーが必要になる。ただし、省庁が RP であり、サードパーティ IdP を使用している場合、RP から渡されたどのような データが省庁によって RP で保持されているかによっては、デジタル認証がプライバシー法 の要件をトリガしないことがある（そのような場合、省庁は、そのようなデータをカバーするより広範な プログラム SORN を持っている可能性がある）。</p>

<p>SAOP も同様に、PIA が必要かどうかを判断する際に機関を支援することができる。これらの考慮事項は、連携クレデンシャルの使用だけのためにプライバシー法 SORN または PIA を作成する要件として読むべきものではない。多くの場合、デジタル認証プロセス全体を包含する PIA および SORN を起草するか、機関がオンライン・アクセ スを確立しようとしているプログラムまたは利益を論じるより大きなプログラム的 PIA の一部 としてデジタル認証プロセスを含めることが、最も理にかなっている。</p>

<p>デジタル認証には多くの構成要素があるため、SAOP は、個々の構成要素について認識し理 解することが重要である。たとえば、データ使用合意、コンピュータ・マッチング合意など、他のプライバシー成果物が、 連携 IdP または RP サービスを提供または使用する機関に適用される場合がある。SAOP は、どのような追加要件が適用されるかを決定する上で機関を支援することができる。さらに、デジタル認証の個々のコンポーネントを十分に理解することで、SAOP は、コンプラ イアンス・プロセスまたは他の手段によって、プライバシー・リスクを徹底的に評価し、 軽減することができる。</p>
<h2 id="blinding" data-section="7">
  
  
    代理連盟における目隠し <a href="#blinding" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>いくつかのプロキシ構造（一般に、主に統合を簡略化するために存在するもの）は、 追加の加入者プライバシー保護を提供しないかもしれないが、他のものは、さまざまな 盲検化技術によって、さまざまなレベルのプライバシーを加入者に提供する。プライバシーポリシーは、IdP、RP、およびフェデレーションプロキシによる、加入者属性お よび認証トランザクションデータ（たとえば、最終的な IdP および RP の ID）の適切な 使用を指示することができる。</p>

<p>盲検化のような技術的手段は、データの入手をより困難にすることで、これらの政策の有効性を高めることができる。プロキシに基づくシステムには3つのパーティがあり、プロキシは、自身を含むパーティの1つ以上から情報を隠すために使用できる。二重盲検プロキシでは、IdPとRPは互いのIDを知らず、その関係はプロキシとの み関係である。三重盲検プロキシでは、プロキシはさらに、プロキシを通 過するデータに対する洞察を持たない。盲検化のレベルが増加するにつれて、技術的および運用上の実装の複雑 さが増加する可能性がある。プロキシはトランザクションをどちらか一方の適切なパーティーに マップする必要があるだけでなく、トランザクション中のすべてのパーティ ーの鍵を管理する必要があるため、完全な三重盲検プロキシを実際に実装 することは非常に困難である。</p>

<p>盲検化技術を使用する場合でも、盲検化された当事者は、タイムスタンプ、属性バンドルサ イズ、または属性署名者情報の分析など、公開された属性データまたはメタデータを通じて、 保護された加入者情報を推論する可能性がある。IdP は、フェデレーションに参加するエンティティの識別情報を明らかにするリスクを低減 するために、プライバシーを強化する追加のアプローチを検討することができる。</p>

<p>以下の表は、プロキシされたフェデレーションで使用される、さまざまなブラインディングの 実装を示している。この表は例示を意図したものであり、包括的なものでも技術固有のものでもない。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/privacy/#table-4" name="table-4">表4.プロキシの特徴</a></p>

<table latex-table="4" latex-caption="Proxy Characteristics" latex-columns="p@0.20\textwidth,p@0.17\textwidth,p@0.17\textwidth,p@0.25\textwidth,p@0.20\textwidth">
  <thead>
    <tr>
      <th>プロキシ・タイプ</th>
      <th style="text-align: center">RPはIdPを知っている</th>
      <th style="text-align: center">IdPはRPを知っている</th>
      <th style="text-align: center">プロキシはRPとIdP間のサブスクリプションを追跡できる。</th>
      <th style="text-align: center">プロキシはサブスクライバーの属性を見ることができる</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>属性付き非拘束プロキシ</td>
      <td style="text-align: center">はい</td>
      <td style="text-align: center">はい</td>
      <td style="text-align: center">はい</td>
      <td style="text-align: center">はい</td>
    </tr>
    <tr>
      <td>非拘束委任状</td>
      <td style="text-align: center">はい</td>
      <td style="text-align: center">はい</td>
      <td style="text-align: center">はい</td>
      <td style="text-align: center">該当なし</td>
    </tr>
    <tr>
      <td>属性付き二重盲検プロキシ</td>
      <td style="text-align: center">いいえ</td>
      <td style="text-align: center">いいえ</td>
      <td style="text-align: center">はい</td>
      <td style="text-align: center">はい</td>
    </tr>
    <tr>
      <td>二重盲検委任状</td>
      <td style="text-align: center">いいえ</td>
      <td style="text-align: center">いいえ</td>
      <td style="text-align: center">はい</td>
      <td style="text-align: center">該当なし</td>
    </tr>
    <tr>
      <td>トリプルブラインドプロキシ（属性あり／なし</td>
      <td style="text-align: center">いいえ</td>
      <td style="text-align: center">いいえ</td>
      <td style="text-align: center">いいえ</td>
      <td style="text-align: center">いいえ</td>
    </tr>
  </tbody>
</table>

<h1 id="usability" data-section="8">
  
  
    ユーザビリティへの配慮 <a href="#usability" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは参考になる。</em></p>

<blockquote>
  <p>ユーザー中心設計およびユーザビリティの標準的な用語に合わせるため、本セクション全体を通じて、「ユーザー」という用語は、人間を指すものとして使用される。ほとんどの場合、問題のユーザーは、本ガイドラインの他の箇所で説明されているように、対象者（申請者、請求者、または加入者の役割）になります。</p>
</blockquote>

<p><em>人間-システム相互作用の人間工学 - 第11部：ユーザビリティ：定義と概念</em> <a href="/800-63-4-2ndPD/sp800-63c/references/#ref-ISOIEC9241">[ISO/IEC9241-11]</a>では、ユーザビリティを「システム、製品、またはサービスを特定のユーザが使用し、特定の使用状況において、有効性、効率性、および満足度をもって特定の目標を達成できる程度」と定義しています。この定義は、有効性、効率性、および満足度を達成するために必要な重要な要素として、ユーザー、目標、および使用状況に焦点を当てています。ユーザビリティを達成するためには、これらの重要な要素を考慮した総合的なアプローチが必要です。</p>

<p>ユーザビリティの観点から、連携 ID システムの潜在的な主な利点の 1 つは、複数の認証子 を管理することに伴うユーザの疲労の問題に対処することである。これは歴史的にユーザ名とパスワードの問題であったが、物理的かデジ タルかを問わず、ユーザが多数の認証手段を管理する必要性が高まっているため、ユーザビリティの 課題となっている。</p>

<p><a href="/800-63-4-2ndPD/sp800-63a/usability/#sec9" latex-href="#ref-SP800-63A">SP800-63A］の第 8 節</a>および<a href="/800-63-4-2ndPD/sp800-63b/usability/#sec10" latex-href="#ref-SP800-63B">［SP800-63B］の第 8 節で述べられて</a>いるように、全体的なユー ザ・エクスペリエンスは、デジタル ID システムの成功に不可欠である。フェデレーションは多くのユーザにとって馴染みの薄いユー ザ対話パラダイムであるため、これはフェデレーション ID システムには特に当てはまる。ユーザの事前の認証経験は、ユーザの期待に影響する場合がある。</p>

<p>連携 ID システムの全体的なユーザー・エクスペリエンスは、可能な限りスムーズで簡単でなければな らない。これは、ユーザビリティ標準（ISO 25060 標準シリーズなど）および確立されたユー ザ対話設計のベスト・プラクティスに従うことで達成できる。</p>

<p>ガイドラインと考慮事項は、ユーザーの視点から記述されている。</p>

<p>1973 年リハビリテーション法第 508 条<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-Section508">[第 508 条]</a>は、情報技術における障壁をなくし、連邦政府機関に対し て障害者が電子および情報技術にアクセスできるようにすることを要求するために制定された。これらのガイドラインは、第 508 条からの要件を直接主張するものではないが、ID サービス・ プロバイダは第 508 条の規定に準拠することが期待されている。セクション 508 に準拠するだけでなく、連邦機関およびそのサービス・プロバイダは一般に、ID システムのライフサイクル全体を通じてアクセシビリティが優先されるように、障害者の経験を考慮してサービスおよびシステムを設計することが期待されている。</p>
<h2 id="general-usability-considerations" data-section="8">
  
  
    一般的なユーザビリティに関する考察 <a href="#general-usability-considerations" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>統合 ID システムはそうでなければならない：</p>

<ul>
  <li>ユーザーの負担を最小限にする（例：フラストレーション、学習曲線）    <ul>
      <li>必要なユーザーアクションの数を最小限に抑える。</li>
      <li>ユーザが、単一の IdP で複数の加入者アカウントの中から迅速かつ容易に選択できるようにする。たとえば、<a href="https://openid.net/wg/ac/">Account Chooser の</a>ようなアプローチでは、ユーザは、IdP の候補リストから自分の IdP を選択することで連携プロセスを開始するのではなく、最近アクセスした加入者アカウントのリストから選択することができます。</li>
      <li>ユーザの負担を最小限に抑えることと、ユーザが十分な情報に基づいた意思決定を行えるように十分な情報を提供する必要性とのバランスをとる。</li>
    </ul>
  </li>
  <li>
    <p>馴染みのない専門用語や詳細の使用を最小限に抑える（例えば、基本的な概念が明確に説明されていれば、ユーザーはIdPやRPという用語を知る必要はない）。</p>
  </li>
  <li>
    <p>IdPとRP全体で一貫性のある統合されたユーザーエクスペリエンスに努める。</p>
  </li>
  <li>
    <p>図、図解、FAQ、チュートリアル、および例などのリソースをユーザーに提供することによって、 ユーザーの ID 理解の確立を支援する。リソースは、利用者の情報がどのように扱われるか、および取引当事者（RP、IdP、ブローカ ーなど）が互いにどのように関係するかを説明する必要がある。</p>
  </li>
  <li>
    <p>ユーザーに対して、明確かつ誠実で、意味のあるコミュニケーションを提供する（すなわち、コミュニケーションは明示的で理解しやすいものでなければならない）。</p>
  </li>
  <li>
    <p>場所やデバイスに依存しないオンラインサービスをユーザーに提供する。</p>
  </li>
  <li>
    <p>信頼関係をユーザーに明示し、十分な情報に基づいた信頼の判断を促す。信頼関係は多くの場合、動的でコンテキスト依存である。ユーザは、特定の属性またはトランザクションについて、他の IDP および RP よりも信頼する可能性が高い場合がある。たとえば、ユーザは、貴重な個人情報（金融や健康など）を含む Web サイトで連携 ID システムを使用することをためらうかもしれない。利用者の個人情報の感受性の度合いに応じて、利用者は営利企業を IdP とすることに抵抗を感じるかもしれない。逆に、政府系サービスとの過去の交流に基づき、政府系IdPよりも商業系IdPに信頼を置く人もいるかもしれない。いずれにせよ、フェデレーション・トランザクションに関与するエンティティについてエンドユーザに明確にしておくことが重要であり、理想的には、可能な限り幅広い利害関係者の認識をサポートする選択肢を提供することである。</p>
  </li>
  <li>
    <p>ユーザー向けの情報については、<a href="/800-63-4-2ndPD/sp800-63a/usability/#sec9" latex-href="#ref-SP800-63A">[SP800-63A]Sec.8に</a>規定されているユーザビリティの考慮事項に従ってください<a href="/800-63-4-2ndPD/sp800-63a/usability/#sec9" latex-href="#ref-SP800-63A">。</a></p>
  </li>
  <li>
    <p>技術支援を受ける方法と場所を明確に伝える。例えば、オンラインセルフサービス機能へのリンク、チャットセッション、ヘルプデ スクサポートの電話番号などの情報をユーザに提供する。技術支援を受けるために、ユーザーを取引当事者（RP、IdP、ブローカーなど）の間を行ったり来たりさせることは避ける。</p>
  </li>
  <li>適切なコンテキストで、代表的なユーザと現実的なタスクを使用して統合的かつ継続的なユーザ ビリティ評価を実施し、ユーザの視点から統合 ID システムの成功を確保する。</li>
</ul>
<h2 id="specific-usability-considerations" data-section="8">
  
  
    具体的なユーザビリティに関する考察 <a href="#specific-usability-considerations" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>このセクションでは、連携 ID システムで特定されたユーザビリティの考慮事項を取り上げる。このセクションでは、連携 ID システムに関連するすべてのユーザビリティ要因を網羅的に示そうとはしない。むしろ、ユーザビリティに関する文献の中で、主に ID に関するユーザの視点、ユーザの採用、信頼、および統合 ID 空間の認識など、より大規模で広範なテーマに焦点を当てている。場合によっては実装例を示す。ただし、具体的な解決策は規定されていない。言及されている実装は、特定のユーザビリティ・ニーズに対処するための革新的な技術的 アプローチを奨励するための例である。その他の例については、システム設計およびコーディングの標準、仕様、API、および現在のベスト・プラクティス（OpenID や OAuth など）を参照すること。実装は、万能のソリューションを妨げる多くの要因に敏感です。</p>
<h3 id="user-perspectives-on-online-identity" data-section="8">
  
  
    オンライン・アイデンティティに対するユーザーの視点 <a href="#user-perspectives-on-online-identity" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>ユーザが連携 ID システムに精通している場合でも、連携 ID に対するアプローチは異なるため（特 にプライバシーと情報の共有の面で）、ユーザのデータがどのように扱われるかについて信頼できる期 待を確立する必要がある。ユーザと実装者には、ID に関する異なる概念がある。ユーザは、ID をログインして自分のプライベート空間へのアクセスを得ることと考えている。実装者は、認証子やアサーション、保証レベル、およびサービスを提供するために必要な ID 属性のセットという観点から ID を考える。ユーザと実装者の ID 概念の間にこのような断絶があることを考えると、統合 ID システムに適用される ID の正確な概念をユーザが形成できるようにすることが不可欠である。ID の優れたモデルは、連 携システムの利点とリスクを理解するための基礎をユーザに提供し、これらのシステムに対する ユーザの採用と信頼を促進する。</p>

<p>同様に、RP は、RP の方針により仮名が可能な場合には、利用者に仮名の選択肢を求める べきである。IdP と RP はともに、不必要なデータ送信を最小限にするよう努めるとともに、どの情報がど のような目的で送信されるかを利用者に通知する必要がある。</p>

<p>ID の多くの特性は、フェデレーション内とフェデレーション間の両方において、ユーザが ID を管理する方法に影響を与える。ユーザがサイバースペース外のコンテキストに基づいて複数の ID を管理するように、ユー ザはフェデレーション環境で自分の ID を管理することを学ばなければならない。したがって、ID とコンテキストがどのように使用されるかは、ユーザにとって明確でなけ ればならない。以下の要素を考慮する必要がある：</p>

<ul>
  <li>
    <p>異なるユーザーの役割を区別するために、必要な文脈と範囲をユーザーに提供する。例えば、ユーザーが自分のために行動しているのか、雇用主など他の人のために行動しているのか、などです。</p>
  </li>
  <li>
    <p>IdP、RP、およびアカウントのようなエンティティを区別するために、一意で、意味があり、説明的な識別子をユーザに提供する。このようなユーザー向けの識別子は、基礎となるプロトコルで使用される識別子に追加される可能性が高い。</p>
  </li>
  <li>
    <p>データの所有者と変更を許可された人に関する情報をユーザに提供する。IDおよびIDに関連するデータは、複数のアクタによって更新および変更されることがある。たとえば、医療データの中には、患者によって更新され所有されるものもあれば、 病院や医師の診療所によってのみ更新されるものもある。</p>
  </li>
  <li>
    <p>ユーザが属性を簡単に確認、表示、および更新できるようにする。アイデンティティおよびユーザ・ロールは動的であり、静的なものではない。属性を更新したり、属性の解放を決定したりする機能は、同時に提供される場合とされない場合がある。ユーザーがどのように属性を変更できるかのプロセスが周知され、文書化され、簡単に実行できるようにする。</p>
  </li>
  <li>
    <p>関連する利用者アカウントまたは RP 利用者アカウントが存在しなくなった場合でも、デー タを更新する手段をユーザーに提供する。更新されたデータを追跡する必要性について、適用される監査、法律、またはポリシーの制約を 考慮する。</p>
  </li>
  <li>
    <p>取引履歴を含む自分自身に関するすべての情報を削除し、ID を完全に削除する手段をユー ザーに提供する。そのような行為を妨げる、適用可能な監査、法律、またはポリシーの制約を考慮する。場合によっては、削除よりも完全な無効化がより適切である。</p>
  </li>
  <li>
    <p>明確で見つけやすい、サイト/アプリケーションのデータ保持ポリシー情報をユーザーに提供する。</p>
  </li>
  <li>
    <p>組織のデータ・アクセス・ポリシーに従って、適切な匿名および仮名のオプションと、 そのような ID オプションを必要に応じて切り替える機能をユーザに提供する。</p>
  </li>
  <li>
    <p>ユーザが各 IdP と RP の接続を管理する手段を提供する。これには、完全な分離と、1 つ以上の属性への RP アクセスの削除が含まれる。</p>
  </li>
</ul>
<h3 id="user-perspectives-of-trust-and-benefits" data-section="8">
  
  
    ユーザーから見た信頼とメリット <a href="#user-perspectives-of-trust-and-benefits" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>多くの要因が、連携 ID システムのユーザ導入に影響を与える可能性がある。どのテクノロジでもそうであるように、ユー ザはいくつかの要因を他の要因よりも重視する場合がある。ユーザは、テクノロジの採用を決定する前に、認識された利点とリスクを比較考量すること が多い。IdP および RP は、十分な情報に基づいた決定を行えるように、十分な情報をユーザに提供する ことが重要である。連携 ID システムの基本原則である信頼および信頼の層の概念は、ユーザの採用を促進することが できる。最後に、肯定的なユーザ体験は、フェデレーションに対するユーザの需要を高め、RP による採用の増加を誘発する可能性もある。</p>

<p>このサブセクションでは、主にユーザーの信頼と、メリット対リスクに対するユーザーの認識に焦点を当てる。</p>

<p>ユーザーの採用を促進するために、IdP と RP はユーザーとの信頼関係を構築し、採用のメリットとリスクについて理解してもらう必要がある。以下の要素を考慮すべきである：</p>

<ul>
  <li>
    <p>インタラクティブなユーザー・インターフェースと通知の適切な使用を通じて、ユーザーが情報開示をコントロールし、明示的な同意を提供できるようにする（<a href="/800-63-4-2ndPD/sp800-63c/privacy/#notice">7.2項</a>参照）。ユーザーの軽率なクリックスルーを避けるためには、通知の内容、サイズ、頻度のバランス、特定のコミュニティに合わせた通知などの配慮が必要である。</p>
  </li>
  <li>属性の共有については、以下を考慮する：    <ul>
      <li>共有される属性と属性値をユーザが検証する手段を提供する。優れたセキュリティ・プラクティスに従ってください（<a href="/800-63-4-2ndPD/sp800-63c/Federation/#protecting-information">第 3.10.2 節と</a> <a href="/800-63-4-2ndPD/sp800-63c/security/#security">第 6 節を</a>参照）。</li>
      <li>オール・オア・ナッシングのアプローチではなく、ユーザーが属性の部分的なリストに同意できるようにする。ユーザーがすべての情報の共有に同意しない場合でも、ある程度のオンライン・アクセスを許可する。</li>
      <li>ユーザーが共有属性リストに対する同意を更新できるようにする。</li>
      <li>ユーザーに提示する不必要な情報を最小限にする。たとえば、システムで生成された属性（対の仮名識別子など）は、認証応答の一部として RP と共有される場合でも、表示しない。</li>
      <li>ユーザのステップとナビゲーションを最小限にする。たとえば、属性の同意をプロトコルに組み込み、フェデレーション・トランザクションの外部にある機能にしない。OAuthやOpenID Connectなどの標準にその例がある。</li>
      <li>IdPによって主張された、またはRPによって収集された無効な属性情報からユーザが回復できるような、効果的な救済方法を提供する。救済の提供に関する詳細な要件については、<a href="../_sp80063/3_DIRM.md#redress" latex-href="#ref-SP800-63">[SP800-63]の Sec 3.6</a>を参照。</li>
      <li>ユーザが属性共有に同意することを要求される回数を最小限にする。同意要求の回数を制限することで、同じ属性の共有を何度も要求されることによるユーザのフラストレーションを回避する。</li>
    </ul>
  </li>
  <li>
    <p>限定された用途のためだけに情報を収集し、情報の開示を最小限に抑える（<a href="/800-63-4-2ndPD/sp800-63c/privacy/#minimization">7.3項</a>参照）<a href="/800-63-4-2ndPD/sp800-63c/privacy/#minimization">。</a>不必要で余分な情報の収集と開示、あるいは明示的なユーザ同意のないユーザ追跡によって、ユーザの信頼は損なわれる。例えば、ユーザーが RP でアクセスする可能性のある、またはアクセスしない可能性のあるすべてのトランザクショ ンではなく、現在のトランザクションに関連する属性のみをユーザーに要求する。</p>
  </li>
  <li>連携 ID を使用することの潜在的なメリットとリスクを、明確かつ正直にユーザに伝える。ユーザが重視するメリットには、時間の節約、使いやすさ、管理するパスワードの数の削減、利便性の向上などがある。</li>
</ul>

<p>リスクに対するユーザの懸念は、連携 ID システムの採用意欲に悪影響を及ぼす可能性がある。ユーザは、信頼に関する懸念、プライバシーに関する懸念、セキュリ ティに関する懸念、および単一障害点に関する懸念を持つ可能性がある。たとえば、ユーザは、単一の IDP が一時的または恒久的に利用できなくなった場合に、複数の RP へのアクセスを失うことを恐れる場合がある。さらに、ユーザは、新しい認証プロセスを学ぶことに不安や戸惑いを感じるかもしれない。連携 ID システムの採用を促進するには、認識される利点が認識されるリスクを上回らなければな らない。</p>
<h3 id="user-mental-models-and-beliefs" data-section="8">
  
  
    ユーザーのメンタルモデルと信念 <a href="#user-mental-models-and-beliefs" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h3>

<p>利用者の信念や認識は、利用者に特定の結果を期待させ、特定の行動をとらせる。このような信念、認識、素因を社会科学ではメンタル・モデルと呼ぶ。例えば、人々は、ファストフード店、カフェテリア、よりフォーマルなレストランなど、それぞれの施設での行動や期待を導く外食のメンタルモデルを持っている。したがって、各施設での適切な接し方を理解するために、すべての施設に精通する必要はない。</p>

<p>フェデレーションに関する適切かつ完全なメンタル・モデルを確立するためにユーザを支援す ることで、ユーザは 1 つの特定の実装を越えて一般化することができる。連携 ID システムがユーザの視点から設計されていない場合、ユーザは不正確または不完全なメンタル・モデルを 形成し、これらのシステムを採用する意欲に影響を与える可能性がある。以下の要因を考慮する必要がある：</p>

<ul>
  <li>取引当事者（RP、IdP、プロキシ等）間の作業関係と情報の流れを明確に説明し、利用者の誤解を避ける。説明では、IdP や RP という一般的な用語を使用せず、実際のエンティティ名を使用する。    <ul>
      <li>一見無関係に見えるエンティティが動作関係を持つ理由をユーザが理解できるように、目立つ視覚的な手がかりと情報を提供する。たとえば、ユーザは、連携 ID システムにおける情報の流れを理解していないために、オンライン の個人活動と政府サービスが混在することを懸念する場合がある。</li>
      <li>RP が自分のサイトから IdP に制御をリダイレクトする必要がある場合に、リダイレクトに関する目 立った視覚的な合図と情報をユーザに提供する。たとえば、IdP のユーザ・インタフェース内に RP のブランディングを表示し、ユーザが接続先 RP にアクセスするために IdP でログインしているときにユーザに通知する。</li>
    </ul>
  </li>
  <li>
    <p>取引当事者（RP、IdP、プロキシなど）の真正性を判断するための明確かつ使用可能な方法（視覚的な保証など）をユーザに提供する。これは、特にルート・ドメインが変更された場合（たとえば、.gov から .com）、あるドメインから別のドメインに移ることに対するユーザーの懸念を和らげるのにも役立つ。たとえば、ユーザが悪意のあるサイトにフィッシングされていないことを確認できるように、IdPのURLを表示する。</p>
  </li>
  <li>ログインとログアウトに関して、視覚的な合図を含む明確な情報をユーザに提供する。実装によっては、連携アカウントで RP にログインすると、IdP と RP の両方でユーザに長時間のセッションが生成 される可能性がある。ユーザは、RP でのセッションを終了しても、IdP でのセッションが終了するとは限らず、IdP から明示的に「ログアウト」する必要があることに気付かない可能性がある。ユーザは、IdPセッションを終了するために明示的なログアウトが必要であることを思い出させる明確な情報が必要である。IdP と RP の両方が、認証からの時間またはアクティビティタイムアウトに基づく自動ログアウト 機能を持つことも可能である。ユーザは、予期しないセッションタイムアウトを回避するために、フラストレーションや作業の損失、あるいは安全なサイトからデータをコピーするような安全でない回避策を回避するために、ユーザが何もしなくてもセッションが終了する可能性がある明確な情報を必要とする。</li>
</ul>

<h1 id="equity" data-section="9">
  
  
    エクイティへの配慮 <a href="#equity" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは参考になる。</em></p>

<p>IdP および RP の機能への公平なアクセスは、連携 ID システムの不可欠な要素である。すべての加入者が確実に認証できることは、行政命令 13985「<em>Advancing Racial Equity and Support for Underserved Communities Through the Federal Government</em> <a href="/800-63-4-2ndPD/sp800-63c/references/#ref-EO13985">」[EO13985]</a>で規定されているように、連携技術を使用する場合でも、政府サービスへの公平なアクセ スを提供するために必要である。衡平性リスクの評価において、IdP および RP は、その連携 ID サービスが提供する全体的なユー ザ人口を考慮する必要がある。さらに、IdP および RP は、そのサービスを使用するときに不公正なアクセス、処遇、または結果を受け る原因となり得る共通の特性を持つ利用者集団を特定する。<a href="../8_usability.md#usability">第 8 節で</a>規定される「ユーザビリティの考慮事項」も、連携 ID サービスを使用するすべての人に対 して全体的なユーザビリティと公平性を確保するために考慮されなければならない。</p>

<p>検証者としての役割において、IdP は、<a href="/800-63-4-2ndPD/sp800-63a/equity/#sec11" latex-href="#ref-SP800-63A">[SP800-63A]第 9 節に</a>列挙されている ID 証明、属性検証、および登録に関連する衡平性への配慮、 および<a href="/800-63-4-2ndPD/sp800-63b/equity/#sec11" latex-href="#ref-SP800-63B">[SP800-63B]第 9</a> 節に列挙されている認証子に関する衡平性への配慮を認識する必 要がある。FAL3を提供するRPは、バインドされた認証子およびHolder-of-Keyアサーションを処理する際にも、 これらと同じ認証子に関する考慮事項に注意する必要がある。</p>

<p>フェデレーション・プロセスは、複数のアクティブ・パーティ間のネットワーク・プロトコルを介して行われるため、フェデレーション・システムを使用した認証の経験は、以下の例のような公平性の問題を提示する可能性がある：</p>

<ul>
  <li>タイムアウトすることなくフェデレーション・トランザクション全体を完了させることは、地方のように信頼できるネットワーク接続を持たない加入者にとっては難しいかもしれない。</li>
  <li>知的障害、発達障害、学習障害、神経認知障害を持つ加入者の属性の公開に関する実行時の決定について、インフォームド・コンセントを提供することは難しいかもしれない。</li>
  <li>IdPとRPの両方と同時に対話するために必要な十分な処理能力、ネットワークアクセス、およびその他の機能を備えたシステムは、コストがかかりすぎるか、アクセスまたは使用するには加入者の技術力を超えている場合がある。</li>
  <li>デバイスを共有する加入者は、デバイスの他のユーザーが、IdPでまだアクティブなセッションを通じて、意図しないRPへのアクセスを黙って得る可能性があるため、allowlistベースのシステムを安全に管理するのが難しいと感じるかもしれない。</li>
  <li>さまざまな理由のいずれかでIdPへのアクセスを失った加入者が、RPでアカウントを再確立することは、法外に難しい可能性がある。</li>
</ul>

<p>さらに、不利な立場にある集団の加入者は、<a href="/800-63-4-2ndPD/sp800-63c/privacy/#privacy">第 7 節で</a>説明するように、フェデレーショ ンシステムを通じた監視および追跡の影響を受けやすくなる可能性がある。 IdP が加入者が不利な立場にある集団の一員であることを知っている場合、IdP は、加入者と RP のセットへのアクセスをプロファイリングすることによって、加入者を特に標的にし、収集したデータを加入者に対して使用することができる。 あるいは、IdP は、RP 接続を監視することによって、加入者が不利な立場にある集団の一員であることを知ることができる。たとえば、加入者がソーシャルサービスにログインしていることをIdPが見た場合、IdPは、IdPに開示されていない加入者の社会経済的ステータスについて学んだことになる。さらに、不利な立場にある集団の加入者は、結託した RP の集合間でデータを相関させられるリスクが高い。たとえば、RP の一団は、加入者に対する RP のサービス拒否を正当化するために、加入者の属性と行動を RP 間で共有することができる。 そのため、IdP と RP は、加入者集団全体で等しくプライバシー強化技術を使用することが推奨される。</p>

<p>同意ダイアログおよび通知がユーザーに送信される場合、加入者の理解を促進し、軽率なクリックスルーを避けるために、これらのコンテンツは、異なる加入者集団に合わせて調整されるべきである。</p>

<p>IdP は、加入者アカウントに記録された各加入者に使用されるプルーフ方法を開示することが求 められる。これには、利用可能なすべての形式のプルーフィングと例外処理、および場合によっては信託契約に定義された代償管理が含まれる。IdP および CSP は、特定のサブスクライバ集団に対する偏った処理を回避するために、サブスクライ バ・アカウントに含まれるプルーフィング情報以外の例外処理または補償管理を利用しなければ ならないサブスクライバを特定すべきではない。</p>

<p>フェデレーショントランザクションはセキュリティドメインの境界を越えることを意図しているため、IdP と RP の利害の不一致は、さらなる考慮事項をもたらす可能性がある。このような要件の相違は、これらの当事者間の接続を管理する信頼協定で対処しなければならず、透明な報告のような慣行は、ある種の不一致に対処するのに役立つ。さらに、あるサービスに対する（RPにとっての）代替IdPと（IdPにとっての）RPの利用可能性は、システム全体の公平性を高めるのに役立つ。例えば、官民連携において、連邦の RP にアクセスするために民間の IdP が使用される場合、あるいは民間の RP にアクセスするために連邦の IdP が使用される場合、官民のシステムは、異なる動機によって駆動され、衡平性、アクセシビリティ、透明性の面で異なる要件に拘束される可能性がある。</p>

<p>最も一般的であると予想されるこの分野の問題を軽減するよう、IdP と RP に求める規範的要件が設定されている。しかし、規範的要求事項がすべての潜在的な衡平性の問題を予期していたとは考えにくい。また、潜在的な衡平性の問題は、アプリケーションによって異なる。したがって、IDP および RP は、加入者が不公正な認証要件を報告し、代替の認証戦略の可能性 について助言する仕組みを提供する必要がある。</p>

<p>本ガイドラインでは、RP 加入者アカウントに追加の連携識別子をバインドすることで、IdP アクセスの喪失リスクを最小化することを認めている（<a href="/800-63-4-2ndPD/sp800-63c/Federation/#rp-account">第 3.7 節</a>参照）。しかし、加入者は、RP が許容する複数の IdP アカウントを同時に持つことが困難な場合がある。この不公平は、RP 加入者アカウントへの複数の連携識別子の安全なリンクを可能にする独自のア カウント回復プロセスを RP に持たせることで対処できる。</p>

<p>RPは、すべての加入者が必ずしも同じIdPにアクセスできるわけではないことを認識 する必要がある。RPは、そのようなサブスクライバのためにローカルで認証されたア カウントを設定し、後でそれらのアカウントと連携識別子とのバインドを許可することができ る。</p>

<h1 id="examples" data-section="10">
  
  
    例 <a href="#examples" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは参考になる。</em></p>

<p>この付録には、本ガイドラインの要件と併せて使用されるフェデレーションのシナリオ例がいくつか含まれている。</p>

<p>このセクションのシナリオは説明のためのものであり、このガイドラインで課される以上の追加要件を伝えるものではない。</p>
<h2 id="mapping-fals-to-common-federation-protocols" data-section="10">
  
  
    FALと共通フェデレーション・プロトコルのマッピング <a href="#mapping-fals-to-common-federation-protocols" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>現在一般的に使用されているプロトコルのうち、OpenID Connect<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">[OIDC]</a>とSAML<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML">[SAML]</a>は、さまざまなFALの要件を満たすために活用できるさまざまな機能を提供している。<a href="/800-63-4-2ndPD/sp800-63c/examples/#table-5">表5は</a>、特定のFALに到達するために展開可能な、これらのプロトコルの特定のオプションの例を示している。これらのガイドラインは、与えられたFALへの規範的なマッピングを表すものではなく、FALを確立する際にはフェデレーションプロセス全体を考慮しなければならないことに注意することが重要である。さらに、各FALは、この表に記載されていないプロセス、展開、および手順によって到達する可能性がある。</p>

<p latex-ignore="true"><a href="/800-63-4-2ndPD/sp800-63c/examples/#table-5" name="table-5">表5.FALプロトコルの例</a></p>

<table latex-table="5" latex-caption="FAL Protocol Examples" latex-columns="p@0.10\textwidth,p@0.42\textwidth,p@0.42\textwidth">
  <thead>
    <tr>
      <th> </th>
      <th>OIDC</th>
      <th>サムル</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ファル1</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">OIDC]</a>のすべてのコア・フロー（Authorization Code、Implicit、Hybrid）は、すべて JSON Web Signatures を使用してアサーション（ID トークン）の署名を要求するように構成できる。アサーションは、さまざまなフロントチャネルおよびバックチャネル方式で提示される。これらの各フローは、静的および動的なクライアント登録の両方を使用して構築できる。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC-basic">OIDC-Basic]</a>や<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC-implicit">[OIDC-Implicit]</a>などのプロファイルは、相互運用可能な展開のための追加ガイダンスを提供できる。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML-WebSSO">SAML-WebSSO]</a>プロファイルは、XML D-Sig を使用したアサーションの署名と、フロント・チャネ ルを使用したアサーションの提示を可能にする。SAML の配備は一般に静的登録でセットアップされ、場合によってはフェデレーション・オーソ リティを介して管理される。</td>
    </tr>
    <tr>
      <td>ファルツー</td>
      <td>バックチャネルで ID トークンを提示するフロー（Authorization Code や Hybrid など）は、インジェクション防止のレベルを提供できる。</td>
      <td><a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML-bindings">SAML-Bindings]</a>で定義されているSAMLのArtifact Bindingでは、SAMLアサーションをバックチャネルで提示することができる。</td>
    </tr>
    <tr>
      <td>ファルスリー</td>
      <td>ID トークンには、Holder-of-Key および Bound Authenticator アサーション提示に必要なクレームを含めることができる。</td>
      <td>SAML Holder-of-Key プロファイルは、他の展開の選択肢と組み合わせれば、このレベルのアサーション要件に適合する。</td>
    </tr>
  </tbody>
</table>

<p>特に OpenID Connect では、ID API（UserInfo エンドポイント）と追加 API の両方にアクセスできるようにするのが一般的である。API アクセスのセキュリティは本ガイドラインの対象外であるが（主に ID アサーションに関係する）、OpenID Connect 実装が FAL と連動してすべての API 呼び出しのセキュリティを高めたいと考えるのは賢明なことである。たとえば、FAL3でHolder-of-Keyアサーションを要求し、サブスクライバが保持する鍵の検証を要求することに加えて、OpenID ConnectシステムはAPIアクセスに送信者制約のあるアクセストークンを要求することができる。</p>
<h2 id="direct-connection-to-an-agencys-idp" data-section="10">
  
  
    エージェンシの IdP への直接接続 <a href="#direct-connection-to-an-agencys-idp" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>加入者アカウントを発行・管理するエージェンシー A は、フェデレーションプロセスを通じて、これらの加入者 アカウントをオンラインで利用できるようにするために、OpenID Connect IdP を設定・運用する。</p>

<p>RP は、この契約の一部として、IdP から必要とされる一連の属性を宣言する。信頼契約は、サブスクライバが、フェデレーション・トランザクションにおける属性の解放を決定する 権限を持つ当事者であることを規定する。</p>

<p>IdP は、加入者アカウントの一意の内部識別子（従業員記録番号など）を取り、それを一方向暗号関数 に通して加入者アカウントの一意の識別子を作成することにより、加入者アカウントの連携識別子を 生成する。このような識別子は、RP が内部識別子を計算することを許さないが、属性の変更に よって安定する。</p>

<p>信頼契約の条件に従って、加入者は、RP に初めてログオンするときに IdP からプロンプトを表示される。IdP は、RP と属性を共有するための加入者の同意を実行時に求め、同意画面に RP が要求する属性の用途を加入者に表示する。また、IdP は、IdP がこの同意の決定を記憶することを許可するよう加入者に促す。この記憶された決定により、IdP は、将来の要求において、記憶された同意に基づいて行動し、同じ RP が同じ属性を要求しても加入者にプロンプトを表示しない。</p>

<p>アサーションは、OpenID Connect ID トークンとしてフォーマットされ、連携ログインを容易にする最小限の属性セットを含む。連携識別子以外には、アサーションにはサブスクライバの識別情報は含まれない。アサーションに加えて、RP には OAuth 2.0 アクセストークンが付与され、RP は IdP がホストする ID API、OpenID Connect UserInfo Endpoint にアクセスできる。RP は、加入者が RP を初めて使用するときなど、必要に応じてこの API を呼び出して追加の属性を取得することを選択できる。この RP はジャストインタイム・プロビジョニング・モデルに従っているため、RP がサブスクライバの連携識別子を初めて見たとき、RP はその連携識別子の RP サブスクライバ・アカウントを作成し、ID API を呼び出して RP サブスクライバ・アカウントにサブスクライバの属性を入力する。このサブスクライバとの今後の認証のために、RP は ID API を呼び出すことで、属性のキャッシュが十分に新しいか、更新する必要があるかを判断できる。</p>
<h2 id="multilateral-federation-network" data-section="10">
  
  
    多国間連盟ネットワーク <a href="#multilateral-federation-network" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>A、B、Cの各機関は、加入者アカウントのためにOpenID Connectを実行するIdPを持っている。3つの機関はすべて、機関間接続を提供するために設立された独立機関が運営する多国間フェデレーションに参加している。フェデレーション当局は、各IdPが当該機関を代表していることを独自に検証する。フェデレーション当局は、多国間フェデレーションに参加しているすべての機関の IdP のディスカバリレコードを公開する。この公開により、フェデレーション内の RP は、フェデレーション協定の規則に基づいて、所与の機関のア カウントにアクセスするためにどの IdP を使用するかを発見することができる。</p>

<p>RP X と Y は、機関 A、B、C からのログインを許可することを希望し、RP はその意図と必要な属性のリストをフェデレーショ ンオーソリティに宣言する。フェデレーション・オーソリティは両 RP の要求を評価し、多国間フェデレーションのトラスト・アグリーメントに追加する。これにより、両 RP は、各機関の必要に応じて、3 つの別々の IdP にそれぞれ登録できる。</p>

<p>いずれの RP も、フェデレーション・プロキシは介さず、3 つの各 IdP と直接インタフェースする。新しい IdP や RP が多国間フェデレーション合意に追加されると、既存の IdP や RP は新しいコン ポーネントとそのパラメータを通知される。</p>

<p>IdP と RP は、フェデレーション権限の下で共有シグナリングチャネルを確立する。これにより、どの IdP もどの RP も、フェデレーション・オーソリティの下で、特定のアカウントに関 連する疑わしい行動や悪意のある行動を他のメンバーに報告することができる。</p>
<h2 id="issuance-of-a-credential-to-a-digital-wallet" data-section="10">
  
  
    デジタルウォレットへのクレデンシャルの発行 <a href="#issuance-of-a-credential-to-a-digital-wallet" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>省庁 B は、デジタル・ウォレット・テクノロジーの使用を通じて、加入者アカウントをフェデレーショ ンで利用できるようにしている。ウォレットにクレデンシャルを発行するための省庁の合意は、連邦政府全体でデジタル・ウォレットを管理するために設定されたフェデレーション権限によって促進される。フェデレーション機関は、多者間協定の下で各機関の CSP の ID を確立し、多者間トラスト協定の中で、機関 B の CSP のみが機関 B のサブスクライバ管理ウォレットにオンボードできるようにする。</p>

<p>これらのガイドラインの範囲内で、デジタル・サブスクライバが制御するウォレットは、IdP として機能する前に、CSP によってオンボードされる必要があります。このプロセスを開始するために、加入者はデジタル・ウォレット・ソフトウェアをエージェンシ B の CSP に指示します。加入者はバイオメトリクス要素を使用してデジタル・ウォレットをアクティベートし、デジ タル・ウォレットは加入者アカウントのオンボーディング要求を CSP に行います。このオンボーディング要求には、デジタル・ウォレットが保持する鍵の証明が含まれる。CSP はウォレットの証明を検証し、ウォレットデバイスからの追加の証明を処理します。</p>

<p>加入者は、オンボーディング・プロセス中に CSP に対して認証を行う。CSP は、フェデレーション・オーソリティからのトラスト・アグリーメントの条件をサブスクライバに促し、当該デジタル・ウォレットに ID を発行することを希望することを確認するようサブスクライバに求める。サブスクライバは、ウォレットで利用可能になる一連の属性を通知される。</p>

<p>CSP は、サブスクライバの属性とデジタル・ウォレットの鍵への参照を含む属性バンドルを作成する。CSP はこの属性バンドルに自身の鍵で署名し、バンドル をデジタル・ウォレットに返します。</p>

<p>サブスクライバが RP に対して認証する必要がある場合、RP はサブスクライバのウォレットに、 RP のニーズに適合するクレデンシャルを求めてクエリを送信する。RP は同じフェデレーション機関と信頼協定を結んでおり、多国間信頼協定の規則に基づいて発行された ID を信頼することに同意している。IdP として機能するデジタル・ウォレットは、機関 B の CSP から発行された属性バンドルによって RP の要求が満たされることを識別する。デジタル・ウォレットは、ローカルの生体認証要素を使用して、デジタル・ウォレットソフトウェアの IdP 機能をアクティブにするよう加入者に促します。デジタル・ウォレットは、要求された属性を問題の RP に提示したいことを確認するよう加入者に求めます。加入者が承諾すると、デジタルウォレットの IdP 機能は、デジタルウォレットの鍵で署名された RP 用のアサーションを作成する。アサーションには CSP からの属性バンドルが含まれ、それ自体は IdP 機能からの署名でカバーされる。IdP はアサーションを RP に配信する。</p>

<p>RP は、署名済みアサーションを受信し、フェデレーション・オーソリティによって識別された CSP の鍵を使用して、CSP から属性バンドルの署名を検証する。次に RP は、アサーションで識別される鍵を使用して、アサーションの署名を検証する。これらのチェックが正常に通過すると、RP は、アサーション内の情報に基づいて、RP のサブスクライバを表す RP サブスクライバ・アカウントを作成する。</p>
<h2 id="enterprise-sso" data-section="10">
  
  
    エンタープライズ・アプリケーションのシングルサインオン <a href="#enterprise-sso" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>エンタープライズアプリケーションの場合、許可リストと事前プロビジョニングされたアカウントを使用することで、組織内のすべての潜在的な契約者がアプリケーションを利用できるようにするのが一般的なパターンである。</p>

<p>このシナリオでは、エージェンシ E は、エージェンシの OpenID Connect IdP を介してエージェンシ E の全従業員にエンタープライズクラスのサービスを提供するために、RP とのペアワイズ契約を確立します。この信頼契約の一環として、IdP は、RP の SCIM ベースのプロビジョニング API へのアクセスを許可する。IdP は、加入者アカウントごとに連携識別子を作成し、プロビジョニング API を使用して、連携識別子とその関連属性を RP にプッシュする。このようにして、RP は、IdP のシステム内のすべての加入者に対して、RP の加入者アカウ ントを事前にプロビジョニングすることができ、特定のアカウントがまだ RP にログインしてい ないかどうかにかかわらず、RP がシステム上のすべてのアカウントに対して、アクセス権、 データ共有、メッセージングなどの機能を提供できるようになる。</p>

<p>信頼契約の条件により、RP は IdP の許可リストに登録される。許可リスト・エントリには次のように記載されている：</p>

<ul>
  <li>加入者は、E 機関においてアクティブな加入者アカウントを持っている。</li>
  <li>加入者がAAL2以上でIdPと認証している。</li>
  <li>RP は、連携識別子と基本認証イベント情報のみを要求することができる。</li>
  <li>フェデレーション・トランザクションはFAL2</li>
</ul>

<p>その結果、サブスクライバは実行時に同意を求められることはない。RP がオンボー ドされた時点で、エージェンシーがすべてのアカウントに代わってサービスを使用することに同意し たからである。これにより、セキュリティドメインの境界を越えてフェデレーションプロトコルが使用されているにもかかわらず、加入者はシームレスなシングルサインオンを体験できる。IdP は実行時の決定を使用しないため、許可リスト・パラメータから逸脱すると、フェデレーション・トランザ クションは失敗する。</p>

<p>RP 加入者アカウントは、プロビジョニング API を使用して同期される。IdP で新しい加入者アカウントが作成、変更、または削除されると、IdP はプロビジョニング API を使用して RP 加入者アカウントのステータスを更新します。これにより、RP は各加入者アカウントのステータスを常に最新の状態に保つことができます。例えば、加入者アカウントが IdP で終了されると、プロビジョニング API は、対応する RP 加入者アカウントが直ちに終了されることを RP に通知する。RP は、監査ログおよびアクセスログにおける識別子および参照を除き、当該アカウントのローカルにキャッシュされた属性をすべて削除する。</p>
<h2 id="fal3-smart-card" data-section="10">
  
  
    FAL3 スマートカード <a href="#fal3-smart-card" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>加入者は、スマートカード上の暗号化認証子を持つ。このスマート・カード上の証明書は、信頼協定で規定された共有 PKI システムの使用により、IdP と RP の両方が独立して検証できる。このタイプの認証子は、FAL3 の鍵所有者アサーションで使用できる。</p>

<p>加入者はフェデレーション・プロセスを開始し、認証子を使用して IdP に対して認証を行う。IdP は、アサーションが FAL3 での使用を意図していることを示すフラグを含むアサーションを 作成する。アサーションには、バインドされた認証子として使用される証明書のコモン・ネーム （CN）およびサムプリントも含まれる。</p>

<p>RP がアサーションを受信すると、RP は通常どおりアサーションを処理し、FAL3 フラグと証明 書属性を確認する。サブスクライバは、認証子を使用して RP を認証し、RP は、サブスクライバから提示された証明書が IdP からのアサーション内の証明書と一致することを検証する。これらが一致すると、RP は FAL3 でサブスクライバとのセキュアなセッションを作成する。</p>
<h2 id="fal3-nonpki" data-section="10">
  
  
    FAL3 非 PKI 認証機能付き <a href="#fal3-nonpki" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>加入者は、WebAuthn プロトコルを使用するハードウェア暗号化認証装置を持つ。この認証子は、いかなる PKI システムとも結びついておらず、実際、認証子デバイスは、通常の認証プロセス中に、IdP と RP の両方に対して、まったく異なる、リンクされていない鍵を提示する。この種の認証器は、RP がバインドされた認証器を管理する場合、FAL3 でも使用できる。</p>

<p>この例では、加入者が IdP でこの認証デバイスを使用するとき、Key1 の証明を提示する。加入者が RP で同じデバイスを使用する場合、Key2 の証明を提示する。これらは、論理的には 2 つの別個の認証デバイスであるが、加入者の観点からは、複数の場 所で同じデバイスを使用していることになる。</p>

<p>フェデレーション・トランザクションを開始するために、サブスクライバは、Key1 を使用して IdP を認証する。その後、IdP は FAL3 としてフラグ付けされたアサーションを作成する。IdP は、Key2 の存在と使用を確認できないため、このアサーションは、加入者が FAL3 に到達するためにバインドされた認証子を使用していることを示す。RP がこのアサーションを処理するとき、RP は、アサーション内の連携識別子に関連する RP サブスクライバ・アカウントをチェックし、Key2 を使用するそのアカウントの RP バインド認証子を見つける。RP は、Key2 を使用して認証するようサブスクライバに促す。鍵が検証されると、RP は FAL3 で加入者との安全なセッションを作成する。</p>
<h2 id="fal3-with-referred-token-binding" data-section="10">
  
  
    FAL3 トークンのバインディングを参照する <a href="#fal3-with-referred-token-binding" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>加入者は、IdP と RP が共有 PKI 環境にないため、IdP が信頼するが RP が知らない証明書を使用して、IdP を認証する。ただし、IdP および RP は、TLS の参照されるトークンバインディング拡張をサポートする。サブスクライバが証明書を IdP に提示すると、IdP はサブスクライバの証明書の CN とサムプリントを含むアサーションを作成する。IdP は、アサーションまたはアサーション参照とともに、トークン・バインディング・ヘッダを返す。これらのヘッダが RP に提示されると、RP はこれらを使用して、アサーションの内容をサブスクライバのバインドされた認証子に関連付けることができる。RP は、依然として証明書を検証する必要があるが、トークン・バインディングにより、RP は、 認証者の証明書の証明書チェーンを別途信頼することなく、これを行うことができる。</p>
<h2 id="ephemeral-federated-attribute-exchange" data-section="10">
  
  
    エフェメラルなフェデレート属性交換 <a href="#ephemeral-federated-attribute-exchange" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>RPは、加入者の身元を知らなくても、年齢証明や特定の機関など既知のエンティティに 所属している証明など、加入者の特定の属性にアクセスする必要がある。RP は、トランザクションを処理するために必要な派生属性値のみを要求する。この場合、サブスクライバが年齢であるか、またはエンティ ティに所属しているかの単純なブール値である。フェデレーションプロセスは、RPと加入者の間に認証セッションを作成する。ただし、RP はエフェメラルなプロビジョニング・メカニズムを使用し、トランザクショ ンの記録のみを保持し、加入者のさらなる識別属性は保持しない。IdP は、RP にペアワイズ仮名識別子を提供する。IdPは、RP加入者アカウントのエフェメラルな性質を知っているので、加入者のRP利用に影響を与えることなく、要求ごとにRPに別個のPPIを提供することができる。IdP は、実行時に加入者に派生属性の解放を促し、RP が時間の経過に伴う情報の変更に対して加入者ア カウントを無言でポーリングすることを防ぐ。</p>
<h2 id="authorized-party-example" data-section="10">
  
  
    複数の異なる権限者と信託契約 <a href="#authorized-party-example" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>加入者は複数の RP でサービスを使用するため、異なる信頼協定が適用される可能性があり、それらの協定は異なる要件と経験を持つ可能性がある。このシナリオでは、加入者は、3つの異なるRPで使用する単一のIdPを介してアカウントを持っており、それぞれが異なる種類の信頼協定と、同意と通知に関する異なる要件を持っている。</p>

<dl>
  <dt>組織の承認者</dt>
  <dd>エンタープライズサービス（RP）に接続するエージェンシーに対して、エージェンシーのすべてのサブスクライバが利用できるように、アプリオリ信頼契約が確立される。この信頼契約の認可された当事者はエージェンシーであり、IdP は、RP がその使用のために要求した一連の共通属性を持つ RP 用の allowlist エントリで構成される。サブスクライバがエンタープライズ・サービスにログインするとき、信頼協定がこの接続を信頼されたものとして確立しているため、サービスに関する実行時の決定を要求されることはない。この信頼協定の詳細は、RP に解放される属性のリストとその目的など、IdP からサブスクライバに提供される。</dd>
  <dt>個人の承認者</dt>
  <dd>別のサービス（別のRP）のために、別のアプリオリ信頼契約が機関によって確立され、このサービスは、同じ機関のすべての加入者が利用できるようにされる。この信頼契約は、加入者が RP への属性情報の公開を許可された当事者であることを規定する。サービスにログインするとき、各加入者は RP に属性を公開することへの同意を求められる。このプロンプトには、信頼契約の詳細へのリンク、公開される属性とその使用目的のリストなど、加入者が適切なセキュリティ決定を行うためのコンテキストが含まれる。IdP は、このサブスクライバが将来この同じ RP にログインするときに、信頼契約と RP からの要求が変更されていない限り、サブスクライバに同意のプロンプトが再度表示されないように、サブスクライバにこの同意の決定を保存することを許可する。</dd>
  <dt>加入者主導のサービス・アクセス：</dt>
  <dd>加入者主導の信頼合意は、加入者が、IdP によって未知の RP にアクセスするときに確立される。RP は、IdP から要求されるすべての属性の用途について加入者に通知し、IdP は、RP に属性を解放することに同意するよう加入者に求める。また、IdP は、RP が機関にとって未知であることを加入者に警告し、加入者が安全な意思決定を行えるように、RP が受信した情報を加入者に提供する。</dd>
</dl>

<p>これらのシナリオはすべて、同じ加入者アカウントに関係している。</p>
<h2 id="shared-ppi" data-section="10">
  
  
    複数のRPのペアワイズ仮名識別子の共有 <a href="#shared-ppi" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>特定のミッションをサポートするために、3 つのアプリケーションのグループが展開され、コラボ レーション、文書保管、およびカレンダーの機能が提供される。別々のアプリケーションの性質上、それらは別々の RP として配備されるが、すべて共通の信頼契約を使用して同じ IdP にバインドされる。この信頼契約では、3つのRPが共有PPIを発行されることが規定されており、アプリケーションは個々の加入者アカウントを相互に調整できるが、展開された環境内の他のアプリケーションとは調整できないようになっている。IdP はアルゴリズムを使用して共有 PPI を生成する。この共有 PPI には、アプリケーショ ンのセットに対するランダムな識別子と、各加入者アカウントに対する一意の識別子が含まれる。その結果、3 つの RP すべてが各加入者の同じ PPI を取得するが、他の RP には同じ識別子は発行されない。</p>
<h2 id="rp-auth" data-section="10">
  
  
    IdPへのRP認証 <a href="#rp-auth" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h2>

<p>フェデレーション・トランザクションは通常、複数のネットワーク・コールで行われる。このプロセスを通じて、IdP と RP は、前のステップで話した相手と同じ相手と話していること、そして最終的には、そもそもトランザク ションに参加することを期待している相手と話していることを知ることが重要である。</p>

<p>使用するフェデレーション・プロトコルやシステムのニーズに応じて、異なる程度の保証を提供するさまざまな技法が存在する。たとえば、<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC">[OIDC]</a>の認可コード・フローでは、RP がトランザクションの前に IdP に共有秘密鍵または秘密鍵を登録することで、IdP がアサーションを取得するためのバックチャネルで RP の要求を強く認証できるようにする。さらに、<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-RFC7636">[RFC7636]</a>の「Proof Key for Code Exchange」プロトコルを使用すると、RP は、フロントチャネルでハッシュ形式で送信され、バックチャネルでアサーション参照とともに完全な形で送信される、推測不可能な秘密を動的に作成できる。もちろん、これらの技術を組み合わせることで、保証をさらに高めることができる。</p>

<p>フェデレーション機関は、認証プロセスを促進することもできる。RP がその公開鍵と識別子をフェデレーション・オーソリティに登録する場合、IdP は、RP 自身を事前に登録する必要はなく、フェデレーション・オーソリティから適切な鍵を取得するだけでよい。</p>

<p>特定のフェデレーションプロトコルの技術的なプロファイルは、このガイドラインの範囲外であるが、<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FAPI">[FAPI]の</a>ような高いセキュリティプロファイルは、実装者が安全なフェデレーションプロトコルを展開するための広範なガイドラインを提供する。</p>

<h1 id="references">
  
  
    参考文献 <a href="#references" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>このセクションは参考になる。</em></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-A-130" name="ref-A-130">A-130]</a>Office of Management and Budget (2016) Managing Information as a Strategic Resource.(The White House, Washington, DC）, OMB Circular A-130, July 28, 2016.<a href="https://obamawhitehouse.archives.gov/sites/default/files/omb/assets/OMB/circulars/a130/a130revised.pdf">https://obamawhitehouse.archives.gov/sites/default/files/omb/assets/OMB/circulars/a130/a130revised.pdf</a>で入手可能。</p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-EO13985" name="ref-EO13985">EO13985]</a>Biden J (2021) Advancing Racial Equity and Support for Underserved Communities Through the Federal Government.(The White House, Washington, DC), Executive Order 13985, January 25, 2021.<a href="https://www.federalregister.gov/documents/2021/01/25/2021-01753/advancing-racial-equity-and-support-for-underserved-communities-through-the-federal-government">https://www.federalregister.gov/documents/2021/01/25/2021-01753/advancing-racial-equity-and-support-for-underserved-communities-through-the-federal-government</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FAPI" name="ref-FAPI">FAPI]</a>Fett D, Bradley J, Heenan J (2024),<em>FAPI 2.0 Security Profile (draft)</em>.(OpenID Foundation, San Ramon, CA).<a href="https://openid.bitbucket.io/fapi/fapi-2_0-security-profile.html">https://openid.bitbucket.io/fapi/fapi-2_0-security-profile.html</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FEDRAMP" name="ref-FEDRAMP">FEDRAMP]</a>General Services Administration (2022),<em>How to Become FedRAMP Authorized</em>.<a href="https://www.fedramp.gov/">https://www.fedramp.gov/</a>で入手可能。</p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-FIPS140" name="ref-FIPS140">FIPS140]</a>National Institute of Standards and Technology (2019) Security Requirements for Cryptographic Modules.(米国商務省、ワシントンDC）、連邦情報処理標準公開（FIPS）140-3<a href="https://doi.org/10.6028/NIST.FIPS.140-3">https://doi.org/10.6028/NIST.FIPS.140-3</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-ISOIEC9241" name="ref-ISOIEC9241">ISO/IEC9241-11]</a>国際標準化機構（2018）<em>ISO/IEC 9241-11 人間-システム相互作用の人間工学-第 11 部：ユーザビリティ：定義と概念</em>（ISO, Geneva, Switzerland）。<a href="https://www.iso.org/standard/63500.html">https://www.iso.org/standard/63500.html</a>で入手可能。</p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-ISOIEC18013" name="ref-ISOIEC18013">ISO/IEC18013-5]</a>国際標準化機構（2021）<em>ISO/IEC 18013-5 個人識別-ISO 準拠運転免許証-第 5 部：携帯運転免許証（mDL）アプリケーショ ン</em>（ISO, ジュネーブ、スイス）。<a href="https://www.iso.org/obp/ui/en/#iso:std:iso-iec:18013:-5:ed-1:v1:en">https://www.iso.org/obp/ui/en/#iso:std:iso-iec:18013:-5:ed-1:v1:en</a>で入手可能。</p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-NISTIR8062" name="ref-NISTIR8062">NISTIR8062]</a>Brooks S, Garcia M, Lefkovitz N, Lightman S, Nadeau E (2017) An Introduction to Privacy Engineering and Risk Management in Federal Systems.(National Institute of Standards and Technology, Gaithersburg, MD), NIST Interagency or Internal Report (IR) 8062, January 2017.<a href="https://doi.org/10.6028/NIST.IR.8062">https://doi.org/10.6028/NIST.IR.8062</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-nistir8112" name="ref-nistir8112">NISTIR8112]</a>Grassi PA, Lefkovitz NB, Nadeau EM, Galluzzo RJ, Dinh AT (2018) Attribute Metadata：A proposed Schema for Evaluating Federated Attributes. (National Institute of Standards and Technology, Gaithersburg, MD), NIST Interagency or Internal Report (IR) 8112<a href="https://pages.nist.gov/NISTIR-8112/NISTIR-8112.html">。https://pages.nist.gov/NISTIR-8112/NISTIR-8112.html。</a></p>

<p><a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC" name="ref-OIDC">[OIDC]</a>Sakimura N, Bradley J, Jones M, de Medeiros B, Mortimore C (2014) OpenID Connect Core 1.0 incorporating errata set 1 (OpenID Foundation, San Ramon, CA).<a href="https://openid.net/specs/openid-connect-core-1_0.html">https://openid.net/specs/openid-connect-core-1_0.html</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC-basic" name="ref-OIDC-basic">OIDC-Basic]</a>Sakimura N, Bradley J, Jones M, de Medeiros B, Mortimore C (2022) OpenID Connect Basic Client Implementer's Guide 1.0 (OpenID Foundation, San Ramon, CA).<a href="https://openid.net/specs/openid-connect-basic-1_0.html">https://openid.net/specs/openid-connect-basic-1_0.html</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC-implicit" name="ref-OIDC-implicit">OIDC-Implicit]</a>Sakimura N, Bradley J, Jones M, de Medeiros B, Mortimore C (2022) OpenID Connect Implicit Client Implementer's Guide 1.0 (OpenID Foundation, San Ramon, CA).<a href="https://openid.net/specs/openid-connect-implicit-1_0.html">https://openid.net/specs/openid-connect-implicit-1_0.html</a></p>

<p><a href="/800-63-4-2ndPD/sp800-63c/references/#ref-OIDC-registration" name="ref-OIDC-registration">[OIDC-Registration]</a>Sakimura N, Bradley J, Jones M (2023) OpenID Connect Dynamic Client Registration 1.0 incorporating errata set 2 (OpenID Foundation, San Ramon, CA).<a href="https://openid.net/specs/openid-connect-registration-1_0.html">https://openid.net/specs/openid-connect-registration-1_0.html</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-RFC5246" name="ref-RFC5246">RFC5246]</a>Rescorla E, Dierks T (2008) The Transport Layer Security (TLS) Protocol Version 1.2. (Internet Engineering Task Force (IETF)), IETF Request for Comments (RFC) 5246.<a href="https://doi.org/10.17487/RFC5246">https://doi.org/10.17487/RFC5246</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-RFC5280" name="ref-RFC5280">RFC5280]</a>Cooper D, Santesson S, Farrell S, Boeyen S, Housley R, Polk W (2008) Internet X.509 Public Key Infrastructure Certification and Certificate Revocation List (CRL) Profile. (Internet Engineering Task Force (IETF)), IETF Request Comments (<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-RFC5280" name="ref-RFC5280">RFC</a>) 5280.(Internet Engineering Task Force (IETF)), IETF Request for Comments (RFC) 5280.<a href="https://doi.org/10.17487/RFC5280">https://doi.org/10.17487/RFC5280</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-RFC7591" name="ref-RFC7591">RFC7591]</a>Richer J, Jones M, Bradley J, Machulak M, Hunt P (2015) OAuth 2.0 Dynamic Client Registration Protocol.(Internet Engineering Task Force, Reston, VA), RFC 7591.<a href="https://doi.org/10.17487/RFC7591">https://doi.org/10.17487/RFC7591</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-RFC7636" name="ref-RFC7636">RFC7636]</a>Sakimura N, Bradley J, Agarwal N (2015) Proof Key For Code Exchange by OAuth Public Clients.(Internet Engineering Task Force, Reston, VA), RFC 7636.<a href="https://doi.org/10.17487/RFC7636">https://doi.org/10.17487/RFC7636</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-rfc9325" name="ref-rfc9325">RFC9325]</a>Sheffer Y, Saint-Andre P, Fossati T (2022) Recommendations for Secure Use of Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS).(Internet Engineering Task Force (IETF)), IETF Request for Comments (RFC) 9325.<a href="https://doi.org/10.17487/RFC9325">https://doi.org/10.17487/RFC9325</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML" name="ref-SAML">SAML]</a>Ragouzis N, Hughes J, Philpott R, Maler E, Madsen P, Scavo T (2008) Security Assertion Markup Language (SAML) V2.0 Technical Overview.(Organization for Advancement of Structured Information Standards (OASIS) Open, Woburn, MA), SAML 2.0.<a href="https://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html">https://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML-bindings" name="ref-SAML-bindings">SAML-Bindings]</a>Cantor S, Frederick H, Kemp J, Philpott R, Maler M (2005) OASIS Security Assertion Markup Language (SAML) V2.0のバインディング。(Organization for Advancement of Structured Information Standards (OASIS) Open, Woburn, MA), SAML 2.0.<a href="https://docs.oasis-open.org/security/saml/v2.0/saml-bindings-2.0-os.pdf">https://docs.oasis-open.org/security/saml/v2.0/saml-bindings-2.0-os.pdf</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SAML-WebSSO" name="ref-SAML-WebSSO">SAML-WebSSO]</a>Hughes J, Cantor S, Hodges J, Hirsch F, Mishra P, Philpott R, Maler E (2005) OASIS Security Assertion Markup Language (SAML) V2.0のプロファイル。(Organization for Advancement of Structured Information Standards (OASIS) Open, Woburn, MA), SAML Profiles 2.0.<a href="https://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf">https://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-Section508" name="ref-Section508">Section508]</a>General Services Administration (2022)<em>IT Accessibility Laws and Policies</em>.<a href="https://www.section508.gov/manage/laws-and-policies/">https://www.section508.gov/manage/laws-and-policies/</a>。</p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SD-JWT" name="ref-SD-JWT">SD-JWT]</a>Fett D, Yasuda K, Campbell B (2024) Selective Disclosure for JWT (SD-JWT).(Internet Engineering Task Force, Reston, VA)。h<a href="https://datatracker.ietf.org/doc/draft-ietf-oauth-selective-disclosure-jwt/">ttps://</a>datatracker.ietf.org/doc/draft-ietf-oauth-selective-disclosure-jwt/</p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-52" name="ref-SP800-52">SP800-52]</a>McKay K, Cooper D (2019) Guidelines for the Selection, Configuration, and Use of Transport Layer Security (TLS) Implementations.(米国国立標準技術研究所）、NIST Special Publication (SP) 800-52 Rev. 2.<a href="https://doi.org/10.6028/NIST.SP.800-52r2">https://doi.org/10.6028/NIST.SP.800-52r2</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-53" name="ref-SP800-53">SP800-53]</a>Joint Task Force (2020) Security and Privacy Controls for Information Systems and Organizations.(National Institute of Standards and Technology, Gaithersburg, MD), NIST Special Publication (SP) 800-53 Rev. 5, Includes updates as of December 10, 2020.<a href="https://doi.org/10.6028/NIST.SP.800-53r5">https://doi.org/10.6028/NIST.SP.800-53r5</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-63" name="ref-SP800-63">SP800-63]</a>Temoshok D, Proud-Madruga D, Choong YY, Galluzzo R, Gupta S, LaSalle C, Lefkovitz N, Regenscheid A (2024) デジタル ID ガイドライン。(National Institute of Standards and Technology, Gaithersburg, MD), NIST Special Publication (SP) 800-63-4 2pd.<a href="https://doi.org/10.6028/NIST.SP.800-63-4.2pd">https://doi.org/10.6028/NIST.SP.800-63-4.2pd</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-63A" name="ref-SP800-63A">SP800-63A]</a>Temoshok D, Abruzzi C, Choong YY, Fenton JL, Galluzzo R, LaSalle C, Lefkovitz N, Regenscheid A (2024) デジタル ID ガイドライン：Identity Proofing and Enrollment.(National Institute of Standards and Technology, Gaithersburg, MD), NIST Special Publication (SP) 800-63A-4 2pd.<a href="https://doi.org/10.6028/NIST.SP.800-63a-4.2pd">https://doi.org/10.6028/NIST.SP.800-63a-4.2pd</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-63B" name="ref-SP800-63B">SP800-63B]</a>Temoshok D, Fenton JL, Choong YY, Lefkovitz N, Regenscheid A, Galluzzo R, Richer JP (2024) デジタル ID ガイドライン：Authentication and Authenticator Management.(National Institute of Standards and Technology, Gaithersburg, MD), NIST Special Publication (SP) 800-63B-4 ipd.<a href="https://doi.org/10.6028/NIST.SP.800-63b-4.2pd">https://doi.org/10.6028/NIST.SP.800-63b-4.2pd</a></p>

<p>[<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-131A" name="ref-SP800-131A">SP800-131A]</a>Barker E, Roginsky A (2019) Transitioning the Use of Cryptographic Algorithms and Key Lengths.(National Institute of Standards and Technology, Gaithersburg, MD), NIST Special Publication (SP) 800-131Ar2.<a href="https://doi.org/10.6028/NIST.SP.800-131Ar2">https://doi.org/10.6028/NIST.SP.800-131Ar2</a></p>

<h1 id="abbr" data-section="A">
  
  
    記号、略語、頭字語のリスト <a href="#abbr" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<dl>
  <dt>1:1の比較</dt>
  <dd>1対1の比較</dd>
  <dt>アバック</dt>
  <dd>属性ベースのアクセス制御</dd>
  <dt>AAL</dt>
  <dd>認証保証レベル</dd>
  <dt>キャプチャ</dt>
  <dd>コンピュータと人間を見分ける、完全自動の公開チューリング・テスト</dd>
  <dt>せいやくじゅうそくもんだい</dt>
  <dd>クレデンシャル・サービス・プロバイダー</dd>
  <dt>シーエスアールエフ</dt>
  <dd>クロスサイト・リクエスト・フォージェリ</dd>
  <dt>DNS</dt>
  <dd>ドメインネームシステム</dd>
  <dt>ファル</dt>
  <dd>連盟保証レベル</dd>
  <dt>フェドランプ</dt>
  <dd>連邦リスク認可管理プログラム</dd>
  <dt>IAL</dt>
  <dd>アイデンティティ保証レベル</dd>
  <dt>アイディーピー</dt>
  <dd>アイデンティティ・プロバイダー</dd>
  <dt>ホセ</dt>
  <dd>JSONオブジェクトの署名と暗号化</dd>
  <dt>JWT</dt>
  <dd>JSONウェブトークン</dd>
  <dt>MAC</dt>
  <dd>メッセージ認証コード</dd>
  <dt>PIA</dt>
  <dd>プライバシー影響評価</dd>
  <dt>ピーアイアイ</dt>
  <dd>個人を特定できる情報</dd>
  <dt>暗証番号</dt>
  <dd>個人識別番号</dd>
  <dt>PKI</dt>
  <dd>公開鍵基盤</dd>
  <dt>購買力平価</dt>
  <dd>ペアワイズ偽名識別子</dd>
  <dt>ラジオ周波数</dt>
  <dd>リスク管理の枠組み</dd>
  <dt>投影面積</dt>
  <dd>依拠当事者</dd>
  <dt>サムル</dt>
  <dd>セキュリティ・アサート・マークアップ言語</dd>
  <dt>サオップ</dt>
  <dd>プライバシー担当上級職員</dd>
  <dt>SCIM</dt>
  <dd>クロスドメインID管理システム</dd>
  <dt>ソーン</dt>
  <dd>記録制度に関するお知らせ</dd>
  <dt>TLS</dt>
  <dd>トランスポート層のセキュリティ</dd>
  <dt>エックスエスエス</dt>
  <dd>クロスサイト・スクリプティング</dd>
</dl>

<h1 id="def-and-acr" data-section="B">
  
  
    用語集 <a href="#def-and-acr" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p>デジタル ID の領域ではさまざまな用語が使用される。多くの定義は SP 800-63 の以前のバージョンと一貫しているが、この改訂で変更されたものもある。これらの用語の多くには単一の一貫した定義がないため、ここでの用語の定義方法には注意が必 要である。</p>

<dl>
  <dt>アカウントリンク</dt>
  <dd>複数の<em>連合識別子を</em>単一の<em>RP 加入者アカウントに</em>関連付けること、またはそれらの関連付けを 管理すること。</dd>
  <dt>アカウント解決</dt>
  <dd><em>RP 加入者アカウントと</em>、<em>フェデレーション・トランザクション</em>以前に<em>RP</em>がすでに保有していた情 報との関連付け。</dd>
  <dt>活性化因子</dt>
  <dd><em>多要素認証による</em> <em>認証を</em>成功させるために使用される追加<em>認証要素</em>。</dd>
  <dt>許可リスト</dt>
  <dd>ポリシー決定ごとに、許可される特定の要素の文書化されたリスト。<em>フェデレーションの</em>コンテキストでは、加入者の介入なしに<em>IdP</em>への接続を許可された<em>RP</em>のリストを指すために最も一般的に使用される。この概念は歴史的に<em>ホワイトリストとして</em>知られてきた。</dd>
  <dt>公認暗号</dt>
  <dd>暗号化アルゴリズム、<em>ハッシュ関数</em>、ランダム・ビット・ジェネレータ、または類似の技法で、<em>連邦情報処理標準</em>（FIPS）承認またはNIST推奨のもの。承認されたアルゴリズムおよび技法は、FIPS または NIST 勧告に規定または採用されている。</dd>
  <dt>アサーション</dt>
  <dd>サブスクライバの認証イベントに関する情報を含む、<em>IDP</em>から<em>RP</em>へのステートメント。アサーションには、サブスクライバの ID<em>属性を</em>含めることもできる。</dd>
  <dt>アサーションリファレンス</dt>
  <dd><em>アサーションとともに</em>作成されるデータ・オブジェクトで、<em>RP</em>が<em>認証された</em>保護チャネ ル上でアサーションを取得するために使用する。</dd>
  <dt>アサーション・プレゼンテーション</dt>
  <dd><em>アサーションが</em> <em>RP</em> に送信される方法。</dd>
  <dt>非対称キー</dt>
  <dd><em>公開</em>鍵と<em>秘密鍵で</em>構成される2つの関連鍵で、暗号化と復号化、<em>署名の</em>検証と生成など、補完的な処理を実行するために使用される。</dd>
  <dt>属性</dt>
  <dd>誰かまたは何かに帰属する品質または特性。ID 属性は、加入者の ID に関する属性である。</dd>
  <dt>属性バンドル</dt>
  <dd><em>CSP</em> からの<em>属性値および</em> <em>派生属性</em>値のパッケージ。パッケージは、CSP または<em>IdP</em> との相互作用から独立してバンドルの<em>検証を</em>可能にするために、必要な暗号化保護を持っている。属性バンドルは、サブスクライバが管理するウォレットでよく使用されます。</dd>
  <dt>属性プロバイダ</dt>
  <dd>サブスクライバの属性へのアクセスを提供する<em>ID API</em>のプロバイダ。この<em>API</em>は、サブスクライバが<em>RP</em> に存在することを必ずしもアサートしない。</dd>
  <dt>属性値</dt>
  <dd>サブスクライバの ID 属性を、形式に関係なくアサートする完全なステートメント。たとえば、<em>属性</em>"birthday "の値は、"12/1/1980 "または "1980 年 12 月 1 日 "である。</dd>
  <dt>視聴者制限</dt>
  <dd>特定の対象者にメッセージを制限することで、受信者が別の受信者向けのメッセージを知らずに<em>処理する</em>ことを防ぐ。<em>フェデレーション・プロトコルでは</em>、RP が異なる RP 向けに生成されたアサーションを受け入れないように、<em>アサーションは</em>特定の<em>RP</em>に聴衆<em>制限さ</em>れる。</dd>
  <dt>認証する</dt>
  <dd><em>認証を</em>参照。</dd>
  <dt>認証済み保護チャネル</dt>
  <dd>接続の開始者（クライアント）が受信者（サーバー）を認証している、<em>承認された暗号を</em>使用する暗号化通信チャネル。認証された保護されたチャネルは、機密性とアクティブな仲介者からの保護を提供するために暗号化され、ユーザー<em>認証</em>プロセスで頻繁に使用される。<em>トランスポートレイヤーセキュリティ</em>(<em>TLS</em>)およびデータグラムトランス ポートレイヤーセキュリティ(DTLS)<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-rfc9325">[RFC9325]</a>は、受信者が提示する証明書がイニ シエータによって検証される、認証された保護されたチャネルの例である。別段の指定がない限り、認証付き保護チャネルは、サーバーがクライア ントを認証することを要求しない。サーバーの認証は、多くの場合、各サーバーで個別に行われるのでは なく、信頼されたルートにつながる証明書チェーンを通して達成される。</dd>
  <dt>認証セッション</dt>
  <dd><em>プロテクトセッションを</em>参照。</dd>
  <dt>認証</dt>
  <dd><em>請求</em>者が、<em>加入者アカウントに</em>バインドされた 1 つ以上の<em>認証子を</em>所有し管理していることを証明 し、そのアカウントに関連する加入者であることを証明するプロセス。</dd>
  <dt>認証保証レベル（AAL）</dt>
  <dd>認証プロセスの強度を表すカテゴリー。</dd>
  <dt>認証者</dt>
  <dd>加入者が所有し管理するもの（<em>暗号モジュール</em>または<em>パスワードなど</em>）で、<em>請求者の</em>身元を<em>認証 する</em>ために使用されるもの。<em>認証子タイプ</em>および<em>多要素認証子を</em>参照。</dd>
  <dt>認証子結合</dt>
  <dd>特定の<em>認証</em>機関と<em>加入者アカウントとの</em>間の関連付けを確立し、その<em>認証機関を</em>、場合によっては他の 認証機関と組み合わせて、その加入者アカウントの<em>認証に</em>使用できるようにすること。</dd>
  <dt>認可する</dt>
  <dd>通常、<em>対象者の</em> <em>属性を</em>評価することによって自動化される。</dd>
  <dt>関係者</dt>
  <dd><em>フェデレーションでは</em>、<em>フェデレーション・トランザクション</em>内の情報の公開に関する決定を行う責任を負う組織、人、または実体。これは多くの場合、サブスクライバ（実行時決定が使用される場合）または<em>IdP</em>を運用する当事者（<em>許可リストが</em>使用される場合）である。</dd>
  <dt>双方向通信</dt>
  <dd>ブラウザなどの仲介者を介したリダイレクトを使用せず、直接接続に依存する2つのシステム間の通信。</dd>
  <dt>ベアラアサーション</dt>
  <dd>発表者の身元を証明するものとして単独で提示できる<em>主張</em>。</dd>
  <dt>ブロックリスト</dt>
  <dd>ポリシーの決定ごとにブロックされる特定の要素の文書化されたリスト。この概念は歴史的に<em>ブラックリストとして</em>知られている。</dd>
  <dt>チャレンジ・レスポンス・プロトコル</dt>
  <dd><em>ベリファイアが</em> <em>請求</em>者にチャレンジ（例えば、ランダム値や<em>nonce</em>）を送信し、請求者が秘密と組み合わせて（例えば、チャレンジと<em>共有秘密を</em>一緒にハッシュ化したり、チャレンジに<em>秘密鍵</em>演算を適用したりして）応答を生成し、ベリファイアに送信する<em>認証プロトコル</em>。検証者は、請求者が生成した応答を独自に検証し（例えば、チャレンジと共有秘密のハッシュを再計算して応答と比較したり、応答に対して公開鍵操作を行ったりする）、請求者が秘密を所有し管理していることを証明することができる。</dd>
  <dt>コア属性</dt>
  <dd><em>CSP</em>が<em>身元証明に</em>必要であると判断し、文書化した身元<em>属性の</em>セット。</dd>
  <dt>クレデンシャル・サービス・プロバイダ（CSP）</dt>
  <dd>信頼されるエンティティ。その機能には、ID サービスへの<em>申請者の</em> <em>ID 証明</em>、および<em>加入者ア カウントへの</em> <em>認証子の</em>登録が含まれる。CSP は独立した第三者である場合もある。</dd>
  <dt>クロスサイトリクエストフォージェリ（CSRF）</dt>
  <dd>現在<em>RP</em>に<em>認証さ</em>れ、安全なセッションで接続されている加入者が、攻撃者のウェブサイトをブラウズすることで、その加入者が無意識のうちに RP で不要なアクションを呼び出してしまう攻撃。    <p>例えば、銀行のウェブサイトが CSRF 攻撃に脆弱な場合、銀行への接続が別のブラウザウィンドウで開かれている間に、電子メール内の悪意のあるリンクをクリックすることで、加入者が意図せずに多額の送金を<em>承認して</em>しまう可能性がある。</p>
  </dd>
  <dt>クロスサイトスクリプティング（XSS）</dt>
  <dd>攻撃者が悪意のあるコードを良識のあるウェブサイトに注入することを可能にする脆弱性。これらのスクリプトは、標的となるウェブサイトが生成するスクリプトの権限を取得し、ウェブサイトとクライアント間のデータ転送の機密性と完全性を侵害する。Webサイトが、リクエストやフォームからユーザーが入力したデータを、実行できないようにサニタイズすることなく表示している場合、脆弱性があります。</dd>
  <dt>派生属性値</dt>
  <dd>サブスクライバの限定 ID<em>属性を</em>、派生する属性値を含むことなく、形式に関係なくアサート するステートメント。たとえば、属性「誕生日」を要求する代わりに、派生値は「18 歳以上」とすることができる。物理的住所 "の属性を要求する代わりに、派生値は "現在この地区に居住 "とすることができる。本ガイドラインの以前のバージョンでは、この構成を "属性参照 "と呼んでいました。</dd>
  <dt>デジタルアイデンティティ</dt>
  <dd>与えられた文脈の中で、<em>対象を</em>一意に記述する<em>属性</em>または属性の集合。</dd>
  <dt>デジタル署名</dt>
  <dd><em>秘密鍵を</em>使用してデータにデジタル署名し、<em>公開鍵を</em>使用して署名を検証する<em>非対称鍵</em>操作。デジタル署名は、<em>真正性</em>保護、完全性保護、<em>否認防止を</em>提供するが、機密性や<em>リプレイ攻撃</em>保護は提供しない。</dd>
  <dt>解離性</dt>
  <dd>システムの運用要件を超え、個人またはデバイスに関連付けることなく、PII またはイベントの<em>処理を</em>可能にする。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-NISTIR8062">[NISTIR8062]。</a></dd>
  <dt>エントロピー</dt>
  <dd>攻撃者が秘密の値を決定する際に直面する不確実性の量。エントロピーは通常ビットで表される。<em>n</em>ビットのエントロピーを持つ値は、一様に分布した<em>n ビットの</em>乱数値と同じ不確実性を持つ。</dd>
  <dt>エクイティ</dt>
  <dd>黒人、ラテンアメリカ人、先住民、アジア系アメリカ人、太平洋諸島民、その他の有色人種、宗教的マイノリティのメンバー、レズビアン、ゲイ、バイセクシュアル、トランスジェンダー、クィア（LGBTQ+）のメンバー、障害を持つ人、地方に住む人、その他持続的な貧困や不平等によって不利な影響を受けている人など、これまでそのような待遇が否定されてきた恵まれないコミュニティに属する人を含む、すべての個人を一貫して組織的に公平、公正、公平に扱うこと。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-EO13985">[EO13985］</a></dd>
  <dt>連邦情報処理標準（FIPS）</dt>
  <dd>情報技術管理改革法（公法104-106）に基づき、商務長官は、国立標準技術研究所（NIST）が連邦コンピュータ・システムのために開発する標準とガイドラインを承認する。NISTは、これらの標準とガイドラインを連邦情報処理標準（FIPS）として発行し、政府全体で使用する。NIST が FIPS を策定するのは、セキュリ ティや相互運用性など、連邦政府からやむを得ない要求があり、受け入れ可能な業界標準や解決策がない場合である。詳細については、背景情報を参照のこと。    <p>FIPS 文書は、FIPS ホームページ<a href="https://www.nist.gov/itl/fips.cfm">（https://www.nist.gov/itl/fips.cfm</a>）からオンラインで入手できる<a href="https://www.nist.gov/itl/fips.cfm">。</a></p>
  </dd>
  <dt>連合識別子</dt>
  <dd><em>アサーション</em>内の<em>サブジェクト識別子と</em>、そのアサーションを発行した<em>IdP</em>の<em>識別子の</em>組み合わせ。これらの情報を組み合わせると、<em>フェデレーション・トランザク ションの</em>コンテキストにおいて<em>サブスクライバを</em>一意に識別する。</dd>
  <dt>連盟</dt>
  <dd>一連の<em>ネットワーク化された</em>システム間で ID および認証情報の伝達を可能にするプロセス。</dd>
  <dt>フェデレーション保証レベル（FAL）</dt>
  <dd>認証イベントおよびサブスクライバの<em>属性を</em> <em>RP</em> に伝達するために<em>フェデレーション・トランザクショ ンで</em>使用されるプロセスを記述するカテゴリー。</dd>
  <dt>フェデレーション・プロトコル</dt>
  <dd><em>ネットワーク化された</em>システム間の<em>フェデレーション・トランザクションで</em>使用される技術プロトコル。</dd>
  <dt>フェデレーションプロキシ</dt>
  <dd>一連の<em>IdPに対する</em>論理<em>RP</em>、および一連のRPに対する論理IdPとして機能し、2つのシステムを単一のコンポーネントで橋渡しするコンポーネント。これらは "ブローカー "と呼ばれることもある。</dd>
  <dt>フェデレーション・トランザクション</dt>
  <dd><em>IdP</em>から<em>RP</em> に<em>アサーションを</em>伝達することにより、特定の<em>サブスクライバに対して</em> <em>フェデレーショ ン・プロセスを</em>使用して認証を<em>処理</em>する特定のインスタンス。</dd>
  <dt>フロント・チャネル・コミュニケーション</dt>
  <dd>加入者のブラウザを介したリダイレクトの使用など、仲介者を介したメッセージの受け渡しに依存する2つのシステム間の通信。</dd>
  <dt>ハッシュ関数</dt>
  <dd>任意の長さのビット列を固定長のビット列にマップする関数。承認されたハッシュ関数は以下の性質を満たす：    <ol>
      <li>
        <p>一方向性 - あらかじめ指定された出力にマップされる入力を見つけることは計算上不可能である。</p>
      </li>
      <li>
        <p>衝突に強い - 同じ出力に対応する2つの異なる入力を見つけることは計算上不可能である。</p>
      </li>
    </ol>
  </dd>
  <dt>識別子</dt>
  <dd>与えられたコンテキスト内で、単一のユニークなエンティティ（個人、デバイス、<em>セッションなど</em>）に関連付けられ、そのコンテキスト内で他のエンティティに割り当てられることのないデータオブジェクト。</dd>
  <dt>アイデンティティ</dt>
  <dd><em>デジタルIDを</em>見る</dd>
  <dt>アイデンティティAPI</dt>
  <dd>特定の加入者の<em>属性に</em>アクセスするために<em>RP</em>がアクセスする保護された API。</dd>
  <dt>アイデンティティ保証レベル（IAL）</dt>
  <dd><em>被験者が</em> <em>主張する身元が</em>本当の身元であるという確信の度合いを伝えるカテゴリー。</dd>
  <dt>アイディーピー</dt>
  <dd>サブスクライバの<em>アサーションを</em>作成し、そのアサーションを<em>RP</em> に送信する、<em>フェデレーション・トランザクショ</em>ンの当事者。</dd>
  <dt>インジェクション攻撃</dt>
  <dd>攻撃者が信頼できない入力をプログラムに供給する攻撃。フェデレーショ ンのコンテキストでは、攻撃者は、RP との<em>認証</em> <em>セッションを</em>作成するために、信頼されていない<em>アサーション</em>または<em>アサーション</em>参照を<em>RP</em>に提示する。</dd>
  <dt>ログイン</dt>
  <dd>個人とシステム間の<em>認証</em> <em>セッションの</em>確立。<em>サインイン」、「</em> <em>ログオン」、</em>「<em>サインオン</em>」とも呼ばれる<em>。</em></dd>
  <dt>メッセージ認証符号</dt>
  <dd><em>対称鍵を</em>使用し、データの偶発的な変更と意図的な変更の両方を検出するデータ上の暗号チェックサム。MACは<em>真正</em>性と完全性を保護するが、<em>否認</em>防止はできない。</dd>
  <dt>ネットワーク</dt>
  <dd><em>請求</em>者と他の当事者との間のメッセージ伝送に使用される、オープンな通信媒体。特に断りのない限り、ネットワークのセキュリ ティについては想定していない。ネットワークはオープンであり、当事者（請求者、<em>検証者</em>、<em>CSP</em>、<em>RP</em> など）間のどの時点においても能動的攻撃（なりすまし、<em>セッション・</em>ハイジャックなど）および受動的攻撃（盗聴など）を受けると想定している。</dd>
  <dt>ノンス</dt>
  <dd>セキュリティ・プロトコルで使用される値で、同じ鍵で繰り返されることはない。例えば、<em>チャレンジ・レスポンス認証プロトコルで</em>チャレンジとして使用される ノンスは、認証鍵が変更されるまで繰り返されてはならない。さもないと、<em>リプレイ攻撃の</em>可能性がある。チャレンジとしてnonceを使用することは、ランダムチャレンジとは異なる要件である。</dd>
  <dt>ペアワイズ仮名識別子</dt>
  <dd>特定の<em>RP</em> で使用するために IdP が生成する<em>仮名識別子</em>。</dd>
  <dt>個人情報</dt>
  <dd><em>個人を特定できる情報を</em>参照。</dd>
  <dt>個人識別情報（PII）</dt>
  <dd>単独で、または特定の個人にリンクされているかリンク可能な他の情報と組み合わされた場 合に、個人の身元を識別または追跡するために使用できる情報。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-A-130">[A-130]</a></dd>
  <dt>予測可能性</dt>
  <dd>PIIおよび情報システムによるその<em>処理について</em>、個人、所有者、運用者が信頼できる仮定を可能にすること。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-NISTIR8062">[NISTIR8062]。</a></dd>
  <dt>秘密鍵</dt>
  <dd><em>非対称鍵</em>暗号方式では、秘密鍵（すなわちシークレット・キー）は<em>デジタル署名の</em>作成に使われる数学的な鍵であり、アルゴリズムによっては、対応する<em>公開鍵で</em>暗号化されたメッセージやファイルを復号化する。<em>共通鍵</em>暗号方式では、暗号化と復号化の両方に同じ秘密鍵が使われる。</dd>
  <dt>加工</dt>
  <dd>PIIに対して実行される操作または一連の操作であり、PIIの収集、保持、記録、生成、変換、使用、開示、移転、および廃棄を含むが、これらに限定されない。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-NISTIR8062">[NISTIR8062]。</a></dd>
  <dt>プロテクトセッション</dt>
  <dd>2つの参加者間のメッセージが暗号化され、"セッション鍵 "と呼ばれる<em>共有秘密の</em>セットを使用して完全性が保護される<em>セッション</em>。    <p>保護されたセッションは、セッション中に一方の参加者がセッション鍵に加え て1つ以上の<em>認証子を</em>所有していることを証明し、もう一方の当事者が認証子に 関連付けられた身元を検証できる場合に、<em>認証されて</em>いると言われる。両方の参加者が認証されている場合、保護されたセッションは<em>相互に認証されて</em>いるという。</p>
  </dd>
  <dt>プロビジョニングAPI</dt>
  <dd><em>RP</em> <em>加入者アカウントの</em>プロビジョニングと管理を目的として、<em>RP</em>が複数の加入者の ID<em>属性に</em>アク セスできる保護された API。</dd>
  <dt>仮名識別子</dt>
  <dd><em>RPが</em>サブスクライバーに関して何かを推測することはできないが、RPが一 人のサブスクライバーに複数のやりとりを関連付けることを可能にする、無意味だが一 意の<em>識別子</em>。</dd>
  <dt>公開鍵</dt>
  <dd>署名の検証やデータの暗号化に使用される<em>非対称鍵</em>ペアの公開部分。</dd>
  <dt>公開鍵証明書</dt>
  <dd>証明書：認証局の<em>秘密鍵によって</em>発行され、デジタル署名されたデジタル文書で、<em>識別子を</em>サブスクライバの<em>公開 鍵に</em>バインドする。証明書は、証明書で識別されるサブスクライバが、プライベート鍵を単独で管理し、プライ ベート鍵にアクセスできることを示す。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-RFC5280">RFC5280]</a>も参照のこと。</dd>
  <dt>公開鍵基盤（PKI）</dt>
  <dd>証明書および<em>公開</em>鍵と秘密鍵のペアを管理するために使用される一連のポリシー、プロセス、 サーバー・プラットフォーム、ソフトウェア、およびワークステーション。</dd>
  <dt>再認証</dt>
  <dd>延長された利用<em>セッション</em>中に、加入者の継続的な存在と<em>認証の</em>意思を確認するプロセス。</dd>
  <dt>依拠当事者</dt>
  <dd>通常、トランザクションを処理するため、または情報もしくはシステムへのアクセスを許可 するために、加入者の身元に関する<em>検証</em>者の<em>アサーションに</em>依拠するエンティティ。</dd>
  <dt>リプレーアタック</dt>
  <dd>攻撃者が（正当な<em>請求</em>者と<em>検証者の</em>間で）以前にキャプチャしたメッセージを再生して、検証者にその請求者になりすましたり、あるいはその逆になりすましたりする攻撃。</dd>
  <dt>リスクアセスメント</dt>
  <dd>リスクアセスメント（Risk Assessment） システムの運用に起因する組織運営（すなわち、使命、機能、イメージ、評判）、組織資産、個 人、他の組織に対するリスクを特定し、推定し、優先順位をつけるプロセス。リスクアセスメントは、<em>リスクマネジメントの</em>一部であり、脅威及び脆弱性の分析を組み 込み、計画中又は実施中のセキュリティ<em>管理策によって</em>提供される緩和策を考慮する。リスク分析」と同義である。</dd>
  <dt>リスク管理</dt>
  <dd>組織運営（使命、機能、イメージ、評判を含む）、組織資産、個人、および他の組織に対する情報セキュリティリスクを管理するプログラムと支援プロセスであり、(i)リスク関連活動の背景の確立、(ii)リスクの評価、(iii)一旦決定されたリスクへの対応、および(iv)長期にわたるリスクの監視を含む。</dd>
  <dt>RP加入者アカウント</dt>
  <dd>アカウントは、<em>IdP</em> からの<em>加入者アカウントの</em>RP のビューに基づいて、連携システムで<em>RP</em>によって確立され管理される。RP 加入者アカウントは、1 つ以上の<em>連携識別子と</em>関連付けられ、IdP との<em>連携トランザクショ ンを通じて</em>加入者がアカウントにアクセスできるようにする。</dd>
  <dt>セキュリティドメイン</dt>
  <dd>共通の管理・アクセス制御下にあるシステムの集合。</dd>
  <dt>セッション</dt>
  <dd>サブスクライバと<em>エンドポイント</em>（<em>RP</em>または<em>CSP</em>）の間の永続的な相互作用。セッションは認証イベントで始まり、セッション終了イベントで終わる。セッションは、サブスクライバのソフトウェア（ブラウザ、アプリケー ション、OS など）が、セッションと認証イベントの関連付けを証明するために RP に提示できるセッ ション・シークレットの使用によって拘束される。</dd>
  <dt>セッションハイジャック攻撃</dt>
  <dd>後者の2つのパーティ間で認証交換が成功した後、攻撃者が<em>請求</em>者と<em>検証者の</em>間に入り込む攻撃。攻撃者は、ベリファイアに対してサブスクライバを装ったり、逆にベリファイアに対 してサブスクライバを装ったりして、<em>セッション</em>データの交換を制御することができる。請求者と<em>RP</em>間のセッションも同様に侵害される可能性がある。</dd>
  <dt>シングルサインオン（SSO）</dt>
  <dd>一般に<em>フェデレーション・プロトコルで</em>実装される。</dd>
  <dt>件名</dt>
  <dd>個人、組織、デバイス、ハードウェア、<em>ネットワーク</em>、ソフトウェア、またはサービス。本ガイドラインにおいて、対象者とは<em>自然人を</em>指す。</dd>
  <dt>契約者</dt>
  <dd><em>CSP</em>ID サービスに登録された個人。</dd>
  <dt>契約者アカウント</dt>
  <dd><em>CSP</em>ID サービスに登録されたサブスクライバごとに登録された情報および<em>認証</em>子を含む、<em>CSP</em>によって確立されたアカウント。</dd>
  <dt>対称鍵</dt>
  <dd><em>暗号</em>操作とその逆を実行するために使用される<em>暗号鍵</em>。(暗号化と復号化、<em>メッセージ認証コードの</em>作成とその検証など）。</dd>
  <dt>トランスポート・レイヤー・セキュリティ（TLS）</dt>
  <dd>ブラウザやウェブサーバに広く実装されている認証とセキュリティのプロトコル。TLSは<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-RFC5246">[RFC5246]</a>で定義されている。TLSは古いSSLプロトコルに似ており、TLS 1.0は事実上SSLバージョン3.1である。SP 800-52、Guidelines for the Selection and Use of Transport Layer Security (TLS) Implementations<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-SP800-52">[SP800-52]</a>は、政府アプリケーションでTLSをどのように使うかを規定している。</dd>
  <dt>信託契約</dt>
  <dd>サブスクライバと RP 間で認証<em>セッションを</em>確立する目的で、<em>CSP</em>、<em>IdP</em>、および<em>RP</em>が<em>フェデレーション・トランザクショ ンに</em>参加することを許可される一連の条件。</dd>
  <dt>ユーザビリティ</dt>
  <dd>特定の使用者が、特定の使用状況において、特定の目標を達成するために、製品を効果的、効率的、 かつ満足感をもって使用できる程度。<a href="/800-63-4-2ndPD/sp800-63c/references/#ref-ISOIEC9241">[ISO/IEC9241-11】。］</a></dd>
  <dt>ベリファイア</dt>
  <dd><em>認証プロトコルを</em>使用して、請求者が 1 つまたは複数の<em>認証子を</em>所有し管理しているこ とを検証することにより、<em>請求者の</em>身元を検証するエンティティ。これを行うには、検証者は、認証子と<em>サブスクライバ・アカウントの</em>バインディングを確認し、 サブスクライバ・アカウントがアクティブであることを確認する必要がある。</dd>
</dl>

<h1 id="changelog" data-section="C">
  
  
    変更履歴 <a href="#changelog" class="header-link"><i class="fa fa-link"></i></a>
  
  
</h1>

<p><em>この付録は参考資料である。</em>SP 800-63C の最初のリリース以降の変更の概要を提供する。</p>

<ul>
  <li>
    <p>エクイティに関する考慮事項と要求事項の説明を追加。</p>
  </li>
  <li>
    <p>フェデレーション・プロセスの個別のステップとして、トラスト・アグリーメントと登録／ディスカバリー（キーの確立）を確立。</p>
  </li>
  <li>
    <p>すべてのFALには、信託契約の成立と登録に関する要件がある。</p>
  </li>
  <li>
    <p>FAL 定義に暗号化要件はもはやない。暗号化は、FAL に関係なく、信頼できないパーティを経由してアサーション内の PII を渡すことでトリガされる。</p>
  </li>
  <li>
    <p>FAL2はインジェクション・プロテクションを必要とする。</p>
  </li>
  <li>
    <p>FAL3は、古典的なHolder-of-Keyアサーションに加えて、RP-managed認証子を含む、より一般的なバウンド認証子を許容する。</p>
  </li>
  <li>
    <p>IAL/AAL/FALのコミュニケーションが必要。</p>
  </li>
  <li>
    <p>より包括的な表現に更新。</p>
  </li>
  <li>
    <p>RP加入者アカウントの定義と説明を追加。</p>
  </li>
  <li>
    <p>属性プロビジョニング・モデルとディスカッションを追加。</p>
  </li>
  <li>
    <p>加入者が管理するウォレットモデルが追加され、汎用のIdPから特定の要件が分離された。</p>
  </li>
  <li>
    <p>コア・ドキュメントのセクションを再編し、共通、汎用、加入者管理のウォレット要件を別々のセクションで扱うようにした。</p>
  </li>
  <li>
    <p>IdPおよびRPに対する救済要件が追加された。</p>
  </li>
  <li>
    <p>企業および動的なユースケースを明示的な例とともに随所に追加。</p>
  </li>
</ul>






  </div>
</div>
<footer role="contentInfo" class="site-footer">
  <div class="section-container">
    <div class="section-content">
    </div>
  </div>
</footer>

<script type="text/javascript">
    function loadSearch() {
        var sjs = SimpleJekyllSearch({
          searchInput: document.getElementById('search-input'),
          resultsContainer: document.getElementById('results-container'),
          json: '/800-63-4-2ndPD/search.json'
        });
    }
    $(function() {
      
      // Convert all links to on-page within document in collapsed view
      $('.container a[href^="/800-63-4-2ndPD/sp800-63c/"], .container a[href^="../"]').filter('a[href*="#"]').each(function(i, el) {
          var $el = $(el);
          var newPath = $el.attr('href').replace(/(.*)(\#.+)/, "$2");
          //console.log('1: ' + $el.attr('href') + ' :: ' + newPath);
          $el.attr('href', newPath);
      });
      // Convert all cross-document links when in collapsed view
      $('.container a[href^="/800-63-4-2ndPD/"]').not('a[href*="sp800-63c/"]').each(function(i, el) {
          var $el = $(el);
          var newPath = $el.attr('href').replace(new RegExp('(/800-63-4)/([^/]+)(/.*)?/(#.*)?'), '$1/$2.html$4');
          //console.log('2: ' + $el.attr('href') + ' :: ' + newPath);
          $el.attr('href', newPath);
      });
      
      // highlight normative language by adding classes
      $('strong').filter(':contains("SHALL"), :contains("SHALL NOT"), :contains("SHOULD"), :contains("SHOULD NOT"), :contains("MAY"), :contains("NEED NOT"), :contains("CAN"), :contains("CANNOT"), :contains("CAPITALS")').each(function(i, el) {
        var $el;
        $el = $(el);
        $el.addClass('normative');
      });
      // highlight the target
      $('a:target').parent().addClass('target');
      $(':target').addClass('target');
      $(window).on('hashchange', function(e) {
        $('.target').removeClass('target');
        $('a:target').parent().addClass('target');
        $(':target').addClass('target');
      });
    });
</script>


</body>
</html>